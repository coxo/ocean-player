{"version":3,"file":"player.js","sources":["../src/event/index.js","../src/service/url/lcStore.js","../src/util.js","../src/iconfont.js","../src/slider.js","../src/contraller_bar/bar.js","../src/event/eventName.js","../src/contraller_bar/left_bar.js","../src/contraller_bar/right_bar.js","../src/contraller_bar/scale_bar.js","../src/contraller_bar/index.js","../src/event/contrallerEvent.js","../src/message.js","../src/time_line.js","../src/event/errorEvent.js","../src/event/dragEvent.js","../src/service/lcStore.js","../src/api.js","../src/event/browserTabEvent.js","../src/live_heart.js","../src/player.js","../src/history/utils.js","../src/history/time_line_history.js","../src/history/play_end.js","../src/history/index.js","../src/createPlayer.js"],"sourcesContent":["class VideoEventInstance {\n  constructor(video) {\n    this.video = video\n    this.events = {}\n    this.playerEvents = {}\n  }\n  on(eventName, handle) {\n    this.events && this.events[eventName]\n      ? this.events[eventName].listener.push(handle)\n      : (this.events[eventName] = { type: eventName, listener: [handle] })\n  }\n  addEventListener(eventName, handle) {\n    if (this.video) {\n      this.playerEvents[eventName] ? this.playerEvents[eventName].push(handle) : (this.playerEvents[eventName] = [handle])\n      this.video.addEventListener(eventName, handle, false)\n    }\n  }\n  removeEventListener(eventName, handle) {\n    if (this.video) {\n      if (!this.playerEvents || !this.playerEvents[eventName]) {\n        return\n      }\n      let index = this.playerEvents[eventName].findIndex(v => v === handle)\n      index > -1 && this.playerEvents[eventName].splice(index, 1)\n      this.video.removeEventListener(eventName, handle, false)\n    }\n  }\n  emit(eventName, ...data) {\n    if (!this.events || !this.events[eventName]) {\n      return\n    }\n    this.events[eventName].listener.forEach(v => {\n      v(...data)\n    })\n  }\n  off(eventName, handle) {\n    if (!this.events || !this.events.eventName) {\n      return\n    }\n    let index = this.events[eventName].listener.findIndex(v => v === handle)\n    index > -1 && this.events[eventName].listener.splice(index, 1)\n  }\n  getApi() {\n    return { on: this.on.bind(this), off: this.off.bind(this), emit: this.emit.bind(this), addEventListener: this.addEventListener.bind(this), removeEventListener: this.removeEventListener.bind(this) }\n  }\n  destroy() {\n    Object.keys(this.playerEvents).forEach(key => {\n      this.playerEvents[key].forEach(fn => {\n        this.removeEventListener(key, fn)\n      })\n    })\n    this.playerEvents = {}\n    this.events = {}\n    this.video = null\n  }\n}\n\nexport default VideoEventInstance\n","const hostUrl = 'http://127.0.0.1';\r\n\r\nexport default {\r\n  getTranscodingStream: {\r\n    value: `${hostUrl}:<port>/video/v1/transcoding?uri=<pull_uri>`,\r\n    label: '获取视频流接口',\r\n    actionName: 'getTranscodingStream'\r\n  },\r\n  setStreamResolution:{\r\n    value: `${hostUrl}:<port>/video/v1/change?resolution=<resolution>`,\r\n    label: '修改视频流接口',\r\n    actionName: 'setStreamResolution'\r\n  }\r\n};\r\n","import flvjs from 'flv.zv.js'\nimport * as Hls from 'hls.js'\nimport lcStore from \"./service/url/lcStore\";\n\n/**\n * 全局配置\n * decryptionMode： 是否加密\n * switchRate：码率切换控制\n */\n export const GL_CACHE = {\n  DM :'decryptionMode',\n  SR :'switchRate'\n}\n\n/**\n * 客户端插件模式，随机端口\n */\nexport const LOCAL_PORT = [\"15080\", \"15081\", \"15082\", \"15083\", \"15084\", \"15085\"]\n\n/**\n * 获取视频分辨率\n */\n export function getVideoRatio() {\n  return {\n    '1': { value: '1920*1080', name: '超清', resolution:'1080p', bitrate:'2M'},\n    '2': { value: '1280*720', name: '高清', resolution:'720p', bitrate:'1M'},\n    '3': { value: '640*360', name: '标清', resolution:'360p', bitrate:'300K'},\n    '4': { value: '', name: '原始', resolution: '', bitrate:''},\n  }\n}\n\nexport function findVideoBitrate(val) {\n  const ens = getVideoRatio()\n  for(const key in ens){\n    if(ens[key]['resolution'] == val){\n      return ens[key]['bitrate']\n    }\n  }\n}\n\n/**\n * 创建HLS对象\n * @param {*} video\n * @param {*} file\n */\nexport function createHlsPlayer(video, file) {\n  if (Hls.isSupported()) {\n    const player = new Hls({\n      liveDurationInfinity: true,\n      levelLoadingTimeOut: 15000,\n      fragLoadingTimeOut: 25000,\n      enableWorker: true,\n    })\n    player.loadSource(file)\n    player.attachMedia(video)\n    return player\n  }\n}\n\n/**\n * 创建FLV对象\n * @param {*} video\n * @param {*} options\n */\nexport function createFlvPlayer(video, options) {\n  const { flvOptions = {}, flvConfig = {} } = options\n  if (flvjs.isSupported()) {\n    const player = flvjs.createPlayer(\n      Object.assign(\n        {},\n        {\n          type: 'flv',\n          url: options.file,\n        },\n        flvOptions\n      ),\n      Object.assign(\n        {},\n        {\n          enableWorker: true,\n          // lazyLoad: false,\n          // Indicates how many seconds of data to be kept for lazyLoad.\n          // lazyLoadMaxDuration: 0,\n          // autoCleanupMaxBackwardDuration: 3,\n          // autoCleanupMinBackwardDuration: 2,\n          // autoCleanupSourceBuffer: true,\n          enableStashBuffer: false,\n          stashInitialSize: 128,\n          cors: true,\n          seekType: 'range',\n          isLive: options.isLive || true,\n          // headers:{\n          //   \"Access-Control-Allow-Origin\":\"*\"\n          // }\n        },\n        flvConfig\n      )\n    )\n    player.attachMediaElement(video)\n    player.load()\n    return player\n  }\n}\n\n/**\n * 获取播放文件类型\n * @param {*} url\n */\nexport function getVideoType(url) {\n  return url.indexOf('.flv') > -1 ? 'flv' : url.indexOf('.m3u8') > -1 ? 'm3u8' : 'native'\n}\n\n/**\n * 播放时间转字符串\n * @param {*} second_time\n */\nexport function timeStamp(second_time) {\n  let time = Math.ceil(second_time)\n  if (time > 60) {\n    let second = Math.ceil(second_time % 60)\n    let min = Math.floor(second_time / 60)\n    time = `${min < 10 ? `0${min}` : min}:${second < 10 ? `0${second}` : second}`\n    if (min > 60) {\n      min = Math.ceil((second_time / 60) % 60)\n      let hour = Math.floor(second_time / 60 / 60)\n      time = `${hour < 10 ? `0${hour}` : hour}:${min < 10 ? `0${min}` : min}:${second < 10 ? `0${second}` : second}`\n    } else {\n      time = `00:${time}`\n    }\n  } else {\n    time = `00:00:${time < 10 ? `0${time}` : time}`\n  }\n\n  return time\n}\n\n/**\n * 日期格式化\n * @param {*} timetemp\n */\nexport function dateFormat(timetemp) {\n  const date = new Date(timetemp)\n  let YYYY = date.getFullYear()\n  let DD = date.getDate()\n  let MM = date.getMonth() + 1\n  let hh = date.getHours()\n  let mm = date.getMinutes()\n  let ss = date.getSeconds()\n  return `${YYYY}.${MM > 9 ? MM : '0' + MM}.${DD > 9 ? DD : '0' + DD} ${hh > 9 ? hh : '0' + hh}.${mm > 9 ? mm : '0' + mm}.${ss > 9 ? ss : '0' + ss}`\n}\n\n/**\n * 全屏\n * @param {*} element\n */\nexport function fullscreen(element) {\n  if (element.requestFullScreen) {\n    element.requestFullScreen()\n  } else if (element.webkitRequestFullScreen) {\n    element.webkitRequestFullScreen()\n  } else if (element.mozRequestFullScreen) {\n    element.mozRequestFullScreen()\n  } else if (element.msRequestFullscreen) {\n    element.msRequestFullscreen()\n  }\n}\n\n/**\n * exitFullscreen 退出全屏\n * @param  {Objct} element 选择器\n */\nexport function exitFullscreen() {\n  if (document.exitFullscreen) {\n    document.exitFullscreen()\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen()\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen()\n  } else if (document.msExitFullscreen) {\n    document.msExitFullscreen()\n  }\n}\n\n/**\n * 判读是否支持全屏\n */\nexport function fullscreenEnabled() {\n  return document.fullscreenEnabled || document.mozFullScreenEnabled || document.webkitFullscreenEnabled || document.msFullscreenEnabled\n}\n\n/**\n * [isFullscreen 判断浏览器是否全屏]\n * @return [全屏则返回当前调用全屏的元素,不全屏返回false]\n */\nexport function isFullscreen(ele) {\n  if (!ele) {\n    return false\n  }\n  return document.fullscreenElement === ele || document.msFullscreenElement === ele || document.mozFullScreenElement === ele || document.webkitFullscreenElement === ele || false\n}\n// 添加 / 移除 全屏事件监听\nexport function fullScreenListener(isAdd, fullscreenchange) {\n  const funcName = isAdd ? 'addEventListener' : 'removeEventListener'\n  const fullScreenEvents = ['fullscreenchange', 'mozfullscreenchange', 'webkitfullscreenchange', 'msfullscreenchange']\n  fullScreenEvents.map((v) => document[funcName](v, fullscreenchange))\n}\n\n/**\n * 计算视频拖拽边界\n * @param {*} ele\n * @param {*} currentPosition\n * @param {*} scale\n */\nexport function computedBound(ele, currentPosition, scale) {\n  const data = currentPosition\n  const eleRect = ele.getBoundingClientRect()\n  const w = eleRect.width\n  const h = eleRect.height\n  let lx = 0,\n    ly = 0\n  if (scale === 1) {\n    return [0, 0]\n  }\n  lx = (w * (scale - 1)) / 2 / scale\n  ly = (h * (scale - 1)) / 2 / scale\n  let x = 0,\n    y = 0\n  if (data[0] >= 0 && data[0] > lx) {\n    x = lx\n  }\n  if (data[0] >= 0 && data[0] < lx) {\n    x = data[0]\n  }\n\n  if (data[0] < 0 && data[0] < -lx) {\n    x = -lx\n  }\n  if (data[0] < 0 && data[0] > -lx) {\n    x = data[0]\n  }\n\n  if (data[1] >= 0 && data[1] > ly) {\n    y = ly\n  }\n  if (data[1] >= 0 && data[1] < ly) {\n    y = data[1]\n  }\n\n  if (data[1] < 0 && data[1] < -ly) {\n    y = -ly\n  }\n  if (data[1] < 0 && data[1] > -ly) {\n    y = data[1]\n  }\n  if (x !== data[0] || y !== data[1]) {\n    return [x, y]\n  } else {\n    return\n  }\n}\n/**\n * \n * @returns 获取随机数\n */\nexport function getRandom() {\n  return Math.random().toString(36).substr(2)\n}\n\nexport function JSONP(url){\n  let script = document.createElement('script')//创建script标签\n  let functionName = 'fang' + parseInt(Math.random()*10000000,10)//设置调用函数名\n  window[functionName] = function(result){\n    if(result === 'success'){\n      amount.innerText = amount.innerText - 1\n    }\n  }\n  script.src = `${url}&callback=${functionName} `\n  document.body.appendChild(script)//将能实现发送跨域请求的script标签插入html\n  script.onload = function(e){\n    document.body.removeChild(script);\n    delete window[functionName]\n  }\n  script.onerror = function(){\n    console.warn('切换分辨率失败！')\n    document.body.removeChild(script);\n    delete window[functionName]\n  }\n  //完成传输后删除script标签\n}\n/**\n * 生成UUID\n */\n export function genuuid() {\n  let s = [];\n  let hexDigits = '0123456789abcdef';\n  for (let i = 0; i < 36; i++) {\n    s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n  }\n  s[14] = '4';\n  s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);\n  s[8] = s[13] = s[18] = s[23] = '-';\n\n  let uuidStr = s.join('');\n  return uuidStr;\n}\n\n\n/**\n * 根据分屏获取对应的分辨率\n * 默认 960*544\n */\n export function getScreenRate(num){\n  const videoRatio = getVideoRatio()\n  // 1、4、6、8、9、10、13、16\n  if(num < 4){\n    return videoRatio['4'].resolution\n  }else if(num < 13 && num >= 4){\n    return videoRatio['2'].resolution\n  }else if(num <= 16 && num >= 13){\n    return videoRatio['3'].resolution\n  }else{\n    return videoRatio['1'].resolution\n  }\n}\n\n\n/**\n * 获取全局配置\n * @param {*} key \n */\n export function getGlobalCache(key){\n  const strS = localStorage.getItem('PY_PLUS')\n  let playerOptions = null\n\n  try {\n    playerOptions = JSON.parse(strS);\n  } catch (error) {\n    console.error('播放配置出错，请检查浏览器本地存储PY_PLUS！')\n    return ''\n  }\n\n  return playerOptions ? playerOptions[key] : ''\n}\n\n\nexport function unicodeToBase64(s){\n  return window.btoa(s)\n}\n\nexport function getLocalPort(){\n  return LOCAL_PORT[Math.floor(Math.random()*LOCAL_PORT.length)]\n}\n\nexport function tansCodingToUrl(url, resolution, onToken){\n  let param1 = ''\n  let param2 = ''\n  let param3 = ''\n\n  const key = genuuid()\n  // 是否本地插件播放\n  if(!getGlobalCache('mode')) return url\n\n  // 是否加密\n  url = url + getGlobalCache(GL_CACHE.DM)\n\n  // &resolution=<resolution>&bitrate=<bitrate>&key=<key>\n  const url_info ={\n      port: getLocalPort(),\n      pull_uri: unicodeToBase64(url).replaceAll('=','')\n  }\n  // 分辨率，如果为空，为原始分辨率\n  if(resolution){\n    param1 = '&resolution=' + resolution\n  }\n\n  param2 = '&token=' + key\n\n  // 免责工具使用\n  onToken && onToken(key)\n\n  if(resolution){\n    param1 = '&resolution=' + resolution\n\n    // 码率\n    param3 = '&bitrate=' + findVideoBitrate(resolution)\n\n    console.log(param3)\n  }\n\n  return lcStore.getTranscodingStream.value.replace('<pull_uri>', url_info.pull_uri).replace('<port>', url_info.port) + param1 + param2 + param3\n}\n\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport './style/iconfont.less'\n\nexport default function IconFont({ type, className = '', ...props }) {\n  return <i className={`lm-player-iconfont ${type} ${className}`} {...props} />\n}\n\nIconFont.propTypes = {\n  type: PropTypes.string,\n  className: PropTypes.string\n}\n","import React, { useEffect, useRef } from 'react'\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\nimport './style/slider.less'\n\nclass Slider extends React.Component {\n  constructor(props) {\n    super(props)\n    this.sliderDomRef = React.createRef()\n    this.layoutDom = null\n    this.lineDom = null\n    this.dragDom = null\n    this.dragFlag = false\n    this.state = {\n      value: this.props.currentPercent || 0,\n      tempValue: 0,\n      showTips: false,\n      tipsX: 0,\n      tipsY: 0\n    }\n  }\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (!this.dragFlag) {\n      this.setState({ value: nextProps.currentPercent || 0 })\n    }\n  }\n  componentDidMount() {\n    this.layoutDom = this.sliderDomRef.current\n    this.dragDom = this.layoutDom.querySelector('.drag-change-icon')\n    this.lineDom = this.layoutDom.querySelector('.slider-content')\n\n    this.layoutDom.addEventListener('mousemove', this.renderSliderTips, false)\n    this.layoutDom.addEventListener('mouseout', this.hideSliderTips, false)\n    this.lineDom.addEventListener('click', this.changeCurrentValue, false)\n    this.dragDom.addEventListener('click', this.cancelPropagation, false)\n    this.dragDom.addEventListener('mousedown', this.startDrag, false)\n  }\n  componentWillUnmount() {\n    clearTimeout(this.timer)\n    this.layoutDom.removeEventListener('mousemove', this.renderSliderTips, false)\n    this.layoutDom.removeEventListener('mouseout', this.hideSliderTips, false)\n    this.lineDom.removeEventListener('click', this.changeCurrentValue, false)\n    this.dragDom.removeEventListener('click', this.cancelPropagation, false)\n    this.dragDom.removeEventListener('mousedown', this.startDrag, false)\n\n    document.body.removeEventListener('mousemove', this.moveChange)\n    document.body.removeEventListener('mouseup', this.stopDrag)\n\n    this.sliderDomRef = null\n    this.layoutDom = null\n    this.lineDom = null\n    this.dragDom = null\n    this.dragFlag = null\n  }\n  renderSliderTips = e => {\n    const { renderTips } = this.props\n    if (!renderTips) {\n      return\n    }\n    clearTimeout(this.timer)\n    this.timer = setTimeout(() => {\n      const { x, width, top } = this.layoutDom.getBoundingClientRect()\n      const tipsX = e.pageX - x\n      let percent = (e.pageX - x) / width\n      percent = percent < 0 ? 0 : percent > 1 ? 1 : percent\n      this.setState({ tipsX, tipsY: top, showTips: true, tempValue: percent })\n    }, 200)\n  }\n  hideSliderTips = () => {\n    clearTimeout(this.timer)\n    this.setState({ showTips: false })\n  }\n  cancelPropagation = e => {\n    e.stopPropagation()\n  }\n  startDrag = e => {\n    e.stopPropagation()\n    this.dragFlag = true\n    document.body.addEventListener('mousemove', this.moveChange)\n    document.body.addEventListener('mouseup', this.stopDrag)\n  }\n  moveChange = e => {\n    e.stopPropagation()\n    const percent = this.computedPositionForEvent(e)\n    this.setState({ value: percent })\n  }\n  stopDrag = e => {\n    e.stopPropagation()\n    document.body.removeEventListener('mousemove', this.moveChange)\n    document.body.removeEventListener('mouseup', this.stopDrag)\n    this.dragFlag = false\n    let percent = this.state.value / 100\n    percent = percent < 0 ? 0 : percent > 1 ? 1 : percent\n    this.props.onChange && this.props.onChange(percent)\n  }\n  computedPositionForEvent(e) {\n    const { x, width } = this.layoutDom.getBoundingClientRect()\n    const { pageX } = e\n    let dx = pageX - x\n    if (dx > width) {\n      dx = width\n    }\n    if (dx < 0) {\n      dx = 0\n    }\n    return (dx / width) * 100\n  }\n  changeCurrentValue = event => {\n    event.stopPropagation()\n    const { width, x } = this.layoutDom.getBoundingClientRect()\n    let percent = (event.pageX - x) / width\n    this.props.onChange && this.props.onChange(percent)\n  }\n  render() {\n    const { value, showTips, tipsX } = this.state\n    const { availablePercent = 0, className = '', tipsY } = this.props\n    return (\n      <div className={`slider-layout ${className}`} ref={this.sliderDomRef}>\n        <div className=\"slider-content\">\n          <div className=\"slider-max-line\" />\n          <div className=\"slider-visibel-line\" style={{ width: `${availablePercent}%` }} />\n          <div className=\"slider-current-line\" style={{ width: `${value}%` }} />\n          {this.props.children}\n        </div>\n        <div className=\"slider-other-content\">\n          <div className=\"drag-change-icon\" draggable={false} style={{ left: `${value}%` }} />\n        </div>\n        <Tips visibel={showTips} className=\"lm-player-slide-tips\" style={{ left: tipsX, top: tipsY }} getContainer={() => this.sliderDomRef.current}>\n          {this.props.renderTips && this.props.renderTips(this.state.tempValue)}\n        </Tips>\n      </div>\n    )\n  }\n}\n\nSlider.propTypes = {\n  currentPercent: PropTypes.number,\n  seekTo: PropTypes.func,\n  video: PropTypes.element,\n  renderTips: PropTypes.func,\n  availablePercent: PropTypes.number,\n  onChange: PropTypes.func,\n  children: PropTypes.any,\n  className: PropTypes.string,\n  tipsY: PropTypes.number\n}\nSlider.defaultProps = {\n  tipsY: -10\n}\n\nfunction Tips({ getContainer, visibel, children, style, className = '' }) {\n  const ele = useRef(document.createElement('div'))\n  useEffect(() => {\n    const box = getContainer ? getContainer() || document.body : document.body\n    box.appendChild(ele.current)\n    return () => box.removeChild(ele.current)\n  }, [getContainer])\n\n  if (!visibel) {\n    return null\n  }\n  return ReactDOM.createPortal(\n    <div className={className} style={style}>\n      {children}\n    </div>,\n    ele.current\n  )\n}\n\nTips.propTypes = {\n  visibel: PropTypes.bool,\n  children: PropTypes.element,\n  style: PropTypes.any,\n  className: PropTypes.string\n}\n\nexport default Slider\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nexport default function Bar({ visibel = true, className = '', children, ...props }) {\n  if (visibel === false) {\n    return null\n  }\n  return (\n    <span className={`contraller-bar-item ${className}`} {...props}>\n      {children}\n    </span>\n  )\n}\n\nBar.propTypes = {\n  visibel: PropTypes.bool,\n  className: PropTypes.string,\n  children: PropTypes.any\n}\n","export default {\n  RELOAD: \"reload\", //手动视频重载\n  RELOAD_FAIL: \"reloadFail\", // 视频出错，重连失败\n  RELOAD_SUCCESS: \"reloadSuccess\", //视频出错，重连成功\n  ERROR: \"error\", //视频出错\n  ERROR_RELOAD: \"errorRload\", //视频出错，自动重连\n  HISTORY_PLAY_END: \"historyPlayEnd\", //历史视频列表播放结束\n  SEEK: \"seek\", //跳跃播放时间\n  TRANSFORM: \"transform\", //视频容器缩放\n  CHANGE_PLAY_INDEX: \"changePlayIndex\", //历史视频列表播放索引改变\n  HIDE_CONTRALLER:\"hideContraller\",\n  SHOW_CONTRALLER:\"showContraller\",\n  CLEAR_ERROR_TIMER:\"clearErrorTimer\"\n};\n","import React, { useState, useEffect, useCallback, useMemo } from 'react'\nimport IconFont from '../iconfont'\nimport Slider from '../slider'\nimport Bar from './bar'\nimport EventName from '../event/eventName'\nimport PropTypes from 'prop-types'\n\nfunction LeftBar({ api, event, video, isHistory, reloadHistory, isLive, leftExtContents, leftMidExtContents }) {\n  const [openSliderVolume, setOpenSliderVolume] = useState(false)\n  const [dep, setDep] = useState(Date.now())\n  useEffect(() => {\n    const updateRender = () => {\n      setDep(Date.now())\n    }\n    event.addEventListener('play', updateRender)\n    event.addEventListener('pause', updateRender)\n    event.addEventListener('volumechange', updateRender)\n\n    return () => {\n      event.removeEventListener('play', updateRender)\n      event.removeEventListener('pause', updateRender)\n      event.removeEventListener('volumechange', updateRender)\n    }\n  }, [event])\n\n  //缓存值\n  const paused = useMemo(() => video.paused, [dep, video])\n  const statusIconClassName = useMemo(() => (paused ? 'lm-player-Play_Main' : 'lm-player-Pause_Main'), [paused])\n  const statusText = useMemo(() => (paused ? '播放' : '暂停'), [paused])\n  const volumeVal = useMemo(() => (video.muted ? 0 : video.volume), [dep, video])\n  const volumeIcon = useMemo(() => (volumeVal === 0 ? 'lm-player-volume-close' : video.volume === 1 ? 'lm-player-volume-max' : 'lm-player-volume-normal-fuben'), [volumeVal])\n  const volumePercent = useMemo(() => (volumeVal === 0 ? 0 : volumeVal * 100), [volumeVal])\n  const sliderClassName = useMemo(() => (openSliderVolume ? 'contraller-bar-hover-volume' : ''), [openSliderVolume])\n\n  //TODO 方法\n  const changePlayStatus = useCallback(() => (video.paused ? api.play() : api.pause()), [video, api])\n\n  const mutedChantgeStatus = useCallback(() => (video.muted ? api.unmute() : api.mute()), [api, video])\n\n  const onChangeVolume = useCallback(\n    volume => {\n      api.setVolume(parseFloat(volume.toFixed(1)))\n      volume > 0 && video.muted && api.unmute()\n    },\n    [api, video]\n  )\n\n  const reload = useCallback(() => {\n    isHistory ? reloadHistory() : api.reload()\n    event.emit(EventName.CLEAR_ERROR_TIMER)\n  }, [event, isHistory, api])\n\n  return (\n    <div className=\"contraller-left-bar\">\n      {leftExtContents}\n      <Bar visibel={!isLive}>\n        <IconFont onClick={changePlayStatus} type={statusIconClassName} title={statusText} />\n      </Bar>\n      <Bar className={`contraller-bar-volume ${sliderClassName}`} onMouseOver={() => setOpenSliderVolume(true)} onMouseOut={() => setOpenSliderVolume(false)}>\n        <IconFont onClick={mutedChantgeStatus} type={volumeIcon} title=\"音量\" />\n        <div className=\"volume-slider-layout\">\n          <Slider className=\"volume-slider\" currentPercent={volumePercent} onChange={onChangeVolume} renderTips={precent => <span>{Math.round(precent * 100)}%</span>} tipsY={-2} />\n        </div>\n      </Bar>\n      <Bar>\n        <IconFont onClick={reload} type=\"lm-player-Refresh_Main\" title=\"重载\" />\n      </Bar>\n      {leftMidExtContents}\n    </div>\n  )\n}\n\nLeftBar.propTypes = {\n  api: PropTypes.object,\n  event: PropTypes.object,\n  playerProps: PropTypes.object,\n  video: PropTypes.node,\n  reloadHistory: PropTypes.func,\n  isHistory: PropTypes.bool\n}\n\nexport default LeftBar\n","import React, { useState, useMemo, useEffect, useCallback } from 'react'\nimport IconFont from '../iconfont'\nimport Bar from './bar'\nimport { isFullscreen, fullScreenListener, computedBound, getVideoRatio, getGlobalCache, GL_CACHE } from '../util'\nimport PropTypes from 'prop-types'\n\nfunction RightBar({ playContainer, api, scale, snapshot, rightExtContents, rightMidExtContents, isLive, switchResolution}) {\n  const [dep, setDep] = useState(Date.now())\n\n    // 获取视频分辨率\n  const ratioValue = getVideoRatio()\n      // 默认高清3，544\n  const [viewText, setViewText] = useState(ratioValue[2].name);\n\n  const isSwithRate = getGlobalCache(GL_CACHE.SR) || false\n\n\n  useEffect(() => {\n    const update = () => setDep(Date.now())\n    fullScreenListener(true, update)\n    return () => fullScreenListener(false, update)\n  }, [])\n\n  const isfull = useMemo(() => isFullscreen(playContainer), [dep, playContainer])\n\n  const fullscreen = useCallback(() => {\n    !isFullscreen(playContainer) ? api.requestFullScreen() : api.cancelFullScreen()\n    setDep(Date.now())\n  }, [api, playContainer])\n\n  const setScale = useCallback(\n    (...args) => {\n      const dragDom = playContainer.querySelector('.player-mask-layout')\n      api.setScale(...args)\n      let position = computedBound(dragDom, api.getPosition(), api.getScale())\n      if (position) {\n        api.setPosition(position, true)\n      }\n    },\n    [api, playContainer]\n  )\n\n  const setRatio = useCallback(\n    (...args) => {\n      setViewText(ratioValue[args].name)\n      // api.exeRatioCommand(ratioValue[args].resolution)\n      switchResolution(ratioValue[args].resolution)\n    },\n    [api]\n  )\n\n  return (\n    <div className=\"contraller-right-bar\">\n      {rightMidExtContents}\n      {scale && (\n        <>\n          <Bar>\n            <IconFont title=\"缩小\" onClick={() => setScale(-0.2)} type={'lm-player-ZoomOut_Main'} />\n          </Bar>\n          <Bar>\n            <IconFont title=\"复位\" onClick={() => setScale(1, true)} type={'lm-player-ZoomDefault_Main'} />\n          </Bar>\n          <Bar>\n            <IconFont title=\"放大\" onClick={() => setScale(0.2)} type={'lm-player-ZoomIn_Main'} />\n          </Bar>\n        </>\n      )}\n\n      {isLive && isSwithRate && (\n        <Bar className={'ratioMenu'}>\n            <span class='ratioMenu-main'>{viewText}</span>\n            <ul class=\"ratioMenu-level\">\n              {\n                Object.keys(ratioValue).map((item)=>(\n                  <li class=\"ratioMenu-level-1\" onClick={() => setRatio(item)}>{ratioValue[item].name}</li>\n                ))\n              }\n            </ul>\n        </Bar>\n      )}\n\n      {snapshot && (\n        <Bar>\n          <IconFont title=\"截图\" onClick={() => snapshot(api.snapshot())} type=\"lm-player-SearchBox\" />\n        </Bar>\n      )}\n      <Bar>\n        <IconFont title={isfull ? '窗口' : '全屏'} onClick={fullscreen} type={isfull ? 'lm-player-ExitFull_Main' : 'lm-player-Full_Main'} />\n      </Bar>\n      {rightExtContents}\n    </div>\n  )\n}\n\nRightBar.propTypes = {\n  api: PropTypes.object,\n  event: PropTypes.object,\n  playerProps: PropTypes.object,\n  playContainer: PropTypes.node,\n  reloadHistory: PropTypes.func,\n  isHistory: PropTypes.bool,\n}\nexport default RightBar\n","import React, { useCallback } from 'react'\nimport IconFont from '../iconfont'\nimport Bar from './bar'\nimport { computedBound } from '../util'\n\nfunction ScaleBar({ playContainer, api, scale }) {\n  const setScale = useCallback(\n    (...args) => {\n      const dragDom = playContainer.querySelector('.player-mask-layout')\n      api.setScale(...args)\n      let position = computedBound(dragDom, api.getPosition(), api.getScale())\n      if (position) {\n        api.setPosition(position, true)\n      }\n    },\n    [api, playContainer]\n  )\n\n  return (\n    <div className=\"contraller-scale-bar\">\n      {scale && (\n        <>\n          <Bar>\n            <IconFont title=\"缩小\" onClick={() => setScale(-0.2)} type={'lm-player-ZoomOut_Main'} />\n          </Bar>\n          <Bar>\n            <IconFont title=\"复位\" onClick={() => setScale(1, true)} type={'lm-player-ZoomDefault_Main'} />\n          </Bar>\n          <Bar>\n            <IconFont title=\"放大\" onClick={() => setScale(0.2)} type={'lm-player-ZoomIn_Main'} />\n          </Bar>\n        </>\n      )}\n    </div>\n  )\n}\n\nexport default ScaleBar\n","import React from 'react'\nimport LeftBar from './left_bar'\nimport RightBar from './right_bar'\nimport PropTypes from 'prop-types'\nimport ScaleBar from './scale_bar'\nimport '../style/bar.less'\n\nfunction ContrallerBar({\n  playContainer,\n  snapshot,\n  switchResolution,\n  rightExtContents,\n  rightMidExtContents,\n  scale,\n  visibel,\n  api,\n  event,\n  video,\n  isHistory,\n  reloadHistory,\n  isLive,\n  leftExtContents,\n  leftMidExtContents,\n}) {\n  return (\n    <>\n      <div className={`contraller-bar-layout ${!visibel ? 'hide-contraller-bar' : ''}`}>\n        <LeftBar\n          api={api}\n          event={event}\n          video={video}\n          isHistory={isHistory}\n          reloadHistory={reloadHistory}\n          isLive={isLive}\n          leftMidExtContents={leftMidExtContents}\n          leftExtContents={leftExtContents}\n        />\n        <RightBar\n          api={api}\n          event={event}\n          isLive={isLive}\n          playContainer={playContainer}\n          snapshot={snapshot}\n          switchResolution={switchResolution}\n          rightExtContents={rightExtContents}\n          rightMidExtContents={rightMidExtContents}\n        />\n      </div>\n      <div className={`contraller-scale-layout ${!visibel ? 'hide-contraller-bar' : ''}`}>\n        <ScaleBar api={api} playContainer={playContainer} scale={scale} />\n      </div>\n    </>\n  )\n}\n\nContrallerBar.propTypes = {\n  visibel: PropTypes.bool,\n}\n\nexport default ContrallerBar\n","import React, { useEffect, useState, useRef } from 'react'\nimport EventName from './eventName'\n\nfunction ContrallerEvent({ event, playContainer, children }) {\n  const timer = useRef(null)\n  const [visibel, setVisibel] = useState(true)\n  useEffect(() => {\n    const showContraller = () => {\n      setVisibel(true)\n      hideContraller()\n      event.emit(EventName.SHOW_CONTRALLER)\n    }\n    const hideContraller = () => {\n      clearTimeout(timer.current)\n      timer.current = setTimeout(() => {\n        setVisibel(false)\n        event.emit(EventName.HIDE_CONTRALLER)\n      }, 3 * 1000)\n    }\n    playContainer.addEventListener('mousemove', showContraller, false)\n    playContainer.addEventListener('mouseout', hideContraller, false)\n\n    return () => {\n      playContainer.removeEventListener('mousemove', showContraller, false)\n      playContainer.removeEventListener('mouseout', hideContraller, false)\n    }\n  }, [])\n\n  return React.Children.map(children, child => (React.isValidElement(child) ? React.cloneElement(child, { visibel }) : child))\n}\n\nexport default ContrallerEvent\n","import React, { useEffect, useState, useMemo } from 'react'\nimport IconFont from './iconfont'\nimport EventName from './event/eventName'\nimport './style/message.less'\n\nfunction VideoMessage({ event, api }) {\n  const [state, setState] = useState({ status: null, errorTimer: null, loading: false })\n\n  const message = useMemo(() => {\n    if (!state.status) {\n      return ''\n    }\n    if (state.status === 'fail') {\n      return '视频错误'\n    }\n    if (state.status === 'reload') {\n      return `视频加载错误，正在进行重连第${state.errorTimer}次重连`\n    }\n  }, [state.errorTimer, state.status])\n\n  useEffect(() => {\n    const openLoading = () => setState(old => ({ ...old, loading: true }))\n    const closeLoading = () => setState(old => ({ ...old, loading: false }))\n    const errorReload = timer => setState(() => ({ status: 'reload', errorTimer: timer, loading: true }))\n    const reloadFail = () => setState(old => ({ ...old, status: 'fail' }))\n    const reloadSuccess = () => setState(old => ({ ...old, status: null }))\n    const reload = () => setState(old => ({ ...old, status: 'reload' }))\n    const playEnd = () => (setState(old => ({ ...old, status: null, loading: false })), api.pause())\n\n    event.addEventListener('loadstart', openLoading)\n    event.addEventListener('waiting', openLoading)\n    event.addEventListener('seeking', openLoading)\n    event.addEventListener('loadeddata', closeLoading)\n    event.addEventListener('canplay', closeLoading)\n    event.on(EventName.ERROR_RELOAD, errorReload)\n    event.on(EventName.RELOAD_FAIL, reloadFail)\n    event.on(EventName.RELOAD_SUCCESS, reloadSuccess)\n    event.on(EventName.RELOAD, reload)\n    event.on(EventName.HISTORY_PLAY_END, playEnd)\n    event.on(EventName.CLEAR_ERROR_TIMER, reloadSuccess)\n\n    return () => {\n      event.removeEventListener('loadstart', openLoading)\n      event.removeEventListener('waiting', openLoading)\n      event.removeEventListener('seeking', openLoading)\n      event.removeEventListener('loadeddata', closeLoading)\n      event.removeEventListener('canplay', closeLoading)\n      event.off(EventName.ERROR_RELOAD, errorReload)\n      event.off(EventName.RELOAD_FAIL, reloadFail)\n      event.off(EventName.RELOAD_SUCCESS, reloadSuccess)\n      event.off(EventName.RELOAD, reload)\n      event.off(EventName.HISTORY_PLAY_END, playEnd)\n      event.off(EventName.CLEAR_ERROR_TIMER, reloadSuccess)\n    }\n  }, [event])\n\n  const { loading, status } = state\n  return (\n    <div className={`lm-player-message-mask ${loading || status === 'fail' ? 'lm-player-mask-loading-animation' : ''}`}>\n      <IconFont\n        type={status === 'fail' ? 'lm-player-YesorNo_No_Dark' : 'lm-player-Loading'}\n        className={`${loading && status !== 'fail' ? 'lm-player-loading-animation' : status === 'fail' ? 'lm-player-loadfail' : ''} lm-player-loading-icon`}\n      />\n      <span className=\"lm-player-message\">{message}</span>\n    </div>\n  )\n}\n\nexport const NoSource = () => {\n  return (\n    <div className=\"lm-player-message-mask lm-player-mask-loading-animation\">\n      <IconFont style={{ fontSize: 80 }} type=\"lm-player-PlaySource\" title=\"请选择视频源\"></IconFont>\n    </div>\n  )\n}\n\nexport default VideoMessage\n","import React, { useEffect, useState, useMemo, useCallback } from 'react'\nimport IconFont from './iconfont'\nimport Slider from './slider'\nimport { timeStamp } from './util'\nimport './style/time-line.less'\n\nfunction TineLine({ event, api, visibel }) {\n  const [state, setState] = useState({ duration: 0, currentTime: 0, buffered: 0 })\n\n  useEffect(() => {\n    const getDuration = () => setState((old) => ({ ...old, duration: api.getDuration() }))\n    const getCurrentTime = () => setState((old) => ({ ...old, currentTime: api.getCurrentTime(), buffered: api.getSecondsLoaded() }))\n    const getBuffered = () => setState((old) => ({ ...old, buffered: api.getSecondsLoaded() }))\n    const seekendPlay = () => api.play()\n\n    event.addEventListener('loadedmetadata', getDuration)\n    event.addEventListener('durationchange', getDuration)\n    event.addEventListener('timeupdate', getCurrentTime)\n    event.addEventListener('progress', getBuffered)\n    event.addEventListener('suspend', getBuffered)\n    event.addEventListener('seeked', seekendPlay)\n\n    return () => {\n      event.removeEventListener('loadedmetadata', getDuration)\n      event.removeEventListener('durationchange', getDuration)\n      event.removeEventListener('timeupdate', getCurrentTime)\n      event.removeEventListener('progress', getBuffered)\n      event.removeEventListener('suspend', getBuffered)\n      event.removeEventListener('seeked', seekendPlay)\n    }\n  }, [event, api])\n\n  const { duration, currentTime, buffered } = state\n  const playPercent = useMemo(() => Math.round((currentTime / duration) * 100), [currentTime, duration])\n  const bufferedPercent = useMemo(() => Math.round((buffered / duration) * 100), [buffered, duration])\n\n  const changePlayTime = useCallback(\n    (percent) => {\n      const currentTime = percent * duration\n      api.pause()\n      api.seekTo(currentTime)\n      setState((old) => ({ ...old, currentTime }))\n    },\n    [duration, api]\n  )\n\n  const renderTimeLineTips = (percent) => {\n    const currentTime = percent * duration\n    const time = timeStamp(currentTime)\n    return <span>{time}</span>\n  }\n\n  return (\n    <div className={`video-time-line-layout ${!visibel ? 'hide-time-line' : ''}`}>\n      <IconFont type=\"lm-player-PrevFast\" onClick={() => api.backWind()} className=\"time-line-action-item\" />\n      <Slider className=\"time-line-box\" currentPercent={playPercent} availablePercent={bufferedPercent} onChange={changePlayTime} renderTips={renderTimeLineTips} />\n      <IconFont type=\"lm-player-NextFast_Light\" onClick={() => api.fastForward()} className=\"time-line-action-item\" />\n    </div>\n  )\n}\n\nexport default TineLine\n","import React, { useState, useEffect, useRef } from 'react'\nimport EventName from './eventName'\n\nfunction ErrorEvent({ event, api, errorReloadTimer, flv, hls, changePlayIndex, isHistory, playIndex }) {\n  const [errorTimer, setErrorTime] = useState(0)\n  const errorInfo = useRef(null)\n  const reloadTimer = useRef(null)\n\n  useEffect(() => {\n    const errorHandle = (...args) => {\n      if (args[2] && args[2].msg && args[2].msg.includes('Unsupported audio')) {\n        return\n      }\n      console.error(...args)\n      errorInfo.current = args\n      setErrorTime(errorTimer + 1)\n    }\n\n    const reloadSuccess = () => {\n      if (errorTimer > 0) {\n        console.warn('视频重连成功！')\n        event.emit(EventName.RELOAD_SUCCESS)\n        api.success()\n        clearErrorTimer()\n      }\n    }\n    const clearErrorTimer = () => setErrorTime(0)\n    try {\n      if (flv) {\n        flv.on('error', errorHandle)\n      }\n      if (hls) {\n        hls.on('hlsError', errorHandle)\n      }\n    } catch (e) {\n      //\n    }\n\n    if (isHistory) {\n      //历史视频切换播放索引时清除错误次数\n      event.on(EventName.CHANGE_PLAY_INDEX, clearErrorTimer)\n      //历史视频主动清除错误次数\n      event.on(EventName.CLEAR_ERROR_TIMER, clearErrorTimer)\n    }\n    event.addEventListener('error', errorHandle, false)\n    //获取video状态清除错误状态\n    event.addEventListener('canplay', reloadSuccess, false)\n\n    return () => {\n      try {\n        if (flv) {\n          flv.off('error', errorHandle)\n        }\n        if (hls) {\n          hls.off('hlsError', errorHandle)\n        }\n      } catch (e) {\n        console.warn(e)\n      }\n      if (isHistory) {\n        event.off(EventName.CHANGE_PLAY_INDEX, clearErrorTimer)\n        event.off(EventName.CLEAR_ERROR_TIMER, clearErrorTimer)\n      }\n      event.removeEventListener('error', errorHandle, false)\n      event.removeEventListener('canplay', reloadSuccess, false)\n    }\n  }, [event, flv, hls, errorTimer])\n\n  useEffect(() => {\n    if (errorTimer === 0) {\n      return\n    }\n    if (errorTimer > errorReloadTimer) {\n      isHistory ? changePlayIndex(playIndex + 1) : event.emit(EventName.RELOAD_FAIL)\n      api.unload()\n      return\n    }\n\n    console.warn(`视频播放出错，正在进行重连${errorTimer}`)\n    reloadTimer.current = setTimeout(() => {\n      event.emit(EventName.ERROR_RELOAD, errorTimer, ...errorInfo.current)\n      api.reload(true)\n    }, 2 * 1000)\n\n    return () => {\n      clearTimeout(reloadTimer.current)\n    }\n  }, [errorTimer, api, event, flv, hls])\n\n  return <></>\n}\n\nexport default ErrorEvent\n","import React from 'react'\nimport { computedBound } from '../util'\nimport PropTypes from 'prop-types'\n\nclass DragEvent extends React.Component {\n  constructor(props) {\n    super(props)\n    const { playContainer } = props\n\n    this.dragDom = playContainer.querySelector('.player-mask-layout')\n    this.position = {\n      start: [0, 0],\n      end: [0, 0]\n    }\n  }\n  componentDidMount() {\n    this.dragDom.addEventListener('mousedown', this.openDrag)\n    this.props.event.addEventListener('transform', this.transformChange, true)\n  }\n  componentWillUnmount() {\n    this.dragDom.removeEventListener('mousedown', this.openDrag)\n  }\n  openDrag = e => {\n    this.position.start = [e.pageX, e.pageY]\n    this.dragDom.addEventListener('mousemove', this.moveChange)\n    document.body.addEventListener('mouseup', this.stopDrag)\n  }\n  moveChange = e => {\n    const { api } = this.props\n    const currentPosition = api.getPosition()\n    this.position.end = [e.pageX, e.pageY]\n    const x = currentPosition[0] + (this.position.end[0] - this.position.start[0])\n    const y = currentPosition[1] + (this.position.end[1] - this.position.start[1])\n    const position = [x, y]\n    api.setPosition(position)\n    this.position.start = [e.pageX, e.pageY]\n  }\n  stopDrag = () => {\n    this.dragDom.removeEventListener('mousemove', this.moveChange)\n    document.body.removeEventListener('mouseup', this.stopDrag)\n    this.transformChange()\n  }\n  transformChange = () => {\n    const { api } = this.props\n    let position = computedBound(this.dragDom, api.getPosition(), api.getScale())\n    position && api.setPosition(position, true)\n  }\n\n  render() {\n    return null\n  }\n}\n\nDragEvent.propTypes = {\n  api: PropTypes.object,\n  event: PropTypes.object,\n  playContainer: PropTypes.node,\n  playerProps: PropTypes.object\n}\nexport default DragEvent\n","\r\nimport lcStore from \"./url/lcStore\";\r\nimport { JSONP } from '../util';\r\n\r\nclass lcStoreService {\r\n  /**\r\n   * @desc 获取视频流接口\r\n   */\r\n  // uri=<pull_uri>&resolution=<resolution>&bitrate=<bitrate>&key=<key>\r\n   getTranscodingStream(data) {\r\n\r\n  } \r\n\r\n  /**\r\n   * 修改视频流接口\r\n   * @param {*} data \r\n   */\r\n\r\n   setStreamResolution(code){\r\n    // /video/v1/change?&resolution=<resolution>&bitrate=<bitrate>&key=<key>\r\n    let url = lcStore.setStreamResolution.value.replace('<resolution>',code) + '&key=a123'\r\n    JSONP(url);\r\n  }\r\n}\r\nexport default new lcStoreService();\r\n","import { fullscreen, isFullscreen, exitFullscreen } from './util'\nimport EventName from './event/eventName'\nimport lcStore from \"./service/lcStore\";\n\nlet index = 0\nexport default class Api {\n  constructor({ video, playContainer, event, flv, hls }) {\n    this.player = video\n    this.playContainer = playContainer\n    this.flv = flv\n    this.hls = hls\n    this.event = event\n    this.scale = 1\n    this.position = [0, 0]\n  }\n  /**\n   * 播放器销毁后 动态跟新api下的flv，hls对象\n   * @param {*} param0\n   */\n  updateChunk({ flv, hls }) {\n    this.flv = flv\n    this.hls = hls\n  }\n  /**\n   * 全屏\n   */\n  requestFullScreen() {\n    if (!isFullscreen(this.playContainer)) {\n      fullscreen(this.playContainer)\n    }\n  }\n  /**\n   * 退出全屏\n   */\n  cancelFullScreen() {\n    if (isFullscreen(this.playContainer)) {\n      exitFullscreen()\n    }\n  }\n  play() {\n    if (this.player.paused) {\n      this.player.play()\n    }\n  }\n  pause() {\n    if (!this.player.paused) {\n      this.player.pause()\n    }\n  }\n  destroy() {\n    this.player.removeAttribute('src')\n    this.flv.pause()\n    this.unload()\n    this.flv.detachMediaElement()\n    if (this.flv) {\n      index++\n      this.flv.destroy()\n    }\n    if (this.hls) {\n      index++\n      this.hls.destroy()\n    }\n\n    this.player = null\n    this.playContainer = null\n    this.flv = null\n    this.hls = null\n    this.event = null\n    this.scale = null\n    this.position = null\n    console.warn('destroy', index)\n  }\n\n  /**\n   * 设置currentTime实现seek\n   * @param {*} seconds\n   * @param {*} noEmit\n   */\n  seekTo(seconds, noEmit) {\n    const buffered = this.getBufferedTime()\n    if (this.flv && buffered[0] > seconds) {\n      this.flv.unload()\n      this.flv.load()\n    }\n    console.log(this.player)\n    if (this.player) {\n      console.log(this.player.currentTime)\n      this.player.currentTime = seconds\n      if (!noEmit) {\n        this.event.emit(EventName.SEEK, seconds)\n      }\n    }\n  }\n  success(notEmit){\n    !notEmit && this.event.emit(EventName.RELOAD)\n  }\n  /**\n   * 视频重载\n   */\n  reload(notEmit) {\n    if (this.getCurrentTime !== 0) {\n      this.seekTo(0)\n    }\n    if (this.hls) {\n      this.hls.swapAudioCodec()\n      this.hls.recoverMediaError()\n    }\n    this.unload()\n    this.load()\n    this.play()\n    !notEmit && this.event.emit(EventName.RELOAD)\n  }\n  unload() {\n    this.flv && this.flv.unload()\n    this.hls && this.hls.stopLoad()\n  }\n  load() {\n    if (this.flv) {\n      this.flv.load()\n    }\n    if (this.hls) {\n      this.hls.startLoad()\n      this.hls.loadSource(this.hls.url)\n    }\n  }\n  setVolume(fraction) {\n    this.player.volume = fraction\n  }\n  mute() {\n    this.player.muted = true\n  }\n  unmute() {\n    this.player.muted = false\n  }\n\n  /**\n   * 开启画中画功能\n   */\n  requestPictureInPicture() {\n    if (this.player.requestPictureInPicture && document.pictureInPictureElement !== this.player) {\n      this.player.requestPictureInPicture()\n    }\n  }\n  /**\n   * 关闭画中画功能\n   */\n  exitPictureInPicture() {\n    if (document.exitPictureInPicture && document.pictureInPictureElement === this.player) {\n      document.exitPictureInPicture()\n    }\n  }\n\n  /**\n   * 设置播放速率\n   * @param {*} rate\n   */\n  setPlaybackRate(rate) {\n    this.player.playbackRate = rate\n  }\n  /**\n   * 获取视频总时长\n   */\n  getDuration() {\n    if (!this.player) return null\n    const { duration, seekable } = this.player\n    if (duration === Infinity && seekable.length > 0) {\n      return seekable.end(seekable.length - 1)\n    }\n    return duration\n  }\n  /**\n   * 获取当前播放时间\n   */\n  getCurrentTime() {\n    if (!this.player) return null\n    return this.player.currentTime\n  }\n\n  /**\n   * 获取缓存时间\n   */\n  getSecondsLoaded() {\n    return this.getBufferedTime()[1]\n  }\n\n  /**\n   * 获取当前视频缓存的起止时间\n   */\n  getBufferedTime() {\n    if (!this.player) return []\n    const { buffered } = this.player\n    if (buffered.length === 0) {\n      return [0, 0]\n    }\n    const end = buffered.end(buffered.length - 1)\n    const start = buffered.start(buffered.length - 1)\n    const duration = this.getDuration()\n    if (end > duration) {\n      return duration\n    }\n    return [start, end]\n  }\n  /**\n   * 快进通过seekTo方法实现\n   * @param {*} second\n   */\n  fastForward(second = 5) {\n    const duration = this.getDuration()\n    const currentTime = this.getCurrentTime()\n    const time = currentTime + second\n    this.seekTo(time > duration - 1 ? duration - 1 : time)\n  }\n\n  /**\n   * 快退通过seekTo方法实现\n   * @param {*} second\n   */\n  backWind(second = 5) {\n    const currentTime = this.getCurrentTime()\n    const time = currentTime - second\n    this.seekTo(time < 1 ? 1 : time)\n  }\n\n  /**\n   * 视频截屏方法\n   */\n  snapshot() {\n    let canvas = document.createElement('canvas')\n    let ctx = canvas.getContext('2d')\n    canvas.width = this.player.videoWidth\n    canvas.height = this.player.videoHeight\n    ctx.drawImage(this.player, 0, 0, canvas.width, canvas.height)\n    setTimeout(() => {\n      canvas.remove()\n      canvas = null\n      ctx = null\n    }, 200)\n    return canvas.toDataURL()\n  }\n  setScale(num, isRest = false) {\n    let scale = this.scale + num\n    if (isRest) {\n      scale = num\n    } else {\n      if (scale < 1) {\n        scale = 1\n      }\n      if (scale > 3) {\n        scale = 3\n      }\n    }\n    this.scale = scale\n    this.player.style.transition = 'transform 0.3s'\n    this.__setTransform()\n    this.event.emit(EventName.TRANSFORM)\n    setTimeout(() => {\n      this.player.style.transition = 'unset'\n    }, 1000)\n  }\n  getScale() {\n    return this.scale\n  }\n  setPosition(position, isAnimate) {\n    this.position = position\n    this.player.style.transition = isAnimate ? 'transform 0.3s' : 'unset'\n    this.__setTransform()\n  }\n  getPosition() {\n    return this.position\n  }\n  __setTransform() {\n    this.player.style.transform = `scale(${this.scale}) translate(${this.position[0]}px,${this.position[1]}px)`\n  }\n  exeRatioCommand(ratio){\n    lcStore.setStreamResolution(ratio)\n  }\n  getApi() {\n    return {\n      play: this.play.bind(this),\n      reload: this.reload.bind(this),\n      success: this.success.bind(this),\n      pause: this.pause.bind(this),\n      seekTo: this.seekTo.bind(this),\n      setVolume: this.setVolume.bind(this),\n      mute: this.mute.bind(this),\n      unmute: this.unmute.bind(this),\n      requestPictureInPicture: this.requestPictureInPicture.bind(this),\n      exitPictureInPicture: this.exitPictureInPicture.bind(this),\n      setPlaybackRate: this.setPlaybackRate.bind(this),\n      destroy: this.destroy.bind(this),\n      getDuration: this.getDuration.bind(this),\n      getCurrentTime: this.getCurrentTime.bind(this),\n      getSecondsLoaded: this.getSecondsLoaded.bind(this),\n      getBufferedTime: this.getBufferedTime.bind(this),\n      fastForward: this.fastForward.bind(this),\n      backWind: this.backWind.bind(this),\n      snapshot: this.snapshot.bind(this),\n      requestFullScreen: this.requestFullScreen.bind(this),\n      cancelFullScreen: this.cancelFullScreen.bind(this),\n      __player: this.player,\n      flv: this.flv,\n      hls: this.hls,\n    }\n  }\n}\n","function getHiddenProp() {\n  const prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\n  // 如果hidden 属性是原生支持的，我们就直接返回\n  if (\"hidden\" in document) {\n    return \"hidden\";\n  }\n\n  // 其他的情况就循环现有的浏览器前缀，拼接我们所需要的属性\n  for (let i = 0; i < prefixes.length; i++) {\n    // 如果当前的拼接的前缀在 document对象中存在 返回即可\n    if (prefixes[i] + \"Hidden\" in document) {\n      return prefixes[i] + \"Hidden\";\n    }\n  }\n\n  // 其他的情况 直接返回null\n  return null;\n}\n\nfunction getVisibilityState() {\n  const prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\n\n  if (\"visibilityState\" in document) {\n    return \"visibilityState\";\n  }\n\n  for (let i = 0; i < prefixes.length; i++) {\n    if (prefixes[i] + \"VisibilityState\" in document) {\n      return prefixes[i] + \"VisibilityState\";\n    }\n  }\n  // 找不到返回 null\n  return null;\n}\n\nfunction visibilityState() {\n  return document[getVisibilityState()];\n}\n\nfunction addEventListener(listener) {\n  const visProp = getHiddenProp();\n  const evtname = visProp.replace(/[H|h]idden/, \"\") + \"visibilitychange\";\n  document.addEventListener(evtname, listener, false);\n}\n\nfunction removeEventListener(listener) {\n  const visProp = getHiddenProp();\n  const evtname = visProp.replace(/[H|h]idden/, \"\") + \"visibilitychange\";\n  document.removeEventListener(evtname, listener, false);\n}\n\nexport default {\n  addEventListener,\n  removeEventListener,\n  visibilityState\n};\n","import React, { useEffect } from 'react'\nimport BrowserTab from './event/browserTabEvent'\n\nfunction LiveHeart({ api }) {\n  useEffect(() => {\n    const browserTabChange = function() {\n      if (BrowserTab.visibilityState() === 'visible') {\n        const current = api.getCurrentTime()\n        const buffered = api.getSecondsLoaded()\n        if (buffered - current > 5) {\n          console.warn(`当前延时过大current->${current} buffered->${buffered}, 基于视频当前缓存时间更新当前播放时间 updateTime -> ${buffered - 2}`)\n          api.seekTo(buffered - 2 > 0 ? buffered - 2 : 0)\n        }\n      }\n    }\n    BrowserTab.addEventListener(browserTabChange)\n    return () => {\n      BrowserTab.removeEventListener(browserTabChange)\n    }\n  }, [api])\n  return <></>\n}\n\nexport default LiveHeart\n","import React, { useRef, useEffect, useState,useMemo } from 'react';\nimport VideoEvent from './event';\nimport { getVideoType, createFlvPlayer, createHlsPlayer, tansCodingToUrl,getScreenRate } from './util';\nimport ContrallerBar from './contraller_bar';\nimport ContrallerEvent from './event/contrallerEvent';\nimport VideoMessage, { NoSource } from './message';\nimport TimeLine from './time_line';\nimport ErrorEvent from './event/errorEvent';\nimport DragEvent from './event/dragEvent';\nimport Api from './api';\nimport LiveHeart from './live_heart';\nimport PropTypes from 'prop-types';\nimport './style/index.less';\n\nfunction SinglePlayer({ type, file, className, autoPlay, muted, poster, playsinline, loop, preload, children, onInitPlayer, screenNum, onVideoFn, ...props }) {\n  const playContainerRef = useRef(null);\n  const [playerObj, setPlayerObj] = useState(null);\n  const playerRef = useRef(null);\n  const rate = useMemo(() => getScreenRate(screenNum), [screenNum]);\n  const [resolution, setResolution] = useState(rate);\n  \n\n  function onToken(token){\n    if(onVideoFn){\n      onVideoFn({\n        uuid: token\n      })\n    }\n  }\n\n  useEffect(\n    () => () => {\n      if (playerRef.current && playerRef.current.event) {\n        playerRef.current.event.destroy();\n      }\n      if (playerRef.current && playerRef.current.api) {\n        playerRef.current.api.destroy();\n      }\n      playerRef.current = null;\n    },\n    [file,resolution]\n  );\n  useEffect(() => {\n    if (!file) {\n      return;\n    }\n    const playerObject = {\n      playContainer: playContainerRef.current,\n      video: playContainerRef.current.querySelector('video'),\n    };\n    let isInit = false;\n    const formartType = getVideoType(file);\n    if (formartType === 'flv' || type === 'flv') {\n      isInit = true;\n      playerObject.flv = createFlvPlayer(playerObject.video, { ...props, file: tansCodingToUrl(file, resolution, onToken ) });\n    }\n    if (formartType === 'm3u8' || type === 'hls') {\n      isInit = true;\n      playerObject.hls = createHlsPlayer(playerObject.video, file);\n    }\n    if (!isInit && (!['flv', 'm3u8'].includes(formartType) || type === 'native')) {\n      playerObject.video.src = file;\n    }\n    if (playerObject.event) {\n      playerObject.event.destroy();\n    }\n    playerObject.event = new VideoEvent(playerObject.video);\n    if (playerObject.api) {\n      playerObject.api.destroy();\n    }\n    playerObject.api = new Api(playerObject);\n    playerRef.current = playerObject;\n    setPlayerObj(() => playerObject);\n\n    if (onInitPlayer) {\n      onInitPlayer(Object.assign({}, playerObject.api.getApi(), playerObject.event.getApi()));\n    }\n  }, [file,resolution]);\n  return (\n    <div className={`lm-player-container ${className}`} ref={playContainerRef}>\n      <div className=\"player-mask-layout\">\n        <video autoPlay={autoPlay} preload={preload} muted={muted} poster={poster} controls={false} playsInline={playsinline} loop={loop} />\n      </div>\n      <VideoTools\n        playerObj={playerObj}\n        isLive={props.isLive}\n        key={file}\n        hideContrallerBar={props.hideContrallerBar}\n        errorReloadTimer={props.errorReloadTimer}\n        scale={props.scale}\n        switchResolution={(resolution)=>{\n          setResolution(resolution)\n        }}\n        snapshot={props.snapshot}\n        leftExtContents={props.leftExtContents}\n        leftMidExtContents={props.leftMidExtContents}\n        rightExtContents={props.rightExtContents}\n        rightMidExtContents={props.rightMidExtContents}\n        draggable={props.draggable}\n      />\n      {children}\n    </div>\n  );\n}\n\nfunction VideoTools({\n  playerObj,\n  draggable,\n  isLive,\n  hideContrallerBar,\n  scale,\n  snapshot,\n  switchResolution,\n  leftExtContents,\n  leftMidExtContents,\n  rightExtContents,\n  rightMidExtContents,\n  errorReloadTimer,\n}) {\n  if (!playerObj) {\n    return <NoSource />;\n  }\n  return (\n    <>\n      <VideoMessage api={playerObj.api} event={playerObj.event} />\n      {draggable && <DragEvent playContainer={playerObj.playContainer} api={playerObj.api} event={playerObj.event} />}\n      {!hideContrallerBar && (\n        <ContrallerEvent event={playerObj.event} playContainer={playerObj.playContainer}>\n          <ContrallerBar\n            api={playerObj.api}\n            event={playerObj.event}\n            playContainer={playerObj.playContainer}\n            video={playerObj.video}\n            snapshot={snapshot}\n            switchResolution={switchResolution}\n            rightExtContents={rightExtContents}\n            rightMidExtContents={rightMidExtContents}\n            scale={scale}\n            isHistory={false}\n            isLive={isLive}\n            leftExtContents={leftExtContents}\n            leftMidExtContents={leftMidExtContents}\n          />\n          {!isLive && <TimeLine api={playerObj.api} event={playerObj.event} />}\n        </ContrallerEvent>\n      )}\n      <ErrorEvent flv={playerObj.flv} hls={playerObj.hls} api={playerObj.api} event={playerObj.event} errorReloadTimer={errorReloadTimer} />\n      {isLive && <LiveHeart api={playerObj.api} />}\n    </>\n  );\n}\n\nSinglePlayer.propTypes = {\n  file: PropTypes.string.isRequired, //播放地址 必填\n  isLive: PropTypes.bool, //是否实时视频\n  errorReloadTimer: PropTypes.number, //视频错误重连次数\n  type: PropTypes.oneOf(['flv', 'hls', 'native']), //强制视频流类型\n  onInitPlayer: PropTypes.func,\n  draggable: PropTypes.bool,\n  hideContrallerBar: PropTypes.bool,\n  scale: PropTypes.bool,\n  muted: PropTypes.string,\n  autoPlay: PropTypes.bool,\n  playsInline: PropTypes.bool,\n  preload: PropTypes.string,\n  poster: PropTypes.string,\n  loop: PropTypes.bool,\n  snapshot: PropTypes.func,\n  className: PropTypes.string,\n  rightExtContents: PropTypes.element,\n  rightMidExtContents: PropTypes.element,\n  leftExtContents: PropTypes.element,\n  leftMidExtContents: PropTypes.element,\n  flvOptions: PropTypes.object,\n  flvConfig: PropTypes.object,\n  children: PropTypes.element,\n};\nSinglePlayer.defaultProps = {\n  isLive: true,\n  draggable: true,\n  scale: true,\n  errorReloadTimer: 5,\n  muted: 'muted',\n  autoPlay: true,\n  playsInline: false,\n  preload: 'auto',\n  loop: false,\n  hideContrallerBar: false,\n};\n\nexport default SinglePlayer;\n","export const computedIndexFormTime = (historyList, time) => {\n  let index = 0\n  try {\n    index = historyList.fragments.findIndex((v) => v.end > time)\n  } catch (e) {\n    console.error('historyList data error', historyList)\n  }\n  return index\n}\nexport const computedTimeAndIndex = (historyList, currentTime) => {\n  const index = computedIndexFormTime(historyList, currentTime)\n  let seekTime = 0\n  try {\n    const fragment = historyList.fragments[index]\n    if (!fragment) {\n      return [0, 0]\n    }\n    seekTime = currentTime - fragment.begin - 1\n  } catch (e) {\n    console.error('historyList data error', historyList)\n  }\n  return [index, seekTime]\n}\n","import React, { useState, useEffect, useMemo, useCallback } from 'react'\nimport IconFont from '../iconfont'\nimport Slider from '../slider'\nimport { dateFormat } from '../util'\nimport EventName from '../event/eventName'\nimport PropTypes from 'prop-types'\nimport { computedTimeAndIndex } from './utils'\nimport '../style/time-line.less'\n\nconst computedLineList = (historyList) => {\n  const duration = historyList.duration\n  return historyList.fragments.map((v) => {\n    return {\n      disabled: !v.file,\n      size: ((v.end - v.begin) / duration) * 100,\n    }\n  })\n}\n\nfunction TineLine({ event, api, visibel, historyList, playIndex, seekTo, defaultTime }) {\n  const [state, setState] = useState({ duration: 1, currentTime: defaultTime, buffered: 0, isEnd: false })\n\n  useEffect(() => setState((old) => ({ ...old, currentTime: defaultTime })), [defaultTime])\n\n  useEffect(() => {\n    const getDuration = () => setState((old) => ({ ...old, duration: api.getDuration() }))\n    const getCurrentTime = () => setState((old) => ({ ...old, currentTime: api.getCurrentTime(), buffered: api.getSecondsLoaded() }))\n    const getBuffered = () => setState((old) => ({ ...old, buffered: api.getSecondsLoaded() }))\n    const historyPlayEnd = () => setState((old) => ({ ...old, isEnd: true }))\n    const reload = () => setState((old) => ({ ...old, isEnd: false, currentTime: api.getCurrentTime() }))\n    const seekendPlay = () => api.play()\n\n    event.addEventListener('loadedmetadata', getDuration)\n    event.addEventListener('durationchange', getDuration)\n    event.addEventListener('timeupdate', getCurrentTime)\n    event.addEventListener('progress', getBuffered)\n    event.addEventListener('suspend', getBuffered)\n    event.addEventListener('seeked', seekendPlay)\n    event.on(EventName.HISTORY_PLAY_END, historyPlayEnd)\n    event.on(EventName.RELOAD, reload)\n\n    return () => {\n      event.removeEventListener('loadedmetadata', getDuration)\n      event.removeEventListener('durationchange', getDuration)\n      event.removeEventListener('timeupdate', getCurrentTime)\n      event.removeEventListener('progress', getBuffered)\n      event.removeEventListener('suspend', getBuffered)\n      event.removeEventListener('seeked', seekendPlay)\n      event.off(EventName.HISTORY_PLAY_END, historyPlayEnd)\n      event.off(EventName.RELOAD, reload)\n    }\n  }, [event, api])\n\n  const changePlayTime = useCallback(\n    (percent) => {\n      const currentTime = percent * historyList.duration //修正一下误差\n      const [index, time] = computedTimeAndIndex(historyList, currentTime)\n      console.log(index, time)\n      seekTo(currentTime, index)\n      setState((old) => ({ ...old, currentTime: time, isEnd: false }))\n    },\n    [historyList]\n  )\n\n  const renderTimeLineTips = (percent) => {\n    const currentTime = percent * historyList.duration * 1000\n    const date = dateFormat(historyList.beginDate + currentTime)\n    return <span>{date}</span>\n  }\n\n  const { currentTime, buffered, isEnd } = state\n  const lineList = useMemo(() => computedLineList(historyList), [historyList])\n  const currentLine = useMemo(() => lineList.filter((_, i) => i < playIndex).map((v) => v.size), [playIndex, lineList])\n  const currentIndexTime = useMemo(() => (currentLine.length === 0 ? 0 : currentLine.length > 1 ? currentLine.reduce((p, c) => p + c) : currentLine[0]), [currentLine])\n  const playPercent = useMemo(() => (currentTime / historyList.duration) * 100 + currentIndexTime, [currentIndexTime, historyList, currentTime])\n  const bufferedPercent = useMemo(() => (buffered / historyList.duration) * 100 + currentIndexTime, [historyList, currentIndexTime, buffered])\n\n  return (\n    <div className={`video-time-line-layout ${!visibel ? 'hide-time-line' : ''}`}>\n      <IconFont type=\"lm-player-PrevFast\" onClick={() => api.backWind()} className=\"time-line-action-item\" />\n      <Slider className=\"time-line-box\" currentPercent={isEnd ? '100' : playPercent} availablePercent={bufferedPercent} onChange={changePlayTime} renderTips={renderTimeLineTips}>\n        <>\n          {lineList.map((v, i) => {\n            const currentSizeLine = lineList.filter((v, i2) => i2 < i).map((v) => v.size)\n            const currentIndexSize = currentSizeLine.length === 0 ? 0 : currentSizeLine.length > 1 ? currentSizeLine.reduce((p, c) => p + c) : currentSizeLine[0]\n            return (\n              <div className={`history-time-line-item ${v.disabled ? 'history-time-line-disabled' : ''}`} key={i} style={{ width: `${v.size}%`, left: `${currentIndexSize}%` }} />\n            )\n          })}\n        </>\n      </Slider>\n      <IconFont type=\"lm-player-NextFast_Light\" onClick={() => api.fastForward()} className=\"time-line-action-item\" />\n    </div>\n  )\n}\n\nTineLine.propTypes = {\n  event: PropTypes.object,\n  api: PropTypes.object,\n  changePlayIndex: PropTypes.func,\n  playIndex: PropTypes.number,\n  historyList: PropTypes.array,\n  seekTo: PropTypes.func,\n  visibel: PropTypes.bool,\n}\n\nexport default TineLine\n","/**\n * history下使用 用户切换下个播放地址\n */\n\nimport React, { useEffect } from 'react'\nimport PropTypes from 'prop-types'\n\nfunction PlayEnd({ event, changePlayIndex, playIndex }) {\n  useEffect(() => {\n    const endedHandle = () => changePlayIndex(playIndex + 1)\n    event.addEventListener('ended', endedHandle, false)\n    return () => {\n      event.removeEventListener('ended', endedHandle, false)\n    }\n  }, [event, playIndex, changePlayIndex])\n  return <></>\n}\n\nPlayEnd.propTypes = {\n  event: PropTypes.object,\n  changePlayIndex: PropTypes.func,\n  playIndex: PropTypes.number,\n}\nexport default PlayEnd\n","import React, { useRef, useState, useCallback, useEffect, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport ContrallerBar from '../contraller_bar';\nimport VideoMessage, { NoSource } from '../message';\nimport HistoryTimeLine from './time_line_history';\nimport ErrorEvent from '../event/errorEvent';\nimport DragEvent from '../event/dragEvent';\nimport Api from '../api';\nimport VideoEvent from '../event';\nimport PlayEnd from './play_end';\nimport EventName from '../event/eventName';\nimport ContrallerEvent from '../event/contrallerEvent';\nimport { getVideoType, createFlvPlayer, createHlsPlayer } from '../util';\nimport { computedTimeAndIndex } from './utils';\n\nfunction HistoryPlayer({ type, historyList, defaultTime, className, autoPlay, muted, poster, playsinline, loop, preload, children, onInitPlayer, ...props }) {\n  const playContainerRef = useRef(null);\n  const [playerObj, setPlayerObj] = useState(null);\n  const playerRef = useRef(null);\n  const [playStatus, setPlayStatus] = useState(() => computedTimeAndIndex(historyList, defaultTime));\n  const playIndex = useMemo(() => playStatus[0], [playStatus]);\n  const defaultSeekTime = useMemo(() => playStatus[1], [playStatus]);\n  const file = useMemo(() => {\n    let url;\n    try {\n      url = historyList.fragments[playIndex].file;\n    } catch (e) {\n      console.warn('未找打播放地址！', historyList);\n    }\n    return url;\n  }, [historyList, playIndex]);\n\n  /**\n   * 重写api下的seekTo方法\n   */\n  const seekTo = useCallback(\n    (currentTime) => {\n      const [index, seekTime] = computedTimeAndIndex(historyList, currentTime);\n      if (playerRef.current.event && playerRef.current.api) {\n        //判断是否需要更新索引\n        setPlayStatus((old) => {\n          if (old[0] !== index) {\n            return [index, seekTime];\n          } else {\n            playerRef.current.api.seekTo(seekTime, true);\n            return old;\n          }\n        });\n      }\n    },\n    [playIndex, historyList]\n  );\n\n  const changePlayIndex = useCallback(\n    (index) => {\n      if (index > historyList.fragments.length - 1) {\n        return playerRef.current && playerRef.current.event && playerRef.current.event.emit(EventName.HISTORY_PLAY_END);\n      }\n\n      if (!historyList.fragments[index].file) {\n        return changePlayIndex(index + 1);\n      }\n\n      if (playerRef.current && playerRef.current.event) {\n        playerRef.current.event.emit(EventName.CHANGE_PLAY_INDEX, index);\n      }\n      setPlayStatus([index, 0]);\n    },\n    [historyList]\n  );\n\n  const reloadHistory = useCallback(() => {\n    if (playStatus[0] === 0) {\n      playerRef.current.api.seekTo(defaultSeekTime);\n    }\n    setPlayStatus([0, 0]);\n\n    playerRef.current.event.emit(EventName.RELOAD);\n  }, []);\n\n  useEffect(() => {\n    if (!file) {\n      changePlayIndex(playIndex + 1);\n    }\n  }, [file, playIndex, historyList]);\n\n  useEffect(\n    () => () => {\n      if (playerRef.current && playerRef.current.event) {\n        playerRef.current.event.destroy();\n      }\n      if (playerRef.current && playerRef.current.api) {\n        playerRef.current.api.destroy();\n      }\n      playerRef.current = null;\n    },\n    [file]\n  );\n\n  useEffect(() => {\n    if (!file) {\n      return;\n    }\n    const playerObject = {\n      playContainer: playContainerRef.current,\n      video: playContainerRef.current.querySelector('video'),\n    };\n    let isInit = false;\n    const formartType = getVideoType(file);\n    if (formartType === 'flv' || type === 'flv') {\n      isInit = true;\n      playerObject.flv = createFlvPlayer(playerObject.video, { ...props, file });\n    }\n    if (formartType === 'm3u8' || type === 'hls') {\n      isInit = true;\n      playerObject.hls = createHlsPlayer(playerObject.video, file);\n    }\n    if (!isInit && (!['flv', 'm3u8'].includes(formartType) || type === 'native')) {\n      playerObject.video.src = file;\n    }\n    if (playerObject.event) {\n      playerObject.event.destroy();\n    }\n    playerObject.event = new VideoEvent(playerObject.video);\n    if (playerObject.api) {\n      playerObject.api.destroy();\n    }\n    playerObject.api = new Api(playerObject);\n    playerRef.current = playerObject;\n    setPlayerObj(playerObject);\n    if (defaultSeekTime) {\n      playerObject.api.seekTo(defaultSeekTime);\n    }\n    if (onInitPlayer) {\n      onInitPlayer(Object.assign({}, playerObject.api.getApi(), playerObject.event.getApi(), { seekTo, changePlayIndex, reload: reloadHistory }));\n    }\n  }, [historyList, file]);\n\n  return (\n    <div className={`lm-player-container ${className}`} ref={playContainerRef}>\n      <div className=\"player-mask-layout\">\n        <video autoPlay={autoPlay} preload={preload} muted={muted} poster={poster} controls={false} playsInline={playsinline} loop={loop} />\n      </div>\n      <VideoTools\n        defaultTime={defaultSeekTime}\n        playerObj={playerObj}\n        isLive={props.isLive}\n        hideContrallerBar={props.hideContrallerBar}\n        errorReloadTimer={props.errorReloadTimer}\n        scale={props.scale}\n        snapshot={props.snapshot}\n        leftExtContents={props.leftExtContents}\n        leftMidExtContents={props.leftMidExtContents}\n        rightExtContents={props.rightExtContents}\n        rightMidExtContents={props.rightMidExtContents}\n        draggable={props.draggable}\n        changePlayIndex={changePlayIndex}\n        reloadHistory={reloadHistory}\n        historyList={historyList}\n        playIndex={playIndex}\n        seekTo={seekTo}\n        key={file}\n      />\n      {children}\n    </div>\n  );\n}\n\nfunction VideoTools({\n  playerObj,\n  draggable,\n  isLive,\n  hideContrallerBar,\n  scale,\n  snapshot,\n  leftExtContents,\n  leftMidExtContents,\n  rightExtContents,\n  rightMidExtContents,\n  errorReloadTimer,\n  changePlayIndex,\n  reloadHistory,\n  historyList,\n  seekTo,\n  playIndex,\n  defaultTime,\n}) {\n  if (!playerObj) {\n    return <NoSource />;\n  }\n  return (\n    <>\n      <VideoMessage api={playerObj.api} event={playerObj.event} />\n      {draggable && <DragEvent playContainer={playerObj.playContainer} api={playerObj.api} event={playerObj.event} />}\n      {!hideContrallerBar && (\n        <ContrallerEvent event={playerObj.event} playContainer={playerObj.playContainer}>\n          <ContrallerBar\n            api={playerObj.api}\n            event={playerObj.event}\n            playContainer={playerObj.playContainer}\n            video={playerObj.video}\n            snapshot={snapshot}\n            rightExtContents={rightExtContents}\n            rightMidExtContents={rightMidExtContents}\n            scale={scale}\n            isHistory={true}\n            isLive={isLive}\n            leftExtContents={leftExtContents}\n            leftMidExtContents={leftMidExtContents}\n            reloadHistory={reloadHistory}\n          />\n          <HistoryTimeLine\n            defaultTime={defaultTime}\n            changePlayIndex={changePlayIndex}\n            historyList={historyList}\n            playIndex={playIndex}\n            seekTo={seekTo}\n            api={playerObj.api}\n            event={playerObj.event}\n          />\n        </ContrallerEvent>\n      )}\n      <ErrorEvent\n        changePlayIndex={changePlayIndex}\n        playIndex={playIndex}\n        isHistory={true}\n        flv={playerObj.flv}\n        hls={playerObj.hls}\n        api={playerObj.api}\n        event={playerObj.event}\n        errorReloadTimer={errorReloadTimer}\n      />\n      <PlayEnd event={playerObj.event} changePlayIndex={changePlayIndex} playIndex={playIndex} />\n    </>\n  );\n}\n\nHistoryPlayer.propTypes = {\n  historyList: PropTypes.object.isRequired, //播放地址 必填\n  errorReloadTimer: PropTypes.number, //视频错误重连次数\n  type: PropTypes.oneOf(['flv', 'hls', 'native']), //强制视频流类型\n  onInitPlayer: PropTypes.func,\n  isDraggable: PropTypes.bool,\n  isScale: PropTypes.bool,\n  muted: PropTypes.string,\n  autoPlay: PropTypes.bool,\n  playsInline: PropTypes.bool,\n  preload: PropTypes.string,\n  poster: PropTypes.string,\n  loop: PropTypes.bool,\n  defaultTime: PropTypes.number,\n  className: PropTypes.string,\n  playsinline: PropTypes.bool,\n  children: PropTypes.any,\n  autoplay: PropTypes.bool,\n  rightExtContents: PropTypes.element,\n  rightMidExtContents: PropTypes.element,\n  leftExtContents: PropTypes.element,\n  leftMidExtContents: PropTypes.element,\n  flvOptions: PropTypes.object,\n  flvConfig: PropTypes.object,\n};\nHistoryPlayer.defaultProps = {\n  draggable: true,\n  scale: true,\n  errorReloadTimer: 5,\n  muted: 'muted',\n  autoPlay: true,\n  playsInline: false,\n  preload: 'auto',\n  loop: false,\n  defaultTime: 0,\n  historyList: { beginDate: 0, duration: 0, fragments: [] },\n};\n\nexport default HistoryPlayer;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Player from \"./player\";\nimport HistoryPlayer from \"./history\";\n\nexport function createPlayer({ container, children, onInitPlayer, ...props }) {\n  ReactDOM.render(\n    <Player\n      {...props}\n      onInitPlayer={player => {\n        player.destroy = function() {\n          ReactDOM.unmountComponentAtNode(container);\n        };\n        onInitPlayer && onInitPlayer(player);\n      }}\n    >\n      {children}\n    </Player>,\n    container\n  );\n}\nexport function createHistoryPlayer({ container, children, onInitPlayer, ...props }) {\n  ReactDOM.render(\n    <HistoryPlayer\n      {...props}\n      onInitPlayer={player => {\n        player.destroy = function() {\n          ReactDOM.unmountComponentAtNode(container);\n        };\n        onInitPlayer && onInitPlayer(player);\n      }}\n    >\n      {children}\n    </HistoryPlayer>,\n    container\n  );\n}\n"],"names":["VideoEventInstance","constructor","video","events","playerEvents","on","eventName","handle","listener","push","type","addEventListener","removeEventListener","index","findIndex","v","splice","emit","data","forEach","off","getApi","bind","destroy","Object","keys","key","fn","hostUrl","getTranscodingStream","value","label","actionName","setStreamResolution","GL_CACHE","DM","SR","LOCAL_PORT","getVideoRatio","name","resolution","bitrate","findVideoBitrate","val","ens","createHlsPlayer","file","Hls","player","liveDurationInfinity","levelLoadingTimeOut","fragLoadingTimeOut","enableWorker","loadSource","attachMedia","createFlvPlayer","options","flvOptions","flvConfig","flvjs","isSupported","createPlayer","assign","url","enableStashBuffer","stashInitialSize","cors","seekType","isLive","attachMediaElement","load","getVideoType","indexOf","timeStamp","second_time","time","Math","ceil","second","min","floor","hour","dateFormat","timetemp","date","Date","YYYY","getFullYear","DD","getDate","MM","getMonth","hh","getHours","mm","getMinutes","ss","getSeconds","fullscreen","element","requestFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","exitFullscreen","document","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","isFullscreen","ele","fullscreenElement","msFullscreenElement","mozFullScreenElement","webkitFullscreenElement","fullScreenListener","isAdd","fullscreenchange","funcName","fullScreenEvents","map","computedBound","currentPosition","scale","eleRect","getBoundingClientRect","w","width","h","height","lx","ly","x","y","JSONP","script","createElement","functionName","parseInt","random","window","result","amount","innerText","src","body","appendChild","onload","e","removeChild","onerror","console","warn","genuuid","s","hexDigits","i","substr","uuidStr","join","getScreenRate","num","videoRatio","getGlobalCache","strS","localStorage","getItem","playerOptions","JSON","parse","error","unicodeToBase64","btoa","getLocalPort","length","tansCodingToUrl","onToken","param1","param2","param3","url_info","port","pull_uri","replaceAll","log","lcStore","replace","IconFont","className","props","propTypes","PropTypes","string","Slider","React","Component","renderSliderTips","renderTips","clearTimeout","timer","setTimeout","top","layoutDom","tipsX","pageX","percent","setState","tipsY","showTips","tempValue","hideSliderTips","cancelPropagation","stopPropagation","startDrag","dragFlag","moveChange","stopDrag","computedPositionForEvent","state","onChange","changeCurrentValue","event","sliderDomRef","createRef","lineDom","dragDom","currentPercent","UNSAFE_componentWillReceiveProps","nextProps","componentDidMount","current","querySelector","componentWillUnmount","dx","render","availablePercent","children","left","number","seekTo","func","any","defaultProps","Tips","getContainer","visibel","style","useRef","useEffect","box","ReactDOM","createPortal","bool","Bar","RELOAD","RELOAD_FAIL","RELOAD_SUCCESS","ERROR","ERROR_RELOAD","HISTORY_PLAY_END","SEEK","TRANSFORM","CHANGE_PLAY_INDEX","HIDE_CONTRALLER","SHOW_CONTRALLER","CLEAR_ERROR_TIMER","LeftBar","api","isHistory","reloadHistory","leftExtContents","leftMidExtContents","openSliderVolume","setOpenSliderVolume","useState","dep","setDep","now","updateRender","paused","useMemo","statusIconClassName","statusText","volumeVal","muted","volume","volumeIcon","volumePercent","sliderClassName","changePlayStatus","useCallback","play","pause","mutedChantgeStatus","unmute","mute","onChangeVolume","setVolume","parseFloat","toFixed","reload","EventName","precent","round","object","playerProps","node","RightBar","playContainer","snapshot","rightExtContents","rightMidExtContents","switchResolution","ratioValue","viewText","setViewText","isSwithRate","update","isfull","cancelFullScreen","setScale","args","position","getPosition","getScale","setPosition","setRatio","item","ScaleBar","ContrallerBar","ContrallerEvent","setVisibel","showContraller","hideContraller","Children","child","isValidElement","cloneElement","VideoMessage","status","errorTimer","loading","message","openLoading","old","closeLoading","errorReload","reloadFail","reloadSuccess","playEnd","NoSource","fontSize","TineLine","duration","currentTime","buffered","getDuration","getCurrentTime","getSecondsLoaded","getBuffered","seekendPlay","playPercent","bufferedPercent","changePlayTime","renderTimeLineTips","backWind","fastForward","ErrorEvent","errorReloadTimer","flv","hls","changePlayIndex","playIndex","setErrorTime","errorInfo","reloadTimer","errorHandle","msg","includes","success","clearErrorTimer","unload","DragEvent","openDrag","start","pageY","end","transformChange","lcStoreService","code","Api","updateChunk","removeAttribute","detachMediaElement","seconds","noEmit","getBufferedTime","notEmit","swapAudioCodec","recoverMediaError","stopLoad","startLoad","fraction","requestPictureInPicture","pictureInPictureElement","exitPictureInPicture","setPlaybackRate","rate","playbackRate","seekable","Infinity","canvas","ctx","getContext","videoWidth","videoHeight","drawImage","remove","toDataURL","isRest","transition","__setTransform","isAnimate","transform","exeRatioCommand","ratio","__player","getHiddenProp","prefixes","getVisibilityState","visibilityState","visProp","evtname","LiveHeart","browserTabChange","BrowserTab","SinglePlayer","autoPlay","poster","playsinline","loop","preload","onInitPlayer","screenNum","onVideoFn","playContainerRef","playerObj","setPlayerObj","playerRef","setResolution","token","uuid","playerObject","isInit","formartType","VideoEvent","VideoTools","hideContrallerBar","draggable","TimeLine","isRequired","oneOf","playsInline","computedIndexFormTime","historyList","fragments","computedTimeAndIndex","seekTime","fragment","begin","computedLineList","disabled","size","defaultTime","isEnd","historyPlayEnd","beginDate","lineList","currentLine","filter","_","currentIndexTime","reduce","p","c","currentSizeLine","i2","currentIndexSize","array","PlayEnd","endedHandle","HistoryPlayer","playStatus","setPlayStatus","defaultSeekTime","HistoryTimeLine","isDraggable","isScale","autoplay","container","Player","unmountComponentAtNode","createHistoryPlayer"],"mappings":"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"}