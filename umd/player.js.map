{"version":3,"file":"player.js","sources":["../src/event/index.js","../src/service/url/lcStore.js","../src/util.js","../src/iconfont.js","../src/slider.js","../src/contraller_bar/bar.js","../src/event/eventName.js","../src/contraller_bar/left_bar.js","../src/contraller_bar/right_bar.js","../src/contraller_bar/scale_bar.js","../src/contraller_bar/index.js","../src/event/contrallerEvent.js","../src/message.js","../src/time_line.js","../src/event/errorEvent.js","../src/event/dragEvent.js","../src/service/lcStore.js","../src/api.js","../src/event/browserTabEvent.js","../src/live_heart.js","../src/player.js","../src/history/utils.js","../src/history/time_line_history.js","../src/history/play_end.js","../src/history/index.js","../src/createPlayer.js"],"sourcesContent":["class VideoEventInstance {\n  constructor(video) {\n    this.video = video\n    this.events = {}\n    this.playerEvents = {}\n  }\n  on(eventName, handle) {\n    this.events && this.events[eventName]\n      ? this.events[eventName].listener.push(handle)\n      : (this.events[eventName] = { type: eventName, listener: [handle] })\n  }\n  addEventListener(eventName, handle) {\n    if (this.video) {\n      this.playerEvents[eventName] ? this.playerEvents[eventName].push(handle) : (this.playerEvents[eventName] = [handle])\n      this.video.addEventListener(eventName, handle, false)\n    }\n  }\n  removeEventListener(eventName, handle) {\n    if (this.video) {\n      if (!this.playerEvents || !this.playerEvents[eventName]) {\n        return\n      }\n      let index = this.playerEvents[eventName].findIndex(v => v === handle)\n      index > -1 && this.playerEvents[eventName].splice(index, 1)\n      this.video.removeEventListener(eventName, handle, false)\n    }\n  }\n  emit(eventName, ...data) {\n    if (!this.events || !this.events[eventName]) {\n      return\n    }\n    this.events[eventName].listener.forEach(v => {\n      v(...data)\n    })\n  }\n  off(eventName, handle) {\n    if (!this.events || !this.events.eventName) {\n      return\n    }\n    let index = this.events[eventName].listener.findIndex(v => v === handle)\n    index > -1 && this.events[eventName].listener.splice(index, 1)\n  }\n  getApi() {\n    return { on: this.on.bind(this), off: this.off.bind(this), emit: this.emit.bind(this), addEventListener: this.addEventListener.bind(this), removeEventListener: this.removeEventListener.bind(this) }\n  }\n  destroy() {\n    Object.keys(this.playerEvents).forEach(key => {\n      this.playerEvents[key].forEach(fn => {\n        this.removeEventListener(key, fn)\n      })\n    })\n    this.playerEvents = {}\n    this.events = {}\n    this.video = null\n  }\n}\n\nexport default VideoEventInstance\n","const hostUrl = 'http://127.0.0.1';\r\n\r\nexport default {\r\n  getTranscodingStream: {\r\n    value: `${hostUrl}:<port>/video/v1/transcoding?uri=<pull_uri>`,\r\n    label: '获取视频流接口',\r\n    actionName: 'getTranscodingStream'\r\n  },\r\n  setStreamResolution:{\r\n    value: `${hostUrl}:<port>/video/v1/change?resolution=<resolution>`,\r\n    label: '修改视频流接口',\r\n    actionName: 'setStreamResolution'\r\n  }\r\n};\r\n","import flvjs from 'flv.zv.js'\nimport * as Hls from 'hls.js'\nimport lcStore from \"./service/url/lcStore\";\n\n/**\n * 全局配置\n * decryptionMode： 是否加密\n * switchRate：码率切换控制\n */\n export const GL_CACHE = {\n  DM :'decryptionMode',\n  SR :'switchRate'\n}\n\n/**\n * 客户端插件模式，随机端口\n */\nexport const LOCAL_PORT = [\"15080\", \"15081\", \"15082\", \"15083\", \"15084\", \"15085\", \"15086\", \"15087\", \"15088\", \"15089\"]\n\nexport function findVideoAttribute(val, kv) {\n  const ens = getVideoRatio()\n  for(const key in ens){\n    if(ens[key]['resolution'] == val){\n      return ens[key][kv]\n    }\n  }\n}\n\n\n/**\n * 创建HLS对象\n * @param {*} video\n * @param {*} file\n */\nexport function createHlsPlayer(video, file) {\n  if (Hls.isSupported()) {\n    const player = new Hls({\n      liveDurationInfinity: true,\n      levelLoadingTimeOut: 15000,\n      fragLoadingTimeOut: 25000,\n      enableWorker: true,\n    })\n    player.loadSource(file)\n    player.attachMedia(video)\n    return player\n  }\n}\n\n/**\n * 创建FLV对象\n * @param {*} video\n * @param {*} options\n */\nexport function createFlvPlayer(video, options) {\n  const { flvOptions = {}, flvConfig = {} } = options\n  if (flvjs.isSupported()) {\n    const player = flvjs.createPlayer(\n      Object.assign(\n        {},\n        {\n          type: 'flv',\n          url: options.file,\n        },\n        flvOptions\n      ),\n      Object.assign(\n        {},\n        {\n          enableWorker: true,\n          // lazyLoad: false,\n          // Indicates how many seconds of data to be kept for lazyLoad.\n          // lazyLoadMaxDuration: 0,\n          // autoCleanupMaxBackwardDuration: 3,\n          // autoCleanupMinBackwardDuration: 2,\n          // autoCleanupSourceBuffer: true,\n          enableStashBuffer: false,\n          stashInitialSize: 128,\n          cors: true,\n          seekType: 'range',\n          isLive: options.isLive || true,\n          // headers:{\n          //   \"Access-Control-Allow-Origin\":\"*\"\n          // }\n        },\n        flvConfig\n      )\n    )\n    player.attachMediaElement(video)\n    player.load()\n    return player\n  }\n}\n\n/**\n * 获取播放文件类型\n * @param {*} url\n */\nexport function getVideoType(url) {\n  return url.indexOf('.flv') > -1 ? 'flv' : url.indexOf('.m3u8') > -1 ? 'm3u8' : 'native'\n}\n\n/**\n * 播放时间转字符串\n * @param {*} second_time\n */\nexport function timeStamp(second_time) {\n  let time = Math.ceil(second_time)\n  if (time > 60) {\n    let second = Math.ceil(second_time % 60)\n    let min = Math.floor(second_time / 60)\n    time = `${min < 10 ? `0${min}` : min}:${second < 10 ? `0${second}` : second}`\n    if (min > 60) {\n      min = Math.ceil((second_time / 60) % 60)\n      let hour = Math.floor(second_time / 60 / 60)\n      time = `${hour < 10 ? `0${hour}` : hour}:${min < 10 ? `0${min}` : min}:${second < 10 ? `0${second}` : second}`\n    } else {\n      time = `00:${time}`\n    }\n  } else {\n    time = `00:00:${time < 10 ? `0${time}` : time}`\n  }\n\n  return time\n}\n\n/**\n * 日期格式化\n * @param {*} timetemp\n */\nexport function dateFormat(timetemp) {\n  const date = new Date(timetemp)\n  let YYYY = date.getFullYear()\n  let DD = date.getDate()\n  let MM = date.getMonth() + 1\n  let hh = date.getHours()\n  let mm = date.getMinutes()\n  let ss = date.getSeconds()\n  return `${YYYY}.${MM > 9 ? MM : '0' + MM}.${DD > 9 ? DD : '0' + DD} ${hh > 9 ? hh : '0' + hh}.${mm > 9 ? mm : '0' + mm}.${ss > 9 ? ss : '0' + ss}`\n}\n\n/**\n * 全屏\n * @param {*} element\n */\nexport function fullscreen(element) {\n  if (element.requestFullScreen) {\n    element.requestFullScreen()\n  } else if (element.webkitRequestFullScreen) {\n    element.webkitRequestFullScreen()\n  } else if (element.mozRequestFullScreen) {\n    element.mozRequestFullScreen()\n  } else if (element.msRequestFullscreen) {\n    element.msRequestFullscreen()\n  }\n}\n\n/**\n * exitFullscreen 退出全屏\n * @param  {Objct} element 选择器\n */\nexport function exitFullscreen() {\n  if (document.exitFullscreen) {\n    document.exitFullscreen()\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen()\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen()\n  } else if (document.msExitFullscreen) {\n    document.msExitFullscreen()\n  }\n}\n\n/**\n * 判读是否支持全屏\n */\nexport function fullscreenEnabled() {\n  return document.fullscreenEnabled || document.mozFullScreenEnabled || document.webkitFullscreenEnabled || document.msFullscreenEnabled\n}\n\n/**\n * [isFullscreen 判断浏览器是否全屏]\n * @return [全屏则返回当前调用全屏的元素,不全屏返回false]\n */\nexport function isFullscreen(ele) {\n  if (!ele) {\n    return false\n  }\n  return document.fullscreenElement === ele || document.msFullscreenElement === ele || document.mozFullScreenElement === ele || document.webkitFullscreenElement === ele || false\n}\n// 添加 / 移除 全屏事件监听\nexport function fullScreenListener(isAdd, fullscreenchange) {\n  const funcName = isAdd ? 'addEventListener' : 'removeEventListener'\n  const fullScreenEvents = ['fullscreenchange', 'mozfullscreenchange', 'webkitfullscreenchange', 'msfullscreenchange']\n  fullScreenEvents.map((v) => document[funcName](v, fullscreenchange))\n}\n\n/**\n * 计算视频拖拽边界\n * @param {*} ele\n * @param {*} currentPosition\n * @param {*} scale\n */\nexport function computedBound(ele, currentPosition, scale) {\n  const data = currentPosition\n  const eleRect = ele.getBoundingClientRect()\n  const w = eleRect.width\n  const h = eleRect.height\n  let lx = 0,\n    ly = 0\n  if (scale === 1) {\n    return [0, 0]\n  }\n  lx = (w * (scale - 1)) / 2 / scale\n  ly = (h * (scale - 1)) / 2 / scale\n  let x = 0,\n    y = 0\n  if (data[0] >= 0 && data[0] > lx) {\n    x = lx\n  }\n  if (data[0] >= 0 && data[0] < lx) {\n    x = data[0]\n  }\n\n  if (data[0] < 0 && data[0] < -lx) {\n    x = -lx\n  }\n  if (data[0] < 0 && data[0] > -lx) {\n    x = data[0]\n  }\n\n  if (data[1] >= 0 && data[1] > ly) {\n    y = ly\n  }\n  if (data[1] >= 0 && data[1] < ly) {\n    y = data[1]\n  }\n\n  if (data[1] < 0 && data[1] < -ly) {\n    y = -ly\n  }\n  if (data[1] < 0 && data[1] > -ly) {\n    y = data[1]\n  }\n  if (x !== data[0] || y !== data[1]) {\n    return [x, y]\n  } else {\n    return\n  }\n}\n/**\n * \n * @returns 获取随机数\n */\nexport function getRandom() {\n  return Math.random().toString(36).substr(2)\n}\n\nexport function JSONP(url){\n  let script = document.createElement('script')//创建script标签\n  let functionName = 'fang' + parseInt(Math.random()*10000000,10)//设置调用函数名\n  window[functionName] = function(result){\n    if(result === 'success'){\n      amount.innerText = amount.innerText - 1\n    }\n  }\n  script.src = `${url}&callback=${functionName} `\n  document.body.appendChild(script)//将能实现发送跨域请求的script标签插入html\n  script.onload = function(e){\n    document.body.removeChild(script);\n    delete window[functionName]\n  }\n  script.onerror = function(){\n    console.warn('切换分辨率失败！')\n    document.body.removeChild(script);\n    delete window[functionName]\n  }\n  //完成传输后删除script标签\n}\n/**\n * 生成UUID\n */\n export function genuuid() {\n  let tid = [];\n  let hexDigits = '0123456789abcdef';\n  for (let i = 0; i < 36; i++) {\n    tid[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n  }\n\n  tid[14] = '4';\n  tid[19] = hexDigits.substr((tid[19] & 0x3) | 0x8, 1);\n  tid[8] = tid[13] = tid[18] = tid[23] = '-';\n\n  return tid.join('');\n}\n\n/**\n * 获取视频分辨率\n */\n export function getVideoRatio() {\n  return {\n    '1': { value: '1920*1080', name: '超清', resolution:'1080p', bitrate:'2M',show: true},\n    '2': { value: '1280*720', name: '高清', resolution:'720p', bitrate:'2M',show: true},\n    '3': { value: '640*360', name: '标清', resolution:'360p', bitrate:'500K',show: true},\n    '4': { value: '640*480', name: '标清', resolution:'480p', bitrate:'1M',show: false},\n    '5': { value: '', name: '原始', resolution: '', bitrate:'',show: true},\n  }\n}\n\n/**\n * 根据分屏获取对应的分辨率\n * 默认 960*544\n */\n export function getScreenRate(num){\n  const videoRatio = getVideoRatio()\n  // 1、4、6、8、9、10、13、16\n  if(num < 4){\n    return videoRatio['5'].resolution\n  }else if(num < 9 && num >= 4){\n    return videoRatio['2'].resolution\n  }else if(num < 13 && num >= 9){\n    return videoRatio['4'].resolution\n  }else if(num <= 16 && num >= 13){\n    return videoRatio['3'].resolution\n  }else{\n    return videoRatio['5'].resolution\n  }\n}\n\n\n/**\n * 获取全局配置\n * @param {*} key \n */\n export function getGlobalCache(key){\n  const strS = localStorage.getItem('PY_PLUS')\n  let playerOptions = null\n\n  try {\n    playerOptions = JSON.parse(strS);\n  } catch (error) {\n    console.error('播放配置出错，请检查浏览器本地存储PY_PLUS！')\n    return ''\n  }\n\n  return playerOptions ? playerOptions[key] : ''\n}\n\nexport function BASE64(input) {  \n \n  // private property  \n  let _keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";  \n\n  function _utf8_encode(string) {  \n    string = string.replace(/\\r\\n/g,\"\\n\");  \n    var utftext = \"\";  \n    for (var n = 0; n < string.length; n++) {  \n        var c = string.charCodeAt(n);  \n        if (c < 128) {  \n            utftext += String.fromCharCode(c);  \n        } else if((c > 127) && (c < 2048)) {  \n            utftext += String.fromCharCode((c >> 6) | 192);  \n            utftext += String.fromCharCode((c & 63) | 128);  \n        } else {  \n            utftext += String.fromCharCode((c >> 12) | 224);  \n            utftext += String.fromCharCode(((c >> 6) & 63) | 128);  \n            utftext += String.fromCharCode((c & 63) | 128);  \n        }  \n\n    }  \n    return utftext;\n}  \n\n  // public method for encoding  \n  var output = \"\";  \n  var chr1, chr2, chr3, enc1, enc2, enc3, enc4;  \n  var i = 0;  \n  input = _utf8_encode(input);  \n  while (i < input.length) {  \n          chr1 = input.charCodeAt(i++);  \n          chr2 = input.charCodeAt(i++);  \n          chr3 = input.charCodeAt(i++);  \n          enc1 = chr1 >> 2;  \n          enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);  \n          enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);  \n          enc4 = chr3 & 63;  \n          if (isNaN(chr2)) {  \n              enc3 = enc4 = 64;  \n          } else if (isNaN(chr3)) {  \n              enc4 = 64;  \n          }  \n          output = output +  \n          _keyStr.charAt(enc1) + _keyStr.charAt(enc2) +  \n          _keyStr.charAt(enc3) + _keyStr.charAt(enc4);  \n  }  \n  return output;  \n}\n\nexport function unicodeToBase64(s){\n  if(window.btoa){\n    return window.btoa(s)\n  }else{\n    return BASE64(s)\n  }\n}\n\nexport function getLocalPort(){\n  return LOCAL_PORT[Math.floor(Math.random()*LOCAL_PORT.length)]\n}\n\nexport function tansCodingToUrl(url, resolution, onToken){\n  let param1 = ''\n  let param2 = ''\n  let param3 = ''\n\n  const key = genuuid()\n  // 是否本地插件播放\n  if(!getGlobalCache('mode')) return url\n\n  // 是否加密\n  url = url + getGlobalCache(GL_CACHE.DM)\n\n  // &resolution=<resolution>&bitrate=<bitrate>&key=<key>\n  const url_info ={\n      port: getLocalPort(),\n      pull_uri: unicodeToBase64(url)?.replaceAll('=','')\n  }\n  // 分辨率，如果为空，为原始分辨率\n  if(resolution){\n    param1 = '&resolution=' + resolution\n  }\n\n  param2 = '&token=' + key\n\n  // 免责工具使用\n  onToken && onToken(key)\n\n  if(resolution){\n    param1 = '&resolution=' + resolution\n\n    // 码率\n    param3 = '&bitrate=' + findVideoAttribute(resolution,'bitrate')\n\n    console.log(param1+param3)\n  }\n\n  return lcStore.getTranscodingStream.value.replace('<pull_uri>', url_info.pull_uri).replace('<port>', url_info.port) + param1 + param2 + param3\n}\n\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport './style/iconfont.less'\n\nexport default function IconFont({ type, className = '', ...props }) {\n  return <i className={`lm-player-iconfont ${type} ${className}`} {...props} />\n}\n\nIconFont.propTypes = {\n  type: PropTypes.string,\n  className: PropTypes.string\n}\n","import React, { useEffect, useRef } from 'react'\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\nimport './style/slider.less'\n\nclass Slider extends React.Component {\n  constructor(props) {\n    super(props)\n    this.sliderDomRef = React.createRef()\n    this.layoutDom = null\n    this.lineDom = null\n    this.dragDom = null\n    this.dragFlag = false\n    this.state = {\n      value: this.props.currentPercent || 0,\n      tempValue: 0,\n      showTips: false,\n      tipsX: 0,\n      tipsY: 0\n    }\n  }\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (!this.dragFlag) {\n      this.setState({ value: nextProps.currentPercent || 0 })\n    }\n  }\n  componentDidMount() {\n    this.layoutDom = this.sliderDomRef.current\n    this.dragDom = this.layoutDom.querySelector('.drag-change-icon')\n    this.lineDom = this.layoutDom.querySelector('.slider-content')\n\n    this.layoutDom.addEventListener('mousemove', this.renderSliderTips, false)\n    this.layoutDom.addEventListener('mouseout', this.hideSliderTips, false)\n    this.lineDom.addEventListener('click', this.changeCurrentValue, false)\n    this.dragDom.addEventListener('click', this.cancelPropagation, false)\n    this.dragDom.addEventListener('mousedown', this.startDrag, false)\n  }\n  componentWillUnmount() {\n    clearTimeout(this.timer)\n    this.layoutDom.removeEventListener('mousemove', this.renderSliderTips, false)\n    this.layoutDom.removeEventListener('mouseout', this.hideSliderTips, false)\n    this.lineDom.removeEventListener('click', this.changeCurrentValue, false)\n    this.dragDom.removeEventListener('click', this.cancelPropagation, false)\n    this.dragDom.removeEventListener('mousedown', this.startDrag, false)\n\n    document.body.removeEventListener('mousemove', this.moveChange)\n    document.body.removeEventListener('mouseup', this.stopDrag)\n\n    this.sliderDomRef = null\n    this.layoutDom = null\n    this.lineDom = null\n    this.dragDom = null\n    this.dragFlag = null\n  }\n  renderSliderTips = e => {\n    const { renderTips } = this.props\n    if (!renderTips) {\n      return\n    }\n    clearTimeout(this.timer)\n    this.timer = setTimeout(() => {\n      const { x, width, top } = this.layoutDom.getBoundingClientRect()\n      const tipsX = e.pageX - x\n      let percent = (e.pageX - x) / width\n      percent = percent < 0 ? 0 : percent > 1 ? 1 : percent\n      this.setState({ tipsX, tipsY: top, showTips: true, tempValue: percent })\n    }, 200)\n  }\n  hideSliderTips = () => {\n    clearTimeout(this.timer)\n    this.setState({ showTips: false })\n  }\n  cancelPropagation = e => {\n    e.stopPropagation()\n  }\n  startDrag = e => {\n    e.stopPropagation()\n    this.dragFlag = true\n    document.body.addEventListener('mousemove', this.moveChange)\n    document.body.addEventListener('mouseup', this.stopDrag)\n  }\n  moveChange = e => {\n    e.stopPropagation()\n    const percent = this.computedPositionForEvent(e)\n    this.setState({ value: percent })\n  }\n  stopDrag = e => {\n    e.stopPropagation()\n    document.body.removeEventListener('mousemove', this.moveChange)\n    document.body.removeEventListener('mouseup', this.stopDrag)\n    this.dragFlag = false\n    let percent = this.state.value / 100\n    percent = percent < 0 ? 0 : percent > 1 ? 1 : percent\n    this.props.onChange && this.props.onChange(percent)\n  }\n  computedPositionForEvent(e) {\n    const { x, width } = this.layoutDom.getBoundingClientRect()\n    const { pageX } = e\n    let dx = pageX - x\n    if (dx > width) {\n      dx = width\n    }\n    if (dx < 0) {\n      dx = 0\n    }\n    return (dx / width) * 100\n  }\n  changeCurrentValue = event => {\n    event.stopPropagation()\n    const { width, x } = this.layoutDom.getBoundingClientRect()\n    let percent = (event.pageX - x) / width\n    this.props.onChange && this.props.onChange(percent)\n  }\n  render() {\n    const { value, showTips, tipsX } = this.state\n    const { availablePercent = 0, className = '', tipsY } = this.props\n    return (\n      <div className={`slider-layout ${className}`} ref={this.sliderDomRef}>\n        <div className=\"slider-content\">\n          <div className=\"slider-max-line\" />\n          <div className=\"slider-visibel-line\" style={{ width: `${availablePercent}%` }} />\n          <div className=\"slider-current-line\" style={{ width: `${value}%` }} />\n          {this.props.children}\n        </div>\n        <div className=\"slider-other-content\">\n          <div className=\"drag-change-icon\" draggable={false} style={{ left: `${value}%` }} />\n        </div>\n        <Tips visibel={showTips} className=\"lm-player-slide-tips\" style={{ left: tipsX, top: tipsY }} getContainer={() => this.sliderDomRef.current}>\n          {this.props.renderTips && this.props.renderTips(this.state.tempValue)}\n        </Tips>\n      </div>\n    )\n  }\n}\n\nSlider.propTypes = {\n  currentPercent: PropTypes.number,\n  seekTo: PropTypes.func,\n  video: PropTypes.element,\n  renderTips: PropTypes.func,\n  availablePercent: PropTypes.number,\n  onChange: PropTypes.func,\n  children: PropTypes.any,\n  className: PropTypes.string,\n  tipsY: PropTypes.number\n}\nSlider.defaultProps = {\n  tipsY: -10\n}\n\nfunction Tips({ getContainer, visibel, children, style, className = '' }) {\n  const ele = useRef(document.createElement('div'))\n  useEffect(() => {\n    const box = getContainer ? getContainer() || document.body : document.body\n    box.appendChild(ele.current)\n    return () => box.removeChild(ele.current)\n  }, [getContainer])\n\n  if (!visibel) {\n    return null\n  }\n  return ReactDOM.createPortal(\n    <div className={className} style={style}>\n      {children}\n    </div>,\n    ele.current\n  )\n}\n\nTips.propTypes = {\n  visibel: PropTypes.bool,\n  children: PropTypes.element,\n  style: PropTypes.any,\n  className: PropTypes.string\n}\n\nexport default Slider\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nexport default function Bar({ visibel = true, className = '', children, ...props }) {\n  if (visibel === false) {\n    return null\n  }\n  return (\n    <span className={`contraller-bar-item ${className}`} {...props}>\n      {children}\n    </span>\n  )\n}\n\nBar.propTypes = {\n  visibel: PropTypes.bool,\n  className: PropTypes.string,\n  children: PropTypes.any\n}\n","export default {\n  RELOAD: \"reload\", //手动视频重载\n  RELOAD_FAIL: \"reloadFail\", // 视频出错，重连失败\n  RELOAD_SUCCESS: \"reloadSuccess\", //视频出错，重连成功\n  ERROR: \"error\", //视频出错\n  ERROR_RELOAD: \"errorRload\", //视频出错，自动重连\n  HISTORY_PLAY_END: \"historyPlayEnd\", //历史视频列表播放结束\n  SEEK: \"seek\", //跳跃播放时间\n  TRANSFORM: \"transform\", //视频容器缩放\n  CHANGE_PLAY_INDEX: \"changePlayIndex\", //历史视频列表播放索引改变\n  HIDE_CONTRALLER:\"hideContraller\",\n  SHOW_CONTRALLER:\"showContraller\",\n  CLEAR_ERROR_TIMER:\"clearErrorTimer\"\n};\n","import React, { useState, useEffect, useCallback, useMemo } from 'react'\nimport IconFont from '../iconfont'\nimport Slider from '../slider'\nimport Bar from './bar'\nimport EventName from '../event/eventName'\nimport PropTypes from 'prop-types'\n\nfunction LeftBar({ api, event, video, isHistory, reloadHistory, isLive, leftExtContents, leftMidExtContents }) {\n  const [openSliderVolume, setOpenSliderVolume] = useState(false)\n  const [dep, setDep] = useState(Date.now())\n  useEffect(() => {\n    const updateRender = () => {\n      setDep(Date.now())\n    }\n    event.addEventListener('play', updateRender)\n    event.addEventListener('pause', updateRender)\n    event.addEventListener('volumechange', updateRender)\n\n    return () => {\n      event.removeEventListener('play', updateRender)\n      event.removeEventListener('pause', updateRender)\n      event.removeEventListener('volumechange', updateRender)\n    }\n  }, [event])\n\n  //缓存值\n  const paused = useMemo(() => video.paused, [dep, video])\n  const statusIconClassName = useMemo(() => (paused ? 'lm-player-Play_Main' : 'lm-player-Pause_Main'), [paused])\n  const statusText = useMemo(() => (paused ? '播放' : '暂停'), [paused])\n  const volumeVal = useMemo(() => (video.muted ? 0 : video.volume), [dep, video])\n  const volumeIcon = useMemo(() => (volumeVal === 0 ? 'lm-player-volume-close' : video.volume === 1 ? 'lm-player-volume-max' : 'lm-player-volume-normal-fuben'), [volumeVal])\n  const volumePercent = useMemo(() => (volumeVal === 0 ? 0 : volumeVal * 100), [volumeVal])\n  const sliderClassName = useMemo(() => (openSliderVolume ? 'contraller-bar-hover-volume' : ''), [openSliderVolume])\n\n  //TODO 方法\n  const changePlayStatus = useCallback(() => (video.paused ? api.play() : api.pause()), [video, api])\n\n  const mutedChantgeStatus = useCallback(() => (video.muted ? api.unmute() : api.mute()), [api, video])\n\n  const onChangeVolume = useCallback(\n    volume => {\n      api.setVolume(parseFloat(volume.toFixed(1)))\n      volume > 0 && video.muted && api.unmute()\n    },\n    [api, video]\n  )\n\n  const reload = useCallback(() => {\n    isHistory ? reloadHistory() : api.reload()\n    event.emit(EventName.CLEAR_ERROR_TIMER)\n  }, [event, isHistory, api])\n\n  return (\n    <div className=\"contraller-left-bar\">\n      {leftExtContents}\n      <Bar visibel={!isLive}>\n        <IconFont onClick={changePlayStatus} type={statusIconClassName} title={statusText} />\n      </Bar>\n      <Bar className={`contraller-bar-volume ${sliderClassName}`} onMouseOver={() => setOpenSliderVolume(true)} onMouseOut={() => setOpenSliderVolume(false)}>\n        <IconFont onClick={mutedChantgeStatus} type={volumeIcon} title=\"音量\" />\n        <div className=\"volume-slider-layout\">\n          <Slider className=\"volume-slider\" currentPercent={volumePercent} onChange={onChangeVolume} renderTips={precent => <span>{Math.round(precent * 100)}%</span>} tipsY={-2} />\n        </div>\n      </Bar>\n      <Bar>\n        <IconFont onClick={reload} type=\"lm-player-Refresh_Main\" title=\"重载\" />\n      </Bar>\n      {leftMidExtContents}\n    </div>\n  )\n}\n\nLeftBar.propTypes = {\n  api: PropTypes.object,\n  event: PropTypes.object,\n  playerProps: PropTypes.object,\n  video: PropTypes.node,\n  reloadHistory: PropTypes.func,\n  isHistory: PropTypes.bool\n}\n\nexport default LeftBar\n","import React, { useState, useMemo, useEffect, useCallback } from 'react'\nimport IconFont from '../iconfont'\nimport Bar from './bar'\nimport { isFullscreen, fullScreenListener, computedBound, getVideoRatio, findVideoAttribute, getScreenRate, getGlobalCache, GL_CACHE } from '../util'\nimport PropTypes from 'prop-types'\n\nfunction RightBar({ playContainer, api, scale, snapshot, rightExtContents, rightMidExtContents, isLive, switchResolution}) {\n  const [dep, setDep] = useState(Date.now())\n\n  // 获取视频分辨率\n  const ratioValue = getVideoRatio()\n  // 默认\n  const [viewText, setViewText] = useState(findVideoAttribute(api.getResolution(),'name'));\n\n  const isSwithRate = getGlobalCache(GL_CACHE.SR) || false\n\n\n  useEffect(() => {\n    const update = () => setDep(Date.now())\n    fullScreenListener(true, update)\n    return () => fullScreenListener(false, update)\n  }, [])\n\n  const isfull = useMemo(() => isFullscreen(playContainer), [dep, playContainer])\n\n  const fullscreen = useCallback(() => {\n    const isFullScreen = !isFullscreen(playContainer)\n    \n    if(isFullScreen){\n      api.requestFullScreen()\n      switchResolution('')\n      setViewText(findVideoAttribute('','name'))\n    }else{\n      api.cancelFullScreen()\n      switchResolution(getScreenRate(api.getCurrentScreen()))\n      setViewText(findVideoAttribute(getScreenRate(api.getCurrentScreen()),'name'))\n    }\n\n    // 设置对应的分辨率名称\n    setDep(Date.now())\n  }, [api, playContainer])\n\n  const setScale = useCallback(\n    (...args) => {\n      const dragDom = playContainer.querySelector('.player-mask-layout')\n      api.setScale(...args)\n      let position = computedBound(dragDom, api.getPosition(), api.getScale())\n      if (position) {\n        api.setPosition(position, true)\n      }\n    },\n    [api, playContainer]\n  )\n\n  const setRatio = useCallback(\n    (...args) => {\n      setViewText(ratioValue[args].name)\n      switchResolution(ratioValue[args].resolution)\n    },\n    [api]\n  )\n\n  return (\n    <div className=\"contraller-right-bar\">\n      {rightMidExtContents}\n      {scale && (\n        <>\n          <Bar>\n            <IconFont title=\"缩小\" onClick={() => setScale(-0.2)} type={'lm-player-ZoomOut_Main'} />\n          </Bar>\n          <Bar>\n            <IconFont title=\"复位\" onClick={() => setScale(1, true)} type={'lm-player-ZoomDefault_Main'} />\n          </Bar>\n          <Bar>\n            <IconFont title=\"放大\" onClick={() => setScale(0.2)} type={'lm-player-ZoomIn_Main'} />\n          </Bar>\n        </>\n      )}\n\n      {isLive && isSwithRate && (\n        <Bar className={'ratioMenu'}>\n            <span class='ratioMenu-main'>{viewText}</span>\n            <ul class=\"ratioMenu-level\">\n              {\n                Object.keys(ratioValue).map((item)=>(\n                  ratioValue[item].show && (<li class=\"ratioMenu-level-1\" onClick={() => setRatio(item)}>{ratioValue[item].name}</li>) \n                ))\n              }\n            </ul>\n        </Bar>\n      )}\n\n      {snapshot && (\n        <Bar>\n          <IconFont title=\"截图\" onClick={() => snapshot(api.snapshot())} type=\"lm-player-SearchBox\" />\n        </Bar>\n      )}\n      <Bar>\n        <IconFont title={isfull ? '窗口' : '全屏'} onClick={fullscreen} type={isfull ? 'lm-player-ExitFull_Main' : 'lm-player-Full_Main'} />\n      </Bar>\n      {rightExtContents}\n    </div>\n  )\n}\n\nRightBar.propTypes = {\n  api: PropTypes.object,\n  event: PropTypes.object,\n  playerProps: PropTypes.object,\n  playContainer: PropTypes.node,\n  reloadHistory: PropTypes.func,\n  isHistory: PropTypes.bool,\n}\nexport default RightBar\n","import React, { useCallback } from 'react'\nimport IconFont from '../iconfont'\nimport Bar from './bar'\nimport { computedBound } from '../util'\n\nfunction ScaleBar({ playContainer, api, scale }) {\n  const setScale = useCallback(\n    (...args) => {\n      const dragDom = playContainer.querySelector('.player-mask-layout')\n      api.setScale(...args)\n      let position = computedBound(dragDom, api.getPosition(), api.getScale())\n      if (position) {\n        api.setPosition(position, true)\n      }\n    },\n    [api, playContainer]\n  )\n\n  return (\n    <div className=\"contraller-scale-bar\">\n      {scale && (\n        <>\n          <Bar>\n            <IconFont title=\"缩小\" onClick={() => setScale(-0.2)} type={'lm-player-ZoomOut_Main'} />\n          </Bar>\n          <Bar>\n            <IconFont title=\"复位\" onClick={() => setScale(1, true)} type={'lm-player-ZoomDefault_Main'} />\n          </Bar>\n          <Bar>\n            <IconFont title=\"放大\" onClick={() => setScale(0.2)} type={'lm-player-ZoomIn_Main'} />\n          </Bar>\n        </>\n      )}\n    </div>\n  )\n}\n\nexport default ScaleBar\n","import React from 'react'\nimport LeftBar from './left_bar'\nimport RightBar from './right_bar'\nimport PropTypes from 'prop-types'\nimport ScaleBar from './scale_bar'\nimport '../style/bar.less'\n\nfunction ContrallerBar({\n  playContainer,\n  snapshot,\n  switchResolution,\n  rightExtContents,\n  rightMidExtContents,\n  scale,\n  visibel,\n  api,\n  event,\n  video,\n  isHistory,\n  reloadHistory,\n  isLive,\n  leftExtContents,\n  leftMidExtContents,\n}) {\n  return (\n    <>\n      <div className={`contraller-bar-layout ${!visibel ? 'hide-contraller-bar' : ''}`}>\n        <LeftBar\n          api={api}\n          event={event}\n          video={video}\n          isHistory={isHistory}\n          reloadHistory={reloadHistory}\n          isLive={isLive}\n          leftMidExtContents={leftMidExtContents}\n          leftExtContents={leftExtContents}\n        />\n        <RightBar\n          api={api}\n          event={event}\n          isLive={isLive}\n          playContainer={playContainer}\n          snapshot={snapshot}\n          switchResolution={switchResolution}\n          rightExtContents={rightExtContents}\n          rightMidExtContents={rightMidExtContents}\n        />\n      </div>\n      <div className={`contraller-scale-layout ${!visibel ? 'hide-contraller-bar' : ''}`}>\n        <ScaleBar api={api} playContainer={playContainer} scale={scale} />\n      </div>\n    </>\n  )\n}\n\nContrallerBar.propTypes = {\n  visibel: PropTypes.bool,\n}\n\nexport default ContrallerBar\n","import React, { useEffect, useState, useRef } from 'react'\nimport EventName from './eventName'\n\nfunction ContrallerEvent({ event, playContainer, children }) {\n  const timer = useRef(null)\n  const [visibel, setVisibel] = useState(true)\n  useEffect(() => {\n    const showContraller = () => {\n      setVisibel(true)\n      hideContraller()\n      event.emit(EventName.SHOW_CONTRALLER)\n    }\n    const hideContraller = () => {\n      clearTimeout(timer.current)\n      timer.current = setTimeout(() => {\n        setVisibel(false)\n        event.emit(EventName.HIDE_CONTRALLER)\n      }, 3 * 1000)\n    }\n    playContainer.addEventListener('mousemove', showContraller, false)\n    playContainer.addEventListener('mouseout', hideContraller, false)\n\n    return () => {\n      playContainer.removeEventListener('mousemove', showContraller, false)\n      playContainer.removeEventListener('mouseout', hideContraller, false)\n    }\n  }, [])\n\n  return React.Children.map(children, child => (React.isValidElement(child) ? React.cloneElement(child, { visibel }) : child))\n}\n\nexport default ContrallerEvent\n","import React, { useEffect, useState, useMemo } from 'react'\nimport IconFont from './iconfont'\nimport EventName from './event/eventName'\nimport './style/message.less'\n\nfunction VideoMessage({ event, api }) {\n  const [state, setState] = useState({ status: null, errorTimer: null, loading: false })\n\n  const message = useMemo(() => {\n    if (!state.status) {\n      return ''\n    }\n    if (state.status === 'fail') {\n      return '视频错误'\n    }\n    if (state.status === 'reload') {\n      if(!state.errorTimer){\n        return `视频加载错误，正在进行重连...`\n      }\n      return `视频加载错误，正在进行重连第${state.errorTimer}次重连`\n    }\n  }, [state.errorTimer, state.status])\n\n  useEffect(() => {\n    const openStartLoading = () => setState(old =>({ ...old, loading: true }))\n    const openWaitLoading = () => setState(old =>({ ...old}))\n    const openSeekLoading = () => setState(old =>({ ...old, loading: true }))\n\n    const closeLoading = () => setState(old => ({ ...old, loading: false }))\n    const errorReload = timer => setState(() => ({ status: 'reload', errorTimer: timer, loading: true }))\n    const reloadFail = () => setState(old => ({ ...old, status: 'fail' , loading: false}))\n    const reloadSuccess = () => setState(old => ({ ...old, status: null, loading: false }))\n    const reload = () => setState(old => ({ ...old, status: 'reload', loading: true }))\n    const playEnd = () => (setState(old => ({ ...old, status: null, loading: false })), api.pause())\n\n    event.addEventListener('loadstart', openStartLoading)\n    event.addEventListener('waiting', openWaitLoading)\n    event.addEventListener('seeking', openSeekLoading)\n    event.addEventListener('loadeddata', closeLoading)\n    event.addEventListener('canplay', closeLoading)\n    event.on(EventName.ERROR_RELOAD, errorReload)\n    event.on(EventName.RELOAD_FAIL, reloadFail)\n    event.on(EventName.RELOAD_SUCCESS, reloadSuccess)\n    event.on(EventName.RELOAD, reload)\n    event.on(EventName.HISTORY_PLAY_END, playEnd)\n    event.on(EventName.CLEAR_ERROR_TIMER, reloadSuccess)\n\n    return () => {\n      event.removeEventListener('loadstart', openStartLoading)\n      event.removeEventListener('waiting', openWaitLoading)\n      event.removeEventListener('seeking', openSeekLoading)\n      event.removeEventListener('loadeddata', closeLoading)\n      event.removeEventListener('canplay', closeLoading)\n      event.off(EventName.ERROR_RELOAD, errorReload)\n      event.off(EventName.RELOAD_FAIL, reloadFail)\n      event.off(EventName.RELOAD_SUCCESS, reloadSuccess)\n      event.off(EventName.RELOAD, reload)\n      event.off(EventName.HISTORY_PLAY_END, playEnd)\n      event.off(EventName.CLEAR_ERROR_TIMER, reloadSuccess)\n    }\n  }, [event])\n\n  const { loading, status } = state\n  return (\n    <div className={`lm-player-message-mask ${loading || status === 'fail' ? 'lm-player-mask-loading-animation' : ''}`}>\n      <IconFont\n        type={status === 'fail' ? 'lm-player-YesorNo_No_Dark' : 'lm-player-Loading'}\n        className={`${loading && status !== 'fail' ? 'lm-player-loading-animation' : status === 'fail' ? 'lm-player-loadfail' : ''} lm-player-loading-icon`}\n      />\n      <span className=\"lm-player-message\">{message}</span>\n    </div>\n  )\n}\n\nexport const NoSource = () => {\n  return (\n    <div className=\"lm-player-message-mask lm-player-mask-loading-animation\">\n      <IconFont style={{ fontSize: 80 }} type=\"lm-player-PlaySource\" title=\"请选择视频源\"></IconFont>\n    </div>\n  )\n}\n\nexport default VideoMessage\n","import React, { useEffect, useState, useMemo, useCallback } from 'react'\nimport IconFont from './iconfont'\nimport Slider from './slider'\nimport { timeStamp } from './util'\nimport './style/time-line.less'\n\nfunction TineLine({ event, api, visibel }) {\n  const [state, setState] = useState({ duration: 0, currentTime: 0, buffered: 0 })\n\n  useEffect(() => {\n    const getDuration = () => setState((old) => ({ ...old, duration: api.getDuration() }))\n    const getCurrentTime = () => setState((old) => ({ ...old, currentTime: api.getCurrentTime(), buffered: api.getSecondsLoaded() }))\n    const getBuffered = () => setState((old) => ({ ...old, buffered: api.getSecondsLoaded() }))\n    const seekendPlay = () => api.play()\n\n    event.addEventListener('loadedmetadata', getDuration)\n    event.addEventListener('durationchange', getDuration)\n    event.addEventListener('timeupdate', getCurrentTime)\n    event.addEventListener('progress', getBuffered)\n    event.addEventListener('suspend', getBuffered)\n    event.addEventListener('seeked', seekendPlay)\n\n    return () => {\n      event.removeEventListener('loadedmetadata', getDuration)\n      event.removeEventListener('durationchange', getDuration)\n      event.removeEventListener('timeupdate', getCurrentTime)\n      event.removeEventListener('progress', getBuffered)\n      event.removeEventListener('suspend', getBuffered)\n      event.removeEventListener('seeked', seekendPlay)\n    }\n  }, [event, api])\n\n  const { duration, currentTime, buffered } = state\n  const playPercent = useMemo(() => Math.round((currentTime / duration) * 100), [currentTime, duration])\n  const bufferedPercent = useMemo(() => Math.round((buffered / duration) * 100), [buffered, duration])\n\n  const changePlayTime = useCallback(\n    (percent) => {\n      const currentTime = percent * duration\n      api.pause()\n      api.seekTo(currentTime)\n      setState((old) => ({ ...old, currentTime }))\n    },\n    [duration, api]\n  )\n\n  const renderTimeLineTips = (percent) => {\n    const currentTime = percent * duration\n    const time = timeStamp(currentTime)\n    return <span>{time}</span>\n  }\n\n  return (\n    <div className={`video-time-line-layout ${!visibel ? 'hide-time-line' : ''}`}>\n      <IconFont type=\"lm-player-PrevFast\" onClick={() => api.backWind()} className=\"time-line-action-item\" />\n      <Slider className=\"time-line-box\" currentPercent={playPercent} availablePercent={bufferedPercent} onChange={changePlayTime} renderTips={renderTimeLineTips} />\n      <IconFont type=\"lm-player-NextFast_Light\" onClick={() => api.fastForward()} className=\"time-line-action-item\" />\n    </div>\n  )\n}\n\nexport default TineLine\n","import React, { useState, useEffect, useRef } from 'react'\nimport EventName from './eventName'\n\nfunction ErrorEvent({ event, api, errorReloadTimer, flv, hls, changePlayIndex, isHistory, playIndex }) {\n  const [errorTimer, setErrorTime] = useState(0)\n  const errorInfo = useRef(null)\n  const reloadTimer = useRef(null)\n\n  useEffect(() => {\n    const errorHandle = (...args) => {\n      if (args[2] && args[2].msg && args[2].msg.includes('Unsupported audio')) {\n        return\n      }\n\n      if(args[1] && args[1].details && (\n        args[1].details.includes(\"bufferStalledError\") || \n        args[1].details.includes(\"bufferNudgeOnStall\") || \n        args[1].details.includes(\"bufferSeekOverHole\") || \n        args[1].details.includes(\"bufferAddCodecError\") \n      )){\n        return\n      }\n      \n      console.error(...args)\n      errorInfo.current = args\n      setErrorTime(errorTimer + 1)\n    }\n\n    const reloadSuccess = () => {\n      if (errorTimer > 0) {\n        console.warn('视频重连成功！')\n        event.emit(EventName.RELOAD_SUCCESS)\n        api.success()\n        clearErrorTimer()\n      }\n    }\n    const clearErrorTimer = () => setErrorTime(0)\n    try {\n      if (flv) {\n        flv.on('error', errorHandle)\n      }\n      if (hls) {\n        hls.on('hlsError', errorHandle)\n      }\n    } catch (e) {\n      //\n    }\n\n    if (isHistory) {\n      //历史视频切换播放索引时清除错误次数\n      event.on(EventName.CHANGE_PLAY_INDEX, clearErrorTimer)\n      //历史视频主动清除错误次数\n      event.on(EventName.CLEAR_ERROR_TIMER, clearErrorTimer)\n    }\n    event.addEventListener('error', errorHandle, false)\n    //获取video状态清除错误状态\n    event.addEventListener('canplay', reloadSuccess, false)\n\n    return () => {\n      try {\n        if (flv) {\n          flv.off('error', errorHandle)\n        }\n        if (hls) {\n          hls.off('hlsError', errorHandle)\n        }\n      } catch (e) {\n        console.warn(e)\n      }\n      if (isHistory) {\n        event.off(EventName.CHANGE_PLAY_INDEX, clearErrorTimer)\n        event.off(EventName.CLEAR_ERROR_TIMER, clearErrorTimer)\n      }\n      event.removeEventListener('error', errorHandle, false)\n      event.removeEventListener('canplay', reloadSuccess, false)\n    }\n  }, [event, flv, hls, errorTimer])\n\n  useEffect(() => {\n    if (errorTimer === 0) {\n      return\n    }\n    if (errorTimer > errorReloadTimer) {\n      isHistory ? changePlayIndex(playIndex + 1) : event.emit(EventName.RELOAD_FAIL)\n      api.unload()\n      return\n    }\n\n    console.warn(`视频播放出错，正在进行重连${errorTimer}`)\n    reloadTimer.current = setTimeout(() => {\n      event.emit(EventName.ERROR_RELOAD, errorTimer, ...errorInfo.current)\n      api.reload(true)\n    }, 2 * 1000)\n\n    return () => {\n      clearTimeout(reloadTimer.current)\n    }\n  }, [errorTimer, api, event, flv, hls])\n\n  return <></>\n}\n\nexport default ErrorEvent\n","import React from 'react'\nimport { computedBound } from '../util'\nimport PropTypes from 'prop-types'\n\nclass DragEvent extends React.Component {\n  constructor(props) {\n    super(props)\n    const { playContainer } = props\n\n    this.dragDom = playContainer.querySelector('.player-mask-layout')\n    this.position = {\n      start: [0, 0],\n      end: [0, 0]\n    }\n  }\n  componentDidMount() {\n    this.dragDom.addEventListener('mousedown', this.openDrag)\n    this.props.event.addEventListener('transform', this.transformChange, true)\n  }\n  componentWillUnmount() {\n    this.dragDom.removeEventListener('mousedown', this.openDrag)\n  }\n  openDrag = e => {\n    this.position.start = [e.pageX, e.pageY]\n    this.dragDom.addEventListener('mousemove', this.moveChange)\n    document.body.addEventListener('mouseup', this.stopDrag)\n  }\n  moveChange = e => {\n    const { api } = this.props\n    const currentPosition = api.getPosition()\n    this.position.end = [e.pageX, e.pageY]\n    const x = currentPosition[0] + (this.position.end[0] - this.position.start[0])\n    const y = currentPosition[1] + (this.position.end[1] - this.position.start[1])\n    const position = [x, y]\n    api.setPosition(position)\n    this.position.start = [e.pageX, e.pageY]\n  }\n  stopDrag = () => {\n    this.dragDom.removeEventListener('mousemove', this.moveChange)\n    document.body.removeEventListener('mouseup', this.stopDrag)\n    this.transformChange()\n  }\n  transformChange = () => {\n    const { api } = this.props\n    let position = computedBound(this.dragDom, api.getPosition(), api.getScale())\n    position && api.setPosition(position, true)\n  }\n\n  render() {\n    return null\n  }\n}\n\nDragEvent.propTypes = {\n  api: PropTypes.object,\n  event: PropTypes.object,\n  playContainer: PropTypes.node,\n  playerProps: PropTypes.object\n}\nexport default DragEvent\n","\r\nimport lcStore from \"./url/lcStore\";\r\nimport { JSONP } from '../util';\r\n\r\nclass lcStoreService {\r\n  /**\r\n   * @desc 获取视频流接口\r\n   */\r\n  // uri=<pull_uri>&resolution=<resolution>&bitrate=<bitrate>&key=<key>\r\n   getTranscodingStream(data) {\r\n\r\n  } \r\n\r\n  /**\r\n   * 修改视频流接口\r\n   * @param {*} data \r\n   */\r\n\r\n   setStreamResolution(code){\r\n    // /video/v1/change?&resolution=<resolution>&bitrate=<bitrate>&key=<key>\r\n    let url = lcStore.setStreamResolution.value.replace('<resolution>',code) + '&key=a123'\r\n    JSONP(url);\r\n  }\r\n}\r\nexport default new lcStoreService();\r\n","import { fullscreen, isFullscreen, exitFullscreen } from './util'\nimport EventName from './event/eventName'\nimport lcStore from \"./service/lcStore\";\n\nlet index = 0\nexport default class Api {\n  constructor({ video, playContainer, event, flv, hls, resolution, screenNum }) {\n    this.player = video\n    this.playContainer = playContainer\n    this.flv = flv\n    this.hls = hls\n    this.event = event\n    this.scale = 1\n    this.position = [0, 0]\n    // 分辨率\n    this.resolution = resolution\n    // 分屏数 其他模式为空\n    this.screenNum = screenNum || 0\n  }\n  /**\n   * 播放器销毁后 动态跟新api下的flv，hls对象\n   * @param {*} param0\n   */\n  updateChunk({ flv, hls }) {\n    this.flv = flv\n    this.hls = hls\n  }\n  /**\n   * 全屏\n   */\n  requestFullScreen() {\n    if (!isFullscreen(this.playContainer)) {\n      fullscreen(this.playContainer)\n    }\n  }\n  /**\n   * 退出全屏\n   */\n  cancelFullScreen() {\n    if (isFullscreen(this.playContainer)) {\n      exitFullscreen()\n    }\n  }\n  play() {\n    if (this.player.paused) {\n      this.player.play()\n    }\n  }\n  pause() {\n    if (!this.player.paused) {\n      this.player.pause()\n    }\n  }\n  destroy() {\n    this.player.removeAttribute('src')\n    this.flv?.pause()\n    this.unload()\n    if (this.flv) {\n      index++\n      this.flv.detachMediaElement && this.flv.detachMediaElement()\n      this.flv.destroy()\n    }\n    if (this.hls) {\n      index++\n      this.hls.destroy()\n    }\n\n    this.player = null\n    this.playContainer = null\n    this.flv = null\n    this.hls = null\n    this.event = null\n    this.scale = null\n    this.position = null\n    console.warn('destroy', index)\n  }\n\n  /**\n   * 设置currentTime实现seek\n   * @param {*} seconds\n   * @param {*} noEmit\n   */\n  seekTo(seconds, noEmit) {\n    const buffered = this.getBufferedTime()\n    if (this.flv && buffered[0] > seconds) {\n      this.flv.unload()\n      this.flv.load()\n    }\n    console.log(this.player)\n    if (this.player) {\n      console.log(this.player.currentTime)\n      this.player.currentTime = seconds\n      if (!noEmit) {\n        this.event.emit(EventName.SEEK, seconds)\n      }\n    }\n  }\n  success(notEmit){\n    !notEmit && this.event?.emit(EventName.RELOAD)\n  }\n  /**\n   * 视频重载\n   */\n  reload(notEmit) {\n    if (this.getCurrentTime !== 0) {\n      this.seekTo(0)\n    }\n    if (this.hls) {\n      this.hls.swapAudioCodec()\n      this.hls.recoverMediaError()\n    }\n    this.unload()\n    this.load()\n    this.play()\n    !notEmit && this.event.emit(EventName.RELOAD)\n  }\n  unload() {\n    this.flv && this.flv.unload()\n    this.hls && this.hls.stopLoad()\n  }\n  load() {\n    if (this.flv) {\n      this.flv.load()\n    }\n    if (this.hls) {\n      this.hls.startLoad()\n      this.hls.loadSource(this.hls.url)\n    }\n  }\n  setVolume(fraction) {\n    this.player.volume = fraction\n  }\n  mute() {\n    this.player.muted = true\n  }\n  unmute() {\n    this.player.muted = false\n  }\n\n  /**\n   * 开启画中画功能\n   */\n  requestPictureInPicture() {\n    if (this.player.requestPictureInPicture && document.pictureInPictureElement !== this.player) {\n      this.player.requestPictureInPicture()\n    }\n  }\n  /**\n   * 关闭画中画功能\n   */\n  exitPictureInPicture() {\n    if (document.exitPictureInPicture && document.pictureInPictureElement === this.player) {\n      document.exitPictureInPicture()\n    }\n  }\n\n  /**\n   * 设置播放速率\n   * @param {*} rate\n   */\n  setPlaybackRate(rate) {\n    this.player.playbackRate = rate\n  }\n  /**\n   * 获取视频总时长\n   */\n  getDuration() {\n    if (!this.player) return null\n    const { duration, seekable } = this.player\n    if (duration === Infinity && seekable.length > 0) {\n      return seekable.end(seekable.length - 1)\n    }\n    return duration\n  }\n  /**\n   * 获取当前播放时间\n   */\n  getCurrentTime() {\n    if (!this.player) return null\n    return this.player.currentTime\n  }\n\n  /**\n   * 获取缓存时间\n   */\n  getSecondsLoaded() {\n    return this.getBufferedTime()[1]\n  }\n\n  /**\n   * 获取当前视频缓存的起止时间\n   */\n  getBufferedTime() {\n    if (!this.player) return []\n    const { buffered } = this.player\n    if (buffered.length === 0) {\n      return [0, 0]\n    }\n    const end = buffered.end(buffered.length - 1)\n    const start = buffered.start(buffered.length - 1)\n    const duration = this.getDuration()\n    if (end > duration) {\n      return duration\n    }\n    return [start, end]\n  }\n  /**\n   * 快进通过seekTo方法实现\n   * @param {*} second\n   */\n  fastForward(second = 5) {\n    const duration = this.getDuration()\n    const currentTime = this.getCurrentTime()\n    const time = currentTime + second\n    this.seekTo(time > duration - 1 ? duration - 1 : time)\n  }\n\n  /**\n   * 快退通过seekTo方法实现\n   * @param {*} second\n   */\n  backWind(second = 5) {\n    const currentTime = this.getCurrentTime()\n    const time = currentTime - second\n    this.seekTo(time < 1 ? 1 : time)\n  }\n\n  /**\n   * 视频截屏方法\n   */\n  snapshot() {\n    let canvas = document.createElement('canvas')\n    let ctx = canvas.getContext('2d')\n    canvas.width = this.player.videoWidth\n    canvas.height = this.player.videoHeight\n    ctx.drawImage(this.player, 0, 0, canvas.width, canvas.height)\n    setTimeout(() => {\n      canvas.remove()\n      canvas = null\n      ctx = null\n    }, 200)\n    return canvas.toDataURL()\n  }\n  setScale(num, isRest = false) {\n    let scale = this.scale + num\n    if (isRest) {\n      scale = num\n    } else {\n      if (scale < 1) {\n        scale = 1\n      }\n      if (scale > 3) {\n        scale = 3\n      }\n    }\n    this.scale = scale\n    this.player.style.transition = 'transform 0.3s'\n    this.__setTransform()\n    this.event.emit(EventName.TRANSFORM)\n    setTimeout(() => {\n      this.player.style.transition = 'unset'\n    }, 1000)\n  }\n  getScale() {\n    return this.scale\n  }\n  /**\n   * 获取当前播放对象分辨率\n   * @returns \n   */\n  getResolution(){\n    return this.resolution\n  }\n  \n  /**\n   * 获取当前分屏数\n   * @returns \n   */\n  getCurrentScreen(){\n    return this.screenNum\n  }\n  \n  setPosition(position, isAnimate) {\n    this.position = position\n    this.player.style.transition = isAnimate ? 'transform 0.3s' : 'unset'\n    this.__setTransform()\n  }\n  getPosition() {\n    return this.position\n  }\n  __setTransform() {\n    this.player.style.transform = `scale(${this.scale}) translate(${this.position[0]}px,${this.position[1]}px)`\n  }\n  exeRatioCommand(ratio){\n    lcStore.setStreamResolution(ratio)\n  }\n  getApi() {\n    return {\n      play: this.play.bind(this),\n      reload: this.reload.bind(this),\n      success: this.success.bind(this),\n      pause: this.pause.bind(this),\n      seekTo: this.seekTo.bind(this),\n      setVolume: this.setVolume.bind(this),\n      mute: this.mute.bind(this),\n      unmute: this.unmute.bind(this),\n      requestPictureInPicture: this.requestPictureInPicture.bind(this),\n      exitPictureInPicture: this.exitPictureInPicture.bind(this),\n      setPlaybackRate: this.setPlaybackRate.bind(this),\n      destroy: this.destroy.bind(this),\n      getDuration: this.getDuration.bind(this),\n      getCurrentTime: this.getCurrentTime.bind(this),\n      getSecondsLoaded: this.getSecondsLoaded.bind(this),\n      getBufferedTime: this.getBufferedTime.bind(this),\n      fastForward: this.fastForward.bind(this),\n      backWind: this.backWind.bind(this),\n      snapshot: this.snapshot.bind(this),\n      requestFullScreen: this.requestFullScreen.bind(this),\n      cancelFullScreen: this.cancelFullScreen.bind(this),\n      __player: this.player,\n      flv: this.flv,\n      hls: this.hls,\n    }\n  }\n}\n","function getHiddenProp() {\n  const prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\n  // 如果hidden 属性是原生支持的，我们就直接返回\n  if (\"hidden\" in document) {\n    return \"hidden\";\n  }\n\n  // 其他的情况就循环现有的浏览器前缀，拼接我们所需要的属性\n  for (let i = 0; i < prefixes.length; i++) {\n    // 如果当前的拼接的前缀在 document对象中存在 返回即可\n    if (prefixes[i] + \"Hidden\" in document) {\n      return prefixes[i] + \"Hidden\";\n    }\n  }\n\n  // 其他的情况 直接返回null\n  return null;\n}\n\nfunction getVisibilityState() {\n  const prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\n\n  if (\"visibilityState\" in document) {\n    return \"visibilityState\";\n  }\n\n  for (let i = 0; i < prefixes.length; i++) {\n    if (prefixes[i] + \"VisibilityState\" in document) {\n      return prefixes[i] + \"VisibilityState\";\n    }\n  }\n  // 找不到返回 null\n  return null;\n}\n\nfunction visibilityState() {\n  return document[getVisibilityState()];\n}\n\nfunction addEventListener(listener) {\n  const visProp = getHiddenProp();\n  const evtname = visProp.replace(/[H|h]idden/, \"\") + \"visibilitychange\";\n  document.addEventListener(evtname, listener, false);\n}\n\nfunction removeEventListener(listener) {\n  const visProp = getHiddenProp();\n  const evtname = visProp.replace(/[H|h]idden/, \"\") + \"visibilitychange\";\n  document.removeEventListener(evtname, listener, false);\n}\n\nexport default {\n  addEventListener,\n  removeEventListener,\n  visibilityState\n};\n","import React, { useEffect } from 'react'\nimport BrowserTab from './event/browserTabEvent'\n\nfunction LiveHeart({ api }) {\n  useEffect(() => {\n    const browserTabChange = function() {\n      if (BrowserTab.visibilityState() === 'visible') {\n        const current = api.getCurrentTime()\n        const buffered = api.getSecondsLoaded()\n        if (buffered - current > 5) {\n          console.warn(`当前延时过大current->${current} buffered->${buffered}, 基于视频当前缓存时间更新当前播放时间 updateTime -> ${buffered - 2}`)\n          api.seekTo(buffered - 2 > 0 ? buffered - 2 : 0)\n        }\n      }\n    }\n    BrowserTab.addEventListener(browserTabChange)\n    return () => {\n      BrowserTab.removeEventListener(browserTabChange)\n    }\n  }, [api])\n  return <></>\n}\n\nexport default LiveHeart\n","import React, { useRef, useEffect, useState,useMemo } from 'react';\nimport VideoEvent from './event';\nimport { getVideoType, createFlvPlayer, createHlsPlayer, tansCodingToUrl, getScreenRate } from './util';\nimport ContrallerBar from './contraller_bar';\nimport ContrallerEvent from './event/contrallerEvent';\nimport VideoMessage, { NoSource } from './message';\nimport TimeLine from './time_line';\nimport ErrorEvent from './event/errorEvent';\nimport DragEvent from './event/dragEvent';\nimport Api from './api';\nimport LiveHeart from './live_heart';\nimport PropTypes from 'prop-types';\nimport './style/index.less';\n\nfunction SinglePlayer({ type, file, className, autoPlay, muted, poster, playsinline, loop, preload, children, onInitPlayer, screenNum, onVideoFn, ...props }) {\n  const playContainerRef = useRef(null);\n  const [playerObj, setPlayerObj] = useState(null);\n  const playerRef = useRef(null);\n  const rate = useMemo(() => getScreenRate(screenNum), [screenNum]);\n  const [resolution, setResolution] = useState(rate);\n\n  function onToken(token){\n    if(onVideoFn){\n      onVideoFn({\n        uuid: token\n      })\n    }\n  }\n\n  useEffect(\n    () => () => {\n      if (playerRef.current && playerRef.current.event) {\n        playerRef.current.event.destroy();\n      }\n      if (playerRef.current && playerRef.current.api) {\n        playerRef.current.api.destroy();\n      }\n      playerRef.current = null;\n    },\n    [file,resolution]\n  );\n  useEffect(() => {\n    if (!file) {\n      return;\n    }\n    const playerObject = {\n      playContainer: playContainerRef.current,\n      video: playContainerRef.current.querySelector('video'),\n      resolution: resolution,\n      screenNum: screenNum\n    };\n    let isInit = false;\n    const formartType = getVideoType(file);\n    if (formartType === 'flv' || type === 'flv') {\n      isInit = true;\n      try{\n        playerObject.flv = createFlvPlayer(playerObject.video, { ...props, file: tansCodingToUrl(file, resolution, onToken ) });\n      }catch(e) {\n        console.error(e)\n      }\n    }\n    if (formartType === 'm3u8' || type === 'hls') {\n      isInit = true;\n      try{\n        playerObject.hls = createHlsPlayer(playerObject.video, file);\n      }catch(e) {\n        console.error(e)\n      }\n    }\n    if (!isInit && (!['flv', 'm3u8'].includes(formartType) || type === 'native')) {\n      playerObject.video.src = file;\n    }\n    if (playerObject.event) {\n      playerObject.event.destroy();\n    }\n    playerObject.event = new VideoEvent(playerObject.video);\n    if (playerObject.api) {\n      playerObject.api.destroy();\n    }\n    playerObject.api = new Api(playerObject);\n    playerRef.current = playerObject;\n    setPlayerObj(() => playerObject);\n\n    if (onInitPlayer) {\n      onInitPlayer(Object.assign({}, playerObject.api.getApi(), playerObject.event.getApi()));\n    }\n  }, [file,resolution]);\n  return (\n    <div className={`lm-player-container ${className}`} ref={playContainerRef}>\n      <div className=\"player-mask-layout\">\n        <video autoPlay={autoPlay} preload={preload} muted={muted} poster={poster} controls={false} playsInline={playsinline} loop={loop} />\n      </div>\n      <VideoTools\n        playerObj={playerObj}\n        isLive={props.isLive}\n        key={file}\n        hideContrallerBar={props.hideContrallerBar}\n        errorReloadTimer={props.errorReloadTimer}\n        scale={props.scale}\n        switchResolution={(resolution)=>{\n          setResolution(resolution)\n        }}\n        snapshot={props.snapshot}\n        leftExtContents={props.leftExtContents}\n        leftMidExtContents={props.leftMidExtContents}\n        rightExtContents={props.rightExtContents}\n        rightMidExtContents={props.rightMidExtContents}\n        draggable={props.draggable}\n      />\n      {children}\n    </div>\n  );\n}\n\nfunction VideoTools({\n  playerObj,\n  draggable,\n  isLive,\n  hideContrallerBar,\n  scale,\n  snapshot,\n  switchResolution,\n  leftExtContents,\n  leftMidExtContents,\n  rightExtContents,\n  rightMidExtContents,\n  errorReloadTimer,\n}) {\n  if (!playerObj) {\n    return <NoSource />;\n  }\n  return (\n    <>\n      <VideoMessage api={playerObj.api} event={playerObj.event} />\n      {draggable && <DragEvent playContainer={playerObj.playContainer} api={playerObj.api} event={playerObj.event} />}\n      {!hideContrallerBar && (\n        <ContrallerEvent event={playerObj.event} playContainer={playerObj.playContainer}>\n          <ContrallerBar\n            api={playerObj.api}\n            event={playerObj.event}\n            playContainer={playerObj.playContainer}\n            video={playerObj.video}\n            snapshot={snapshot}\n            switchResolution={switchResolution}\n            rightExtContents={rightExtContents}\n            rightMidExtContents={rightMidExtContents}\n            scale={scale}\n            isHistory={false}\n            isLive={isLive}\n            leftExtContents={leftExtContents}\n            leftMidExtContents={leftMidExtContents}\n          />\n          {!isLive && <TimeLine api={playerObj.api} event={playerObj.event} />}\n        </ContrallerEvent>\n      )}\n      <ErrorEvent flv={playerObj.flv} hls={playerObj.hls} api={playerObj.api} event={playerObj.event} errorReloadTimer={errorReloadTimer} />\n      {isLive && <LiveHeart api={playerObj.api} />}\n    </>\n  );\n}\n\nSinglePlayer.propTypes = {\n  file: PropTypes.string.isRequired, //播放地址 必填\n  isLive: PropTypes.bool, //是否实时视频\n  errorReloadTimer: PropTypes.number, //视频错误重连次数\n  type: PropTypes.oneOf(['flv', 'hls', 'native']), //强制视频流类型\n  onInitPlayer: PropTypes.func,\n  draggable: PropTypes.bool,\n  hideContrallerBar: PropTypes.bool,\n  scale: PropTypes.bool,\n  muted: PropTypes.string,\n  autoPlay: PropTypes.bool,\n  playsInline: PropTypes.bool,\n  preload: PropTypes.string,\n  poster: PropTypes.string,\n  loop: PropTypes.bool,\n  snapshot: PropTypes.func,\n  className: PropTypes.string,\n  rightExtContents: PropTypes.element,\n  rightMidExtContents: PropTypes.element,\n  leftExtContents: PropTypes.element,\n  leftMidExtContents: PropTypes.element,\n  flvOptions: PropTypes.object,\n  flvConfig: PropTypes.object,\n  children: PropTypes.element,\n};\nSinglePlayer.defaultProps = {\n  isLive: true,\n  draggable: true,\n  scale: true,\n  errorReloadTimer: 5,\n  muted: 'muted',\n  autoPlay: true,\n  playsInline: false,\n  preload: 'auto',\n  loop: false,\n  hideContrallerBar: false,\n};\n\nexport default SinglePlayer;\n","export const computedIndexFormTime = (historyList, time) => {\n  let index = 0\n  try {\n    index = historyList.fragments.findIndex((v) => v.end > time)\n  } catch (e) {\n    console.error('historyList data error', historyList)\n  }\n  return index\n}\nexport const computedTimeAndIndex = (historyList, currentTime) => {\n  const index = computedIndexFormTime(historyList, currentTime)\n  let seekTime = 0\n  try {\n    const fragment = historyList.fragments[index]\n    if (!fragment) {\n      return [0, 0]\n    }\n    seekTime = currentTime - fragment.begin - 1\n  } catch (e) {\n    console.error('historyList data error', historyList)\n  }\n  return [index, seekTime]\n}\n","import React, { useState, useEffect, useMemo, useCallback } from 'react'\nimport IconFont from '../iconfont'\nimport Slider from '../slider'\nimport { dateFormat } from '../util'\nimport EventName from '../event/eventName'\nimport PropTypes from 'prop-types'\nimport { computedTimeAndIndex } from './utils'\nimport '../style/time-line.less'\n\nconst computedLineList = (historyList) => {\n  const duration = historyList.duration\n  return historyList.fragments.map((v) => {\n    return {\n      disabled: !v.file,\n      size: ((v.end - v.begin) / duration) * 100,\n    }\n  })\n}\n\nfunction TineLine({ event, api, visibel, historyList, playIndex, seekTo, defaultTime }) {\n  const [state, setState] = useState({ duration: 1, currentTime: defaultTime, buffered: 0, isEnd: false })\n\n  useEffect(() => setState((old) => ({ ...old, currentTime: defaultTime })), [defaultTime])\n\n  useEffect(() => {\n    const getDuration = () => setState((old) => ({ ...old, duration: api.getDuration() }))\n    const getCurrentTime = () => setState((old) => ({ ...old, currentTime: api.getCurrentTime(), buffered: api.getSecondsLoaded() }))\n    const getBuffered = () => setState((old) => ({ ...old, buffered: api.getSecondsLoaded() }))\n    const historyPlayEnd = () => setState((old) => ({ ...old, isEnd: true }))\n    const reload = () => setState((old) => ({ ...old, isEnd: false, currentTime: api.getCurrentTime() }))\n    const seekendPlay = () => api.play()\n\n    event.addEventListener('loadedmetadata', getDuration)\n    event.addEventListener('durationchange', getDuration)\n    event.addEventListener('timeupdate', getCurrentTime)\n    event.addEventListener('progress', getBuffered)\n    event.addEventListener('suspend', getBuffered)\n    event.addEventListener('seeked', seekendPlay)\n    event.on(EventName.HISTORY_PLAY_END, historyPlayEnd)\n    event.on(EventName.RELOAD, reload)\n\n    return () => {\n      event.removeEventListener('loadedmetadata', getDuration)\n      event.removeEventListener('durationchange', getDuration)\n      event.removeEventListener('timeupdate', getCurrentTime)\n      event.removeEventListener('progress', getBuffered)\n      event.removeEventListener('suspend', getBuffered)\n      event.removeEventListener('seeked', seekendPlay)\n      event.off(EventName.HISTORY_PLAY_END, historyPlayEnd)\n      event.off(EventName.RELOAD, reload)\n    }\n  }, [event, api])\n\n  const changePlayTime = useCallback(\n    (percent) => {\n      const currentTime = percent * historyList.duration //修正一下误差\n      const [index, time] = computedTimeAndIndex(historyList, currentTime)\n      console.log(index, time)\n      seekTo(currentTime, index)\n      setState((old) => ({ ...old, currentTime: time, isEnd: false }))\n    },\n    [historyList]\n  )\n\n  const renderTimeLineTips = (percent) => {\n    const currentTime = percent * historyList.duration * 1000\n    const date = dateFormat(historyList.beginDate + currentTime)\n    return <span>{date}</span>\n  }\n\n  const { currentTime, buffered, isEnd } = state\n  const lineList = useMemo(() => computedLineList(historyList), [historyList])\n  const currentLine = useMemo(() => lineList.filter((_, i) => i < playIndex).map((v) => v.size), [playIndex, lineList])\n  const currentIndexTime = useMemo(() => (currentLine.length === 0 ? 0 : currentLine.length > 1 ? currentLine.reduce((p, c) => p + c) : currentLine[0]), [currentLine])\n  const playPercent = useMemo(() => (currentTime / historyList.duration) * 100 + currentIndexTime, [currentIndexTime, historyList, currentTime])\n  const bufferedPercent = useMemo(() => (buffered / historyList.duration) * 100 + currentIndexTime, [historyList, currentIndexTime, buffered])\n\n  return (\n    <div className={`video-time-line-layout ${!visibel ? 'hide-time-line' : ''}`}>\n      <IconFont type=\"lm-player-PrevFast\" onClick={() => api.backWind()} className=\"time-line-action-item\" />\n      <Slider className=\"time-line-box\" currentPercent={isEnd ? '100' : playPercent} availablePercent={bufferedPercent} onChange={changePlayTime} renderTips={renderTimeLineTips}>\n        <>\n          {lineList.map((v, i) => {\n            const currentSizeLine = lineList.filter((v, i2) => i2 < i).map((v) => v.size)\n            const currentIndexSize = currentSizeLine.length === 0 ? 0 : currentSizeLine.length > 1 ? currentSizeLine.reduce((p, c) => p + c) : currentSizeLine[0]\n            return (\n              <div className={`history-time-line-item ${v.disabled ? 'history-time-line-disabled' : ''}`} key={i} style={{ width: `${v.size}%`, left: `${currentIndexSize}%` }} />\n            )\n          })}\n        </>\n      </Slider>\n      <IconFont type=\"lm-player-NextFast_Light\" onClick={() => api.fastForward()} className=\"time-line-action-item\" />\n    </div>\n  )\n}\n\nTineLine.propTypes = {\n  event: PropTypes.object,\n  api: PropTypes.object,\n  changePlayIndex: PropTypes.func,\n  playIndex: PropTypes.number,\n  historyList: PropTypes.array,\n  seekTo: PropTypes.func,\n  visibel: PropTypes.bool,\n}\n\nexport default TineLine\n","/**\n * history下使用 用户切换下个播放地址\n */\n\nimport React, { useEffect } from 'react'\nimport PropTypes from 'prop-types'\n\nfunction PlayEnd({ event, changePlayIndex, playIndex }) {\n  useEffect(() => {\n    const endedHandle = () => changePlayIndex(playIndex + 1)\n    event.addEventListener('ended', endedHandle, false)\n    return () => {\n      event.removeEventListener('ended', endedHandle, false)\n    }\n  }, [event, playIndex, changePlayIndex])\n  return <></>\n}\n\nPlayEnd.propTypes = {\n  event: PropTypes.object,\n  changePlayIndex: PropTypes.func,\n  playIndex: PropTypes.number,\n}\nexport default PlayEnd\n","import React, { useRef, useState, useCallback, useEffect, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport ContrallerBar from '../contraller_bar';\nimport VideoMessage, { NoSource } from '../message';\nimport HistoryTimeLine from './time_line_history';\nimport ErrorEvent from '../event/errorEvent';\nimport DragEvent from '../event/dragEvent';\nimport Api from '../api';\nimport VideoEvent from '../event';\nimport PlayEnd from './play_end';\nimport EventName from '../event/eventName';\nimport ContrallerEvent from '../event/contrallerEvent';\nimport { getVideoType, createFlvPlayer, createHlsPlayer, tansCodingToUrl, getScreenRate  } from '../util';\nimport { computedTimeAndIndex } from './utils';\n\nfunction HistoryPlayer({ type, historyList, defaultTime, className, autoPlay, muted, poster, playsinline, loop, preload, children, onInitPlayer, screenNum, ...props }) {\n  const playContainerRef = useRef(null);\n  const [playerObj, setPlayerObj] = useState(null);\n  const playerRef = useRef(null);\n  const [playStatus, setPlayStatus] = useState(() => computedTimeAndIndex(historyList, defaultTime));\n  const playIndex = useMemo(() => playStatus[0], [playStatus]);\n  const defaultSeekTime = useMemo(() => playStatus[1], [playStatus]);\n\n  const rate = useMemo(() => getScreenRate(screenNum), [screenNum]);\n  const [resolution, setResolution] = useState(rate);\n\n  const file = useMemo(() => {\n    let url;\n    try {\n      url = historyList.fragments[playIndex].file;\n    } catch (e) {\n      console.warn('未找到播放地址！', historyList);\n    }\n    return url;\n  }, [historyList, playIndex]);\n\n  /**\n   * 重写api下的seekTo方法\n   */\n  const seekTo = useCallback(\n    (currentTime) => {\n      const [index, seekTime] = computedTimeAndIndex(historyList, currentTime);\n      if (playerRef.current.event && playerRef.current.api) {\n        //判断是否需要更新索引\n        setPlayStatus((old) => {\n          if (old[0] !== index) {\n            return [index, seekTime];\n          } else {\n            playerRef.current.api.seekTo(seekTime, true);\n            return old;\n          }\n        });\n      }\n    },\n    [playIndex, historyList]\n  );\n\n  const changePlayIndex = useCallback(\n    (index) => {\n      if (index > historyList.fragments.length - 1) {\n        return playerRef.current && playerRef.current.event && playerRef.current.event.emit(EventName.HISTORY_PLAY_END);\n      }\n\n      if (!historyList.fragments[index].file) {\n        return changePlayIndex(index + 1);\n      }\n\n      if (playerRef.current && playerRef.current.event) {\n        playerRef.current.event.emit(EventName.CHANGE_PLAY_INDEX, index);\n      }\n      setPlayStatus([index, 0]);\n    },\n    [historyList]\n  );\n\n  const reloadHistory = useCallback(() => {\n    if (playStatus[0] === 0) {\n      playerRef.current.api.seekTo(defaultSeekTime);\n    }\n    setPlayStatus([0, 0]);\n\n    playerRef.current.event.emit(EventName.RELOAD);\n  }, []);\n\n  useEffect(() => {\n    if (!file) {\n      changePlayIndex(playIndex + 1);\n    }\n  }, [file, playIndex, historyList]);\n\n  useEffect(\n    () => () => {\n      if (playerRef.current && playerRef.current.event) {\n        playerRef.current.event.destroy();\n      }\n      if (playerRef.current && playerRef.current.api) {\n        playerRef.current.api.destroy();\n      }\n      playerRef.current = null;\n    },\n    [file]\n  );\n\n  useEffect(() => {\n    if (!file) {\n      return;\n    }\n    const playerObject = {\n      playContainer: playContainerRef.current,\n      video: playContainerRef.current.querySelector('video'),\n      resolution: resolution,\n      screenNum: screenNum,\n    };\n    let isInit = false;\n    const formartType = getVideoType(file);\n    if (formartType === 'flv' || type === 'flv') {\n      isInit = true;\n      playerObject.flv = createFlvPlayer(playerObject.video, { ...props,  file: tansCodingToUrl(file, resolution) });\n    }\n    if (formartType === 'm3u8' || type === 'hls') {\n      isInit = true;\n      playerObject.hls = createHlsPlayer(playerObject.video, file);\n    }\n    if (!isInit && (!['flv', 'm3u8'].includes(formartType) || type === 'native')) {\n      playerObject.video.src = file;\n    }\n    if (playerObject.event) {\n      playerObject.event.destroy();\n    }\n    playerObject.event = new VideoEvent(playerObject.video);\n    if (playerObject.api) {\n      playerObject.api.destroy();\n    }\n    playerObject.api = new Api(playerObject);\n    playerRef.current = playerObject;\n    setPlayerObj(playerObject);\n    if (defaultSeekTime) {\n      playerObject.api.seekTo(defaultSeekTime);\n    }\n    if (onInitPlayer) {\n      onInitPlayer(Object.assign({}, playerObject.api.getApi(), playerObject.event.getApi(), { seekTo, changePlayIndex, reload: reloadHistory }));\n    }\n  }, [historyList, file]);\n\n  return (\n    <div className={`lm-player-container ${className}`} ref={playContainerRef}>\n      <div className=\"player-mask-layout\">\n        <video autoPlay={autoPlay} preload={preload} muted={muted} poster={poster} controls={false} playsInline={playsinline} loop={loop} />\n      </div>\n      <VideoTools\n        defaultTime={defaultSeekTime}\n        playerObj={playerObj}\n        isLive={props.isLive}\n        hideContrallerBar={props.hideContrallerBar}\n        errorReloadTimer={props.errorReloadTimer}\n        scale={props.scale}\n        snapshot={props.snapshot}\n        leftExtContents={props.leftExtContents}\n        leftMidExtContents={props.leftMidExtContents}\n        rightExtContents={props.rightExtContents}\n        rightMidExtContents={props.rightMidExtContents}\n        draggable={props.draggable}\n        changePlayIndex={changePlayIndex}\n        reloadHistory={reloadHistory}\n        historyList={historyList}\n        playIndex={playIndex}\n        seekTo={seekTo}\n        key={file}\n      />\n      {children}\n    </div>\n  );\n}\n\nfunction VideoTools({\n  playerObj,\n  draggable,\n  isLive,\n  hideContrallerBar,\n  scale,\n  snapshot,\n  leftExtContents,\n  leftMidExtContents,\n  rightExtContents,\n  rightMidExtContents,\n  errorReloadTimer,\n  changePlayIndex,\n  reloadHistory,\n  historyList,\n  seekTo,\n  playIndex,\n  defaultTime,\n}) {\n  if (!playerObj) {\n    return <NoSource />;\n  }\n  return (\n    <>\n      <VideoMessage api={playerObj.api} event={playerObj.event} />\n      {draggable && <DragEvent playContainer={playerObj.playContainer} api={playerObj.api} event={playerObj.event} />}\n      {!hideContrallerBar && (\n        <ContrallerEvent event={playerObj.event} playContainer={playerObj.playContainer}>\n          <ContrallerBar\n            api={playerObj.api}\n            event={playerObj.event}\n            playContainer={playerObj.playContainer}\n            video={playerObj.video}\n            snapshot={snapshot}\n            rightExtContents={rightExtContents}\n            rightMidExtContents={rightMidExtContents}\n            scale={scale}\n            isHistory={true}\n            isLive={isLive}\n            leftExtContents={leftExtContents}\n            leftMidExtContents={leftMidExtContents}\n            reloadHistory={reloadHistory}\n          />\n          <HistoryTimeLine\n            defaultTime={defaultTime}\n            changePlayIndex={changePlayIndex}\n            historyList={historyList}\n            playIndex={playIndex}\n            seekTo={seekTo}\n            api={playerObj.api}\n            event={playerObj.event}\n          />\n        </ContrallerEvent>\n      )}\n      <ErrorEvent\n        changePlayIndex={changePlayIndex}\n        playIndex={playIndex}\n        isHistory={true}\n        flv={playerObj.flv}\n        hls={playerObj.hls}\n        api={playerObj.api}\n        event={playerObj.event}\n        errorReloadTimer={errorReloadTimer}\n      />\n      <PlayEnd event={playerObj.event} changePlayIndex={changePlayIndex} playIndex={playIndex} />\n    </>\n  );\n}\n\nHistoryPlayer.propTypes = {\n  historyList: PropTypes.object.isRequired, //播放地址 必填\n  errorReloadTimer: PropTypes.number, //视频错误重连次数\n  type: PropTypes.oneOf(['flv', 'hls', 'native']), //强制视频流类型\n  onInitPlayer: PropTypes.func,\n  isDraggable: PropTypes.bool,\n  isScale: PropTypes.bool,\n  muted: PropTypes.string,\n  autoPlay: PropTypes.bool,\n  playsInline: PropTypes.bool,\n  preload: PropTypes.string,\n  poster: PropTypes.string,\n  loop: PropTypes.bool,\n  defaultTime: PropTypes.number,\n  className: PropTypes.string,\n  playsinline: PropTypes.bool,\n  children: PropTypes.any,\n  autoplay: PropTypes.bool,\n  rightExtContents: PropTypes.element,\n  rightMidExtContents: PropTypes.element,\n  leftExtContents: PropTypes.element,\n  leftMidExtContents: PropTypes.element,\n  flvOptions: PropTypes.object,\n  flvConfig: PropTypes.object,\n};\nHistoryPlayer.defaultProps = {\n  draggable: true,\n  scale: true,\n  errorReloadTimer: 5,\n  muted: 'muted',\n  autoPlay: true,\n  playsInline: false,\n  preload: 'auto',\n  loop: false,\n  defaultTime: 0,\n  historyList: { beginDate: 0, duration: 0, fragments: [] },\n};\n\nexport default HistoryPlayer;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Player from \"./player\";\nimport HistoryPlayer from \"./history\";\n\nexport function createPlayer({ container, children, onInitPlayer, ...props }) {\n  ReactDOM.render(\n    <Player\n      {...props}\n      onInitPlayer={player => {\n        player.destroy = function() {\n          ReactDOM.unmountComponentAtNode(container);\n        };\n        onInitPlayer && onInitPlayer(player);\n      }}\n    >\n      {children}\n    </Player>,\n    container\n  );\n}\nexport function createHistoryPlayer({ container, children, onInitPlayer, ...props }) {\n  ReactDOM.render(\n    <HistoryPlayer\n      {...props}\n      onInitPlayer={player => {\n        player.destroy = function() {\n          ReactDOM.unmountComponentAtNode(container);\n        };\n        onInitPlayer && onInitPlayer(player);\n      }}\n    >\n      {children}\n    </HistoryPlayer>,\n    container\n  );\n}\n"],"names":["VideoEventInstance","constructor","video","events","playerEvents","on","eventName","handle","listener","push","type","addEventListener","removeEventListener","index","findIndex","v","splice","emit","data","forEach","off","getApi","bind","destroy","Object","keys","key","fn","hostUrl","getTranscodingStream","value","label","actionName","setStreamResolution","GL_CACHE","DM","SR","LOCAL_PORT","findVideoAttribute","val","kv","ens","getVideoRatio","createHlsPlayer","file","Hls","player","liveDurationInfinity","levelLoadingTimeOut","fragLoadingTimeOut","enableWorker","loadSource","attachMedia","createFlvPlayer","options","flvOptions","flvConfig","flvjs","isSupported","createPlayer","assign","url","enableStashBuffer","stashInitialSize","cors","seekType","isLive","attachMediaElement","load","getVideoType","indexOf","timeStamp","second_time","time","Math","ceil","second","min","floor","hour","dateFormat","timetemp","date","Date","YYYY","getFullYear","DD","getDate","MM","getMonth","hh","getHours","mm","getMinutes","ss","getSeconds","fullscreen","element","requestFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","exitFullscreen","document","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","isFullscreen","ele","fullscreenElement","msFullscreenElement","mozFullScreenElement","webkitFullscreenElement","fullScreenListener","isAdd","fullscreenchange","funcName","fullScreenEvents","map","computedBound","currentPosition","scale","eleRect","getBoundingClientRect","w","width","h","height","lx","ly","x","y","JSONP","script","createElement","functionName","parseInt","random","window","result","amount","innerText","src","body","appendChild","onload","e","removeChild","onerror","console","warn","genuuid","tid","hexDigits","i","substr","join","name","resolution","bitrate","show","getScreenRate","num","videoRatio","getGlobalCache","strS","localStorage","getItem","playerOptions","JSON","parse","error","BASE64","input","_keyStr","_utf8_encode","string","replace","utftext","n","length","c","charCodeAt","String","fromCharCode","output","chr1","chr2","chr3","enc1","enc2","enc3","enc4","isNaN","charAt","unicodeToBase64","s","btoa","getLocalPort","tansCodingToUrl","onToken","param1","param2","param3","url_info","port","pull_uri","replaceAll","log","lcStore","IconFont","className","props","React","propTypes","PropTypes","Slider","Component","renderSliderTips","renderTips","clearTimeout","timer","setTimeout","top","layoutDom","tipsX","pageX","percent","setState","tipsY","showTips","tempValue","hideSliderTips","cancelPropagation","stopPropagation","startDrag","dragFlag","moveChange","stopDrag","computedPositionForEvent","state","onChange","changeCurrentValue","event","sliderDomRef","createRef","lineDom","dragDom","currentPercent","UNSAFE_componentWillReceiveProps","nextProps","componentDidMount","current","querySelector","componentWillUnmount","dx","render","availablePercent","children","left","number","seekTo","func","any","defaultProps","Tips","getContainer","visibel","style","useRef","useEffect","box","ReactDOM","createPortal","bool","Bar","RELOAD","RELOAD_FAIL","RELOAD_SUCCESS","ERROR","ERROR_RELOAD","HISTORY_PLAY_END","SEEK","TRANSFORM","CHANGE_PLAY_INDEX","HIDE_CONTRALLER","SHOW_CONTRALLER","CLEAR_ERROR_TIMER","LeftBar","api","isHistory","reloadHistory","leftExtContents","leftMidExtContents","openSliderVolume","setOpenSliderVolume","useState","dep","setDep","now","updateRender","paused","useMemo","statusIconClassName","statusText","volumeVal","muted","volume","volumeIcon","volumePercent","sliderClassName","changePlayStatus","useCallback","play","pause","mutedChantgeStatus","unmute","mute","onChangeVolume","setVolume","parseFloat","toFixed","reload","EventName","precent","round","object","playerProps","node","RightBar","playContainer","snapshot","rightExtContents","rightMidExtContents","switchResolution","ratioValue","viewText","setViewText","getResolution","isSwithRate","update","isfull","isFullScreen","cancelFullScreen","getCurrentScreen","setScale","args","position","getPosition","getScale","setPosition","setRatio","item","ScaleBar","ContrallerBar","ContrallerEvent","setVisibel","showContraller","hideContraller","Children","child","isValidElement","cloneElement","VideoMessage","status","errorTimer","loading","message","openStartLoading","old","openWaitLoading","openSeekLoading","closeLoading","errorReload","reloadFail","reloadSuccess","playEnd","NoSource","fontSize","TineLine","duration","currentTime","buffered","getDuration","getCurrentTime","getSecondsLoaded","getBuffered","seekendPlay","playPercent","bufferedPercent","changePlayTime","renderTimeLineTips","backWind","fastForward","ErrorEvent","errorReloadTimer","flv","hls","changePlayIndex","playIndex","setErrorTime","errorInfo","reloadTimer","errorHandle","msg","includes","details","success","clearErrorTimer","unload","DragEvent","openDrag","start","pageY","end","transformChange","lcStoreService","code","Api","screenNum","updateChunk","removeAttribute","detachMediaElement","seconds","noEmit","getBufferedTime","notEmit","swapAudioCodec","recoverMediaError","stopLoad","startLoad","fraction","requestPictureInPicture","pictureInPictureElement","exitPictureInPicture","setPlaybackRate","rate","playbackRate","seekable","Infinity","canvas","ctx","getContext","videoWidth","videoHeight","drawImage","remove","toDataURL","isRest","transition","__setTransform","isAnimate","transform","exeRatioCommand","ratio","__player","getHiddenProp","prefixes","getVisibilityState","visibilityState","visProp","evtname","LiveHeart","browserTabChange","BrowserTab","SinglePlayer","autoPlay","poster","playsinline","loop","preload","onInitPlayer","onVideoFn","playContainerRef","playerObj","setPlayerObj","playerRef","setResolution","token","uuid","playerObject","isInit","formartType","VideoEvent","VideoTools","hideContrallerBar","draggable","TimeLine","isRequired","oneOf","playsInline","computedIndexFormTime","historyList","fragments","computedTimeAndIndex","seekTime","fragment","begin","computedLineList","disabled","size","defaultTime","isEnd","historyPlayEnd","beginDate","lineList","currentLine","filter","_","currentIndexTime","reduce","p","currentSizeLine","i2","currentIndexSize","array","PlayEnd","endedHandle","HistoryPlayer","playStatus","setPlayStatus","defaultSeekTime","HistoryTimeLine","isDraggable","isScale","autoplay","container","Player","unmountComponentAtNode","createHistoryPlayer"],"mappings":"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"}