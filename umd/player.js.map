{"version":3,"file":"player.js","sources":["../src/event/index.js","../src/service/httpx.js","../src/service/url/lcStore.js","../src/base64.js","../src/constant.js","../src/util.js","../src/iconfont.js","../src/slider.js","../src/contraller_bar/bar.js","../src/event/eventName.js","../src/contraller_bar/left_bar.js","../src/contraller_bar/colorPicker.js","../src/contraller_bar/resolutionPicker.js","../src/contraller_bar/right_bar.js","../src/contraller_bar/scale_bar.js","../src/contraller_bar/index.js","../src/event/contrallerEvent.js","../src/message.js","../src/time_line.js","../src/event/errorEvent.js","../src/event/dragEvent.js","../src/service/lcStore.js","../src/api.js","../src/event/browserTabEvent.js","../src/live_heart.js","../src/player.js","../src/history/message.js","../src/history/utils.js","../src/history/time_line_history.js","../src/history/errorEvent.js","../src/history/play_end.js","../src/history/hPlayer.js","../src/history/time_fs_history.js","../src/history/fPlayer.js","../src/history/index.js","../src/createPlayer.js"],"sourcesContent":["class VideoEventInstance {\n  constructor(video) {\n    this.video = video\n    this.events = {}\n    this.playerEvents = {}\n  }\n  on(eventName, handle) {\n    this.events && this.events[eventName]\n      ? this.events[eventName].listener.push(handle)\n      : (this.events[eventName] = { type: eventName, listener: [handle] })\n  }\n  addEventListener(eventName, handle) {\n    if (this.video) {\n      this.playerEvents[eventName] ? this.playerEvents[eventName].push(handle) : (this.playerEvents[eventName] = [handle])\n      this.video.addEventListener(eventName, handle, false)\n    }\n  }\n  removeEventListener(eventName, handle) {\n    if (this.video) {\n      if (!this.playerEvents || !this.playerEvents[eventName]) {\n        return\n      }\n      let index = this.playerEvents[eventName].findIndex(v => v === handle)\n      index > -1 && this.playerEvents[eventName].splice(index, 1)\n      this.video.removeEventListener(eventName, handle, false)\n    }\n  }\n  emit(eventName, ...data) {\n    if (!this.events || !this.events[eventName]) {\n      return\n    }\n    this.events[eventName].listener.forEach(v => {\n      v(...data)\n    })\n  }\n  off(eventName, handle) {\n    if (!this.events || !this.events.eventName) {\n      return\n    }\n    let index = this.events[eventName].listener.findIndex(v => v === handle)\n    index > -1 && this.events[eventName].listener.splice(index, 1)\n  }\n  getApi() {\n    return { on: this.on.bind(this), off: this.off.bind(this), emit: this.emit.bind(this), addEventListener: this.addEventListener.bind(this), removeEventListener: this.removeEventListener.bind(this) }\n  }\n  destroy() {\n    Object.keys(this.playerEvents).forEach(key => {\n      this.playerEvents[key].forEach(fn => {\n        this.removeEventListener(key, fn)\n      })\n    })\n    this.playerEvents = {}\n    this.events = {}\n    this.video = null\n  }\n}\n\nexport default VideoEventInstance\n","/* global module,define,console */\r\n    /**\r\n     * Extend Object\r\n     *\r\n     * @param {object} dist\r\n     * @param {object} source\r\n     * @return {object} dist\r\n     */\r\n\r\n    function extend (dist, source) {\r\n        for (var key in source) {\r\n            if (source.hasOwnProperty(key)) {\r\n                dist[key] = source[key];\r\n            }\r\n        }\r\n\r\n        return dist;\r\n    }\r\n\r\n    /**\r\n     * Query url & strings build\r\n     *\r\n     * @param  {string} url  request url\r\n     * @param  {object} data request datas\r\n     * @return {object}\r\n     */\r\n\r\n    function urlBuild(url, data) {\r\n\r\n        if (typeof data === \"object\") {\r\n            var temp = [];\r\n\r\n            for (var i in data) {\r\n                temp.push(i + \"=\" + encodeURIComponent(data[i]));\r\n            }\r\n\r\n            data = temp.join(\"&\");\r\n        }\r\n\r\n        url = url + ( (url.indexOf(\"?\") < 0) ? ( (data === \"\" || !data) ? \"\" : \"?\" ) : (data === \"\" || !data) ? \"\" : \"&\") + data;\r\n\r\n        return {\r\n            url  : url,\r\n            data : data\r\n        };\r\n    }\r\n\r\n    var httpx = {\r\n        version : \"0.3.1\",\r\n\r\n        useXDR : false,\r\n\r\n        logPrefix : \"HTTPx.js:\",\r\n\r\n        /**\r\n         * Create XHR object\r\n         *\r\n         * @param  {boolean} [xdomain=false]\r\n         * @return {object}  xhr              XMLHttpRequest or XDomainRequest\r\n         */\r\n\r\n        xhr : function(xdomain) {\r\n            if (typeof xdomain === \"undefined\") {\r\n                xdomain = false;\r\n            }\r\n\r\n            try {\r\n                var xhr = xdomain ? new XDomainRequest() : new XMLHttpRequest(); // IE7+, XMLHttpRequest Level 1\r\n\r\n                return xhr;\r\n            } catch (e) {\r\n                console.error(e);\r\n\r\n                return null;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get default's configs\r\n         *\r\n         * @param  {string}         name\r\n         * @return {string|object}\r\n         */\r\n\r\n        defaults : function(name) {\r\n\r\n            name = name || \"\";\r\n\r\n            var $defaults = {\r\n                debug         : false,\r\n                async         : true,\r\n                timeout       : 3000,\r\n                method        : \"GET\",\r\n                url           : \"\",\r\n                data          : \"\",\r\n                dataType      : \"text\",\r\n                headers       : {},\r\n                contentType   : \"text/plain; charset=UTF-8\",\r\n                jsonp         : \"callback\",  // for query string\r\n                xhrFields     : { //  like jQuery xhrFields options\r\n                    withCredentials : false\r\n                },\r\n                sendBefore    : function(xhr) {\r\n                    return xhr; // or return this, this == xhr\r\n                },\r\n                success       : function() {},\r\n                error         : function(method, url) {\r\n                    console.error(\"HTTP Request Error: \", method, url, this.status + \" (\" + ((this.statusText) ? this.statusText : \"Unkown Error / Timeout\") + \")\");\r\n                },\r\n                ontimeout     : function(method, url) {\r\n                    console.error(\"HTTP Request Timeout: \", method, url, this.status + \" (\" + ((this.statusText) ? this.statusText : \"Timeout\") + \")\");\r\n                }\r\n            };\r\n\r\n            return (name !== \"\" && typeof name === \"string\") ? $defaults[name] : $defaults;\r\n        },\r\n\r\n        /**\r\n         * check need using XDomainRequest\r\n         *\r\n         * @param   {string}   url\r\n         * @returns {boolean}  useXDR\r\n         */\r\n\r\n        needUseXDomainRequest : function (url) {\r\n            var useXDR = false;\r\n\r\n            // For IE8 & IE9\r\n            if (/^((http:|https:)?\\/\\/)/.test(url) && location.hostname.indexOf(url) < 0) {\r\n                if (window.XDomainRequest) {\r\n                    useXDR = true;\r\n                }\r\n            }\r\n\r\n            return useXDR;\r\n        },\r\n\r\n        /**\r\n         * XHR requester\r\n         *\r\n         * @param  {object}                  [options={}]  request options\r\n         * @return {XMLHttpRequest|boolean}  xhr           XMLHttpRequest Or XDomainRequest Object\r\n         */\r\n\r\n        request : function(options) {\r\n            options      = options  || {};\r\n\r\n            var settings = extend(this.defaults(), options);\r\n\r\n            settings.method = settings.method.toUpperCase();\r\n\r\n            var useXDR  = false;\r\n            var url     = settings.url;\r\n            var data    = settings.data;\r\n            var method  = settings.method;\r\n            var urlData = urlBuild(url, data);\r\n\r\n            if (settings.debug) {\r\n                console.log(this.logPrefix + \" settings =>\", settings);\r\n            }\r\n\r\n            data = urlData.data;\r\n\r\n            if (method === \"GET\") {\r\n                url = urlData.url;\r\n            }\r\n\r\n            if (this.needUseXDomainRequest(url)) {\r\n                useXDR = true;\r\n\r\n                if (settings.debug) {\r\n                    console.warn(this.logPrefix + \" Cross domain request using XDomainRequest.\");\r\n                    console.warn(location.hostname + \" => \" + url);\r\n                }\r\n\r\n                if (!window.addEventListener && !/MSIE 8\\.0/.test(navigator.userAgent)) {\r\n                    console.error(this.logPrefix + \" Your browser can'nt support cross domain request => \" + url + \".\");\r\n\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            var xhr = this.xhr(useXDR);\r\n\r\n            if (!xhr) {\r\n                return false;\r\n            }\r\n\r\n            if (typeof settings.xhrFields.withCredentials !== \"undefined\") {\r\n                xhr.withCredentials = settings.xhrFields.withCredentials;\r\n            }\r\n\r\n            var success = function () {\r\n                var result;\r\n\r\n                switch (settings.dataType) {\r\n                    case \"json\" :\r\n                        result = JSON.parse(xhr.responseText);\r\n                        break;\r\n                    case \"xml\":\r\n                        result = xhr.responseXML;\r\n                        break;\r\n                    default:\r\n                        result = xhr.responseText;\r\n                        break;\r\n                }\r\n\r\n                settings.success.bind(xhr)(result);\r\n            };\r\n\r\n            var readyStateChange = function(e) {\r\n                if ( xhr.readyState === 4 ) {\r\n                    if ( xhr.status === 200 || xhr.status === 304) {\r\n                        success();\r\n                    } else {\r\n                        settings.error.bind(xhr)(method, url, e);\r\n                    }\r\n                }\r\n            };\r\n\r\n            if (useXDR) {\r\n                xhr.onload  = success;\r\n\r\n                xhr.onerror = function(e) {\r\n                    settings.error.bind(xhr)(method, url, e);\r\n                };\r\n\r\n                xhr.ontimeout = function(e) {\r\n                    settings.ontimeout.bind(xhr)(method, url, e);\r\n                };\r\n\r\n                if (method !== \"GET\" && method !== \"OPTIONS\") {\r\n                    method = \"POST\";\r\n                } else if (method === \"OPTIONS\") {\r\n                    method = \"GET\";\r\n                }\r\n            } else {\r\n                xhr.addEventListener(\"readystatechange\", readyStateChange);\r\n\r\n                xhr.addEventListener(\"error\", function(e) {\r\n                    settings.error.bind(xhr)(method, url, e);\r\n                });\r\n\r\n                xhr.addEventListener(\"timeout\", function(e) {\r\n                    settings.ontimeout.bind(xhr)(method, url, e);\r\n                });\r\n            }\r\n\r\n            xhr.open(method, url, settings.async);\r\n\r\n            var contentType = settings.contentType;\r\n\r\n            if (!useXDR) {\r\n                if (method !== \"GET\") {\r\n                    contentType = \"application/x-www-form-urlencoded\";\r\n                }\r\n\r\n                xhr.setRequestHeader(\"Content-type\", contentType);\r\n\r\n                // Custom http headers, you can override default's Content-Type header.\r\n                for (var key2 in settings.headers) {\r\n                    xhr.setRequestHeader(key2, settings.headers[key2]);\r\n                }\r\n            }\r\n\r\n            // New property\r\n            xhr.$request = {\r\n                url         : url,\r\n                method      : method,\r\n                dataType    : settings.dataType,\r\n                contentType : contentType,\r\n                headers     : settings.headers\r\n            };\r\n\r\n            // Compatibility v0.1.0~0.2.0\r\n            xhr.$url      = url;\r\n            xhr.$method   = method;\r\n            xhr.$dataType = settings.dataType;\r\n            xhr.timeout   = settings.timeout;\r\n\r\n            if (typeof settings.sendBefore === \"function\") {\r\n                // sendBefore for custom xhr fields\r\n                var _xhr = settings.sendBefore.bind(xhr)(xhr);\r\n\r\n                if (_xhr) {\r\n                    if (_xhr instanceof XMLHttpRequest ||\r\n                        (typeof XDomainRequest !== \"undefined\" && _xhr instanceof XDomainRequest)) {\r\n                        xhr = _xhr;\r\n                    }\r\n                }\r\n            }\r\n\r\n            xhr.send(data);\r\n\r\n            return xhr;\r\n        },\r\n\r\n        /**\r\n         * Execute request for short methods\r\n         *\r\n         * @param  {string}          method     HTTP method\r\n         * @param  {string|object}   url        request url or options k/v object\r\n         * @param  {object}          data       request data\r\n         * @param  {function}        callback   Success callback\r\n         * @param  {function}        error      Error callback\r\n         * @param  {object}          options    Request options\r\n         * @return {XMLHttpRequest}  xhr        XMLHttpRequest Or XDomainRequest Object\r\n         */\r\n\r\n        exec : function(method, url, data, callback, error, options) {\r\n            data     = data     || {};\r\n            callback = callback || function() {};\r\n            error    = error    || this.defaults(\"error\");\r\n            options  = options  || {};\r\n\r\n            if (typeof data === \"function\") {\r\n                error    = callback;\r\n                callback = data;\r\n                data     = \"\";\r\n            }\r\n\r\n            var defaults = {\r\n                url     : url,\r\n                method  : method,\r\n                data    : data,\r\n                success : callback,\r\n                error   : error\r\n            };\r\n\r\n            if (typeof url === \"object\") {\r\n                options = url;\r\n                options.method = method;\r\n            }\r\n\r\n            return this.request(extend(defaults, options));\r\n        },\r\n\r\n        /**\r\n         * GET method\r\n         *\r\n         * @param  {string|object} url      request url or options k/v object\r\n         * @param  {object}        data     request datas\r\n         * @param  {function}      callback Success callback\r\n         * @param  {function}      error    Error callback\r\n         * @param  {object}        options  Request options\r\n         * @return {void}\r\n         */\r\n\r\n        get : function(url, data, callback, error, options) {\r\n            this.exec(\"GET\", url, data, callback, error, options);\r\n        },\r\n\r\n        /**\r\n         * POST method\r\n         *\r\n         * @param  {string|object} url      request url or options k/v object\r\n         * @param  {object}        data     request datas\r\n         * @param  {function}      callback Success callback\r\n         * @param  {function}      error    Error callback\r\n         * @param  {object}        options  Request options\r\n         * @return {void}\r\n         */\r\n\r\n        post : function(url, data, callback, error, options) {\r\n            this.exec(\"POST\", url, data, callback, error, options);\r\n        },\r\n\r\n        /**\r\n         * PUT method\r\n         *\r\n         * @param  {string|object} url      request url or options k/v object\r\n         * @param  {object}        data     request datas\r\n         * @param  {function}      callback Success callback\r\n         * @param  {function}      error    Error callback\r\n         * @param  {object}        options  Request options\r\n         * @return {void}\r\n         */\r\n\r\n        put : function(url, data, callback, error, options) {\r\n            this.exec(\"PUT\", url, data, callback, error, options);\r\n        },\r\n\r\n        /**\r\n         * PATCH method\r\n         *\r\n         * @param  {string|object} url      request url or options k/v object\r\n         * @param  {object}        data     request datas\r\n         * @param  {function}      callback Success callback\r\n         * @param  {function}      error    Error callback\r\n         * @param  {object}        options  Request options\r\n         * @return {void}\r\n         */\r\n\r\n        patch : function(url, data, callback, error, options) {\r\n            this.exec(\"PATCH\", url, data, callback, error, options);\r\n        },\r\n\r\n        /**\r\n         * DELETE method\r\n         *\r\n         * @param  {string|object} url      request url or options k/v object\r\n         * @param  {object}        data     request datas\r\n         * @param  {function}      callback Success callback\r\n         * @param  {function}      error    Error callback\r\n         * @param  {object}        options  Request options\r\n         * @return {void}\r\n         */\r\n\r\n        \"delete\" : function(url, data, callback, error, options) {\r\n            this.exec(\"DELETE\", url, data, callback, error, options);\r\n        },\r\n\r\n        /**\r\n         * Get json, link jQuery getJSON()\r\n         *\r\n         * @param  {string|object} url      request url or options k/v object\r\n         * @param  {object}        data     request datas\r\n         * @param  {function}      callback Success callback\r\n         * @param  {function}      error    Error callback\r\n         * @param  {object}        options  Request options\r\n         * @return {void}\r\n         */\r\n\r\n        json : function(url, data, callback, error, options) {\r\n            data     = data     || {};\r\n            callback = callback || function() {};\r\n            error    = error    || this.defaults(\"error\");\r\n            options  = options  || {};\r\n\r\n            if (typeof data === \"function\") {\r\n                error    = callback;\r\n                callback = data;\r\n                data     = \"\";\r\n            }\r\n\r\n            var defaults = {\r\n                url      : url,\r\n                dataType : \"json\",\r\n                method   : \"GET\",\r\n                data     : data,\r\n                success  : callback,\r\n                error    : error\r\n            };\r\n\r\n            if (typeof url === \"object\") {\r\n                options          = url;\r\n                options.method   = \"GET\";\r\n                options.dataType = \"json\";\r\n            }\r\n\r\n            this.request(extend(defaults, options));\r\n        },\r\n\r\n        /**\r\n         * Alias json()\r\n         *\r\n         * @param  {string|object} url      request url or options k/v object\r\n         * @param  {object}        data     request datas\r\n         * @param  {function}      callback Success callback\r\n         * @param  {function}      error    Error callback\r\n         * @param  {object}        options  Request options\r\n         * @return {void}\r\n         */\r\n\r\n        getJSON : function(url, data, callback, error, options) {\r\n            this.json(url, data, callback, error, options);\r\n        },\r\n\r\n        /**\r\n         * JSONP method\r\n         *\r\n         * @param  {string|object} url          request url or options k/v object\r\n         * @param  {object}        data         request datas\r\n         * @param  {function}      callback     Success callback\r\n         * @param  {string}        callbackName for query string name\r\n         * @return {void}\r\n         */\r\n\r\n        jsonp : function(url, data, callback, callbackName) {\r\n            callbackName = callbackName || \"callback\";\r\n\r\n            if (typeof data === \"function\") {\r\n                callbackName = callback;\r\n                callback     = data;\r\n                data         = \"\";\r\n            }\r\n\r\n            var urlData = urlBuild(url, data);\r\n\r\n            url  = urlData.url;\r\n            data = urlData.data;\r\n\r\n            var fn = \"__jsonp_\" + callbackName + (new Date()).getTime() + \"_\" + Math.floor(Math.random() * 100000) + \"__\";\r\n\r\n            url += ((url.indexOf(\"?\") < 0) ? \"?\" : \"&\") + callbackName + \"=\" + fn;\r\n\r\n            var evalJsonp = function(callback) {\r\n                return function(data) {\r\n\r\n                    if (typeof data === \"string\")\r\n                    {\r\n                        try {\r\n                            data = JSON.parse(data);\r\n                        } catch (e) {}\r\n                    }\r\n\r\n                    data = data || {};\r\n\r\n                    callback(data, url);\r\n                    window[fn] = null;\r\n                    document.body.removeChild(document.getElementById(fn));\r\n                };\r\n            };\r\n\r\n            window[fn] = evalJsonp(callback);\r\n\r\n            var script   = document.createElement(\"script\");\r\n            script.src   = url;\r\n            script.async = true;\r\n            script.id    = fn;\r\n            document.body.appendChild(script);\r\n        },\r\n\r\n        /**\r\n         * Get script file, like jQuery getScript()\r\n         *\r\n         * @param   {string}   src      javascript file path\r\n         * @param   {function} callback loaded callback function\r\n         * @returns {void}\r\n         */\r\n\r\n        getScript : function(src, callback) {\r\n            if (src === \"\") {\r\n                console.error(\"Error: Get script source can't be empty\");\r\n                return ;\r\n            }\r\n\r\n            callback   = callback || function() {};\r\n\r\n            var head   = document.getElementsByTagName(\"head\")[0];\r\n            var loaded = document.querySelectorAll(\"script[src=\\\"\"+src+\"\\\"]\");\r\n\r\n            if (loaded.length > 0) {\r\n                head.removeChild(loaded[0]);\r\n            }\r\n\r\n            var script  = document.createElement(\"script\");\r\n            script.type = \"text/javascript\";\r\n\r\n            script.onload = script.onreadystatechange = function() {\r\n                if (!script.readyState || /loaded|complete/.test(script.readyState) ) {\r\n                    script.onload = script.onreadystatechange = null;\r\n                    script        = undefined;\r\n                    callback();\r\n                }\r\n            };\r\n\r\n            script.src   = src;\r\n            script.async = true;\r\n\r\n            head.appendChild(script);\r\n        }\r\n    };\r\n\r\n\r\n    export default httpx;","const hostUrl = 'http://127.0.0.1';\r\n\r\nexport default {\r\n  getTranscodingStream: {\r\n    value: `${hostUrl}:<port>/video/v1/transcoding?uri=<pull_uri>`,\r\n    label: '获取视频流接口',\r\n    actionName: 'getTranscodingStream'\r\n  },\r\n  setStreamResolution:{\r\n    value: `${hostUrl}:<port>/video/v1/change?resolution=<resolution>`,\r\n    label: '修改视频流接口',\r\n    actionName: 'setStreamResolution'\r\n  }\r\n};\r\n","var BASE64_MAPPING = [\r\n  'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H',\r\n  'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',\r\n  'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X',\r\n  'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',\r\n  'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',\r\n  'o', 'p', 'q', 'r', 's', 't', 'u', 'v',\r\n  'w', 'x', 'y', 'z', '0', '1', '2', '3',\r\n  '4', '5', '6', '7', '8', '9', '+', '/'\r\n];\r\nvar URLSAFE_BASE64_MAPPING = [\r\n  'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H',\r\n  'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',\r\n  'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X',\r\n  'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',\r\n  'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',\r\n  'o', 'p', 'q', 'r', 's', 't', 'u', 'v',\r\n  'w', 'x', 'y', 'z', '0', '1', '2', '3',\r\n  '4', '5', '6', '7', '8', '9', '-', '_'\r\n];\r\n\r\nvar _toBinary = function (ascii) {\r\n  var binary = [];\r\n  while (ascii > 0) {\r\n      var b = ascii % 2;\r\n      ascii = Math.floor(ascii / 2);\r\n      binary.push(b);\r\n  }\r\n  binary.reverse();\r\n  return binary;\r\n};\r\n\r\nvar _toDecimal = function (binary) {\r\n  var dec = 0;\r\n  var p = 0;\r\n  for (var i = binary.length - 1; i >= 0; --i) {\r\n      var b = binary[i];\r\n      if (b == 1) {\r\n          dec += Math.pow(2, p);\r\n      }\r\n      ++p;\r\n  }\r\n  return dec;\r\n};\r\n\r\nvar _toUTF8Binary = function (c, binaryArray) {\r\n  var mustLen = (8 - (c + 1)) + ((c - 1) * 6);\r\n  var fatLen = binaryArray.length;\r\n  var diff = mustLen - fatLen;\r\n  while (--diff >= 0) {\r\n      binaryArray.unshift(0);\r\n  }\r\n  var binary = [];\r\n  var _c = c;\r\n  while (--_c >= 0) {\r\n      binary.push(1);\r\n  }\r\n  binary.push(0);\r\n  var i = 0, len = 8 - (c + 1);\r\n  for (; i < len; ++i) {\r\n      binary.push(binaryArray[i]);\r\n  }\r\n\r\n  for (var j = 0; j < c - 1; ++j) {\r\n      binary.push(1);\r\n      binary.push(0);\r\n      var sum = 6;\r\n      while (--sum >= 0) {\r\n          binary.push(binaryArray[i++]);\r\n      }\r\n  }\r\n  return binary;\r\n};\r\n\r\nvar _toBinaryArray = function (str) {\r\n  var binaryArray = [];\r\n  for (var i = 0, len = str.length; i < len; ++i) {\r\n      var unicode = str.charCodeAt(i);\r\n      var _tmpBinary = _toBinary(unicode);\r\n      if (unicode < 0x80) {\r\n          var _tmpdiff = 8 - _tmpBinary.length;\r\n          while (--_tmpdiff >= 0) {\r\n              _tmpBinary.unshift(0);\r\n          }\r\n          binaryArray = binaryArray.concat(_tmpBinary);\r\n      } else if (unicode >= 0x80 && unicode <= 0x7FF) {\r\n          binaryArray = binaryArray.concat(_toUTF8Binary(2, _tmpBinary));\r\n      } else if (unicode >= 0x800 && unicode <= 0xFFFF) {//UTF-8 3byte\r\n          binaryArray = binaryArray.concat(_toUTF8Binary(3, _tmpBinary));\r\n      } else if (unicode >= 0x10000 && unicode <= 0x1FFFFF) {//UTF-8 4byte\r\n          binaryArray = binaryArray.concat(_toUTF8Binary(4, _tmpBinary));\r\n      } else if (unicode >= 0x200000 && unicode <= 0x3FFFFFF) {//UTF-8 5byte\r\n          binaryArray = binaryArray.concat(_toUTF8Binary(5, _tmpBinary));\r\n      } else if (unicode >= 4000000 && unicode <= 0x7FFFFFFF) {//UTF-8 6byte\r\n          binaryArray = binaryArray.concat(_toUTF8Binary(6, _tmpBinary));\r\n      }\r\n  }\r\n  return binaryArray;\r\n};\r\n\r\nvar _toUnicodeStr = function (binaryArray) {\r\n  var unicode;\r\n  var unicodeBinary = [];\r\n  var str = \"\";\r\n  for (var i = 0, len = binaryArray.length; i < len;) {\r\n      if (binaryArray[i] == 0) {\r\n          unicode = _toDecimal(binaryArray.slice(i, i + 8));\r\n          str += String.fromCharCode(unicode);\r\n          i += 8;\r\n      } else {\r\n          var sum = 0;\r\n          while (i < len) {\r\n              if (binaryArray[i] == 1) {\r\n                  ++sum;\r\n              } else {\r\n                  break;\r\n              }\r\n              ++i;\r\n          }\r\n          unicodeBinary = unicodeBinary.concat(binaryArray.slice(i + 1, i + 8 - sum));\r\n          i += 8 - sum;\r\n          while (sum > 1) {\r\n              unicodeBinary = unicodeBinary.concat(binaryArray.slice(i + 2, i + 8));\r\n              i += 8;\r\n              --sum;\r\n          }\r\n          unicode = _toDecimal(unicodeBinary);\r\n          str += String.fromCharCode(unicode);\r\n          unicodeBinary = [];\r\n      }\r\n  }\r\n  return str;\r\n};\r\n\r\nvar _encode = function (str, url_safe) {\r\n  var base64_Index = [];\r\n  var binaryArray = _toBinaryArray(str);\r\n  var dictionary = url_safe ? URLSAFE_BASE64_MAPPING : BASE64_MAPPING;\r\n\r\n  var extra_Zero_Count = 0;\r\n  for (var i = 0, len = binaryArray.length; i < len; i += 6) {\r\n      var diff = (i + 6) - len;\r\n      if (diff == 2) {\r\n          extra_Zero_Count = 2;\r\n      } else if (diff == 4) {\r\n          extra_Zero_Count = 4;\r\n      }\r\n      var _tmpExtra_Zero_Count = extra_Zero_Count;\r\n      while (--_tmpExtra_Zero_Count >= 0) {\r\n          binaryArray.push(0);\r\n      }\r\n      base64_Index.push(_toDecimal(binaryArray.slice(i, i + 6)));\r\n  }\r\n\r\n  var base64 = '';\r\n  for (var i = 0, len = base64_Index.length; i < len; ++i) {\r\n      base64 += dictionary[base64_Index[i]];\r\n  }\r\n\r\n  for (var i = 0, len = extra_Zero_Count / 2; i < len; ++i) {\r\n      base64 += '=';\r\n  }\r\n  return base64;\r\n};\r\n\r\nvar _decode = function (_base64Str, url_safe) {\r\n  var _len = _base64Str.length;\r\n  var extra_Zero_Count = 0;\r\n  var dictionary = url_safe ? URLSAFE_BASE64_MAPPING : BASE64_MAPPING;\r\n\r\n  if (_base64Str.charAt(_len - 1) == '=') {\r\n      if (_base64Str.charAt(_len - 2) == '=') {//两个等号说明补了4个0\r\n          extra_Zero_Count = 4;\r\n          _base64Str = _base64Str.substring(0, _len - 2);\r\n      } else {//一个等号说明补了2个0\r\n          extra_Zero_Count = 2;\r\n          _base64Str = _base64Str.substring(0, _len - 1);\r\n      }\r\n  }\r\n\r\n  var binaryArray = [];\r\n  for (var i = 0, len = _base64Str.length; i < len; ++i) {\r\n      var c = _base64Str.charAt(i);\r\n      for (var j = 0, size = dictionary.length; j < size; ++j) {\r\n          if (c == dictionary[j]) {\r\n              var _tmp = _toBinary(j);\r\n              /*不足6位的补0*/\r\n              var _tmpLen = _tmp.length;\r\n              if (6 - _tmpLen > 0) {\r\n                  for (var k = 6 - _tmpLen; k > 0; --k) {\r\n                      _tmp.unshift(0);\r\n                  }\r\n              }\r\n              binaryArray = binaryArray.concat(_tmp);\r\n              break;\r\n          }\r\n      }\r\n  }\r\n  if (extra_Zero_Count > 0) {\r\n      binaryArray = binaryArray.slice(0, binaryArray.length - extra_Zero_Count);\r\n  }\r\n  var str = _toUnicodeStr(binaryArray);\r\n  return str;\r\n};\r\n\r\nvar __BASE64 = {\r\n  encode: function (str) {\r\n      return _encode(str, false);\r\n  },\r\n  decode: function (base64Str) {\r\n      return _decode(base64Str, false);\r\n  },\r\n  urlsafe_encode: function (str) {\r\n      return _encode(str, true);\r\n  },\r\n  urlsafe_decode: function (base64Str) {\r\n      return _decode(base64Str, true);\r\n  }\r\n};\r\n\r\n\r\nexport default __BASE64","export const hostUrl = 'http://127.0.0.1';\r\n/**\r\n * 全局配置\r\n * decryptionMode： 是否加密\r\n * switchRate：码率切换控制\r\n */\r\n export const GL_CACHE = {\r\n    TP :'mode', \r\n    DM :'decryptionMode',\r\n    SR :'switchRate',\r\n    PT :'palette',\r\n    FR_CON :'connectOnce',\r\n    UNIQUE : 'unique'\r\n  }\r\n  \r\n  /**\r\n   * 客户端插件模式，随机端口\r\n   */\r\n  export const LOCAL_PORT = [\"15080\", \"15081\", \"15082\", \"15083\", \"15084\", \"15085\", \"15086\", \"15087\", \"15088\", \"15089\"]\r\n  \r\n  /**\r\n   * 插件播放版本提示\r\n   */\r\n  export const PLAY_CODE = {\r\n    '10000': '', \r\n    '10100': '版本需要更新',\r\n    '10200': '插件初始化异常',\r\n    '12000': '插件不存在',\r\n  }\r\n\r\n  \r\n/**\r\n * 获取视频分辨率\r\n * typecode为多媒体使用\r\n */\r\n export const VIDEO_RESOLUTION = {\r\n    '1': { value: '1920*1080', name: '超清', resolution:'1080p', bitrate:'2M', templateCode: 171001, show: true},\r\n    '2': { value: '1280*720', name: '高清', resolution:'720p', bitrate:'2M', templateCode: 171002, show: true},\r\n    '3': { value: '640*360', name: '标清', resolution:'360p', bitrate:'500K', templateCode: 171003, show: true},\r\n    '4': { value: '640*480', name: '标清', resolution:'480p', bitrate:'1M', templateCode: 171002, show: false},\r\n    '5': { value: '', name: '原始', resolution: '', bitrate:'', templateCode: 10000, show: true},\r\n}\r\n  \r\nexport const PY_M_CC_NAME = '播放配置出错，请检查浏览器本地存储PY_PLUS！'\r\n\r\n\r\nexport const VIDEO_SPEED = [0.125, 0.25, 0.5, 1, 2, 4, 8];","import flvjs from 'flv.zv.js'\r\nimport * as Hls from 'hls.js'\r\nimport httpx from './service/httpx'\r\nimport lcStore from './service/url/lcStore';\r\nimport {default as BASE64} from './base64';\r\n\r\nimport {hostUrl, GL_CACHE, LOCAL_PORT, PLAY_CODE, PY_M_CC_NAME , VIDEO_RESOLUTION} from './constant'\r\n\r\nwindow.zvpalyer = window.zvpalyer || {}\r\n\r\nexport function findVideoAttribute(val, kv) {\r\n  const ens = VIDEO_RESOLUTION\r\n  for(const key in ens){\r\n    if(ens[key]['resolution'] == val){\r\n      return ens[key][kv]\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 创建HLS对象\r\n * @param {*} video\r\n * @param {*} file\r\n */\r\nexport function createHlsPlayer(video, file) {\r\n  if (Hls.isSupported()) {\r\n    const player = new Hls({\r\n      liveDurationInfinity: true,\r\n      levelLoadingTimeOut: 15000,\r\n      fragLoadingTimeOut: 25000,\r\n      enableWorker: true,\r\n    })\r\n    player.loadSource(file)\r\n    player.attachMedia(video)\r\n    return player\r\n  }\r\n}\r\n\r\n/**\r\n * 创建FLV对象\r\n * @param {*} video\r\n * @param {*} options\r\n */\r\nexport function createFlvPlayer(video, options) {\r\n  const { flvOptions = {}, flvConfig = {} } = options\r\n  if (flvjs.isSupported()) {\r\n    const player = flvjs.createPlayer(\r\n      Object.assign(\r\n        {},\r\n        {\r\n          type: 'flv',\r\n          url: options.file,\r\n        },\r\n        flvOptions\r\n      ),\r\n      Object.assign(\r\n        {},\r\n        {\r\n          enableWorker: true,\r\n          // lazyLoad: false,\r\n          // Indicates how many seconds of data to be kept for lazyLoad.\r\n          // lazyLoadMaxDuration: 0,\r\n          // autoCleanupMaxBackwardDuration: 3,\r\n          // autoCleanupMinBackwardDuration: 2,\r\n          // autoCleanupSourceBuffer: true,\r\n          enableStashBuffer: false,\r\n          stashInitialSize: 128,\r\n          cors: true,\r\n          seekType: 'range',\r\n          isLive: options.isLive || true,\r\n        },\r\n        flvConfig\r\n      )\r\n    )\r\n    player.attachMediaElement(video)\r\n    player.load()\r\n\r\n    // 日志配置\r\n    flvjs.LoggingControl.enableError = window.zvpalyer.logError === false ? false : true\r\n    flvjs.LoggingControl.enableWarn = window.zvpalyer.logWarn || false\r\n    flvjs.LoggingControl.enableVerbose = window.zvpalyer.logDebug || false\r\n    flvjs.LoggingControl.enableDebug = window.zvpalyer.logDebug || false\r\n    flvjs.LoggingControl.enableInfo = window.zvpalyer.logDebug || false\r\n    flvjs.LoggingControl.forceGlobalTag = true\r\n    flvjs.LoggingControl.globalTag = \"ocean-player\"\r\n\r\n    return player\r\n  }\r\n}\r\n\r\n/**\r\n * 获取播放文件类型\r\n * @param {*} url\r\n */\r\n export function getVideoType(url) {\r\n  let type = url.indexOf('.flv') > -1 ? 'flv' : url.indexOf('.m3u8') > -1 ? 'm3u8' : 'native'\r\n  if( url.indexOf('protocol=flv')>-1 ) type = 'flv'\r\n  return type\r\n}\r\n\r\n/**\r\n * 播放时间转字符串\r\n * @param {*} second_time\r\n */\r\nexport function timeStamp(second_time) {\r\n  let time = Math.ceil(second_time)\r\n  if (time > 60) {\r\n    let second = Math.ceil(second_time % 60)\r\n    let min = Math.floor(second_time / 60)\r\n    time = `${min < 10 ? `0${min}` : min}:${second < 10 ? `0${second}` : second}`\r\n    if (min > 60) {\r\n      min = Math.ceil((second_time / 60) % 60)\r\n      let hour = Math.floor(second_time / 60 / 60)\r\n      time = `${hour < 10 ? `0${hour}` : hour}:${min < 10 ? `0${min}` : min}:${second < 10 ? `0${second}` : second}`\r\n    } else {\r\n      time = `00:${time}`\r\n    }\r\n  } else {\r\n    time = `00:00:${time < 10 ? `0${time}` : time}`\r\n  }\r\n\r\n  return time\r\n}\r\n\r\n/**\r\n * 日期格式化\r\n * @param {*} timetemp\r\n */\r\nexport function dateFormat(timetemp) {\r\n  const date = new Date(timetemp)\r\n  let YYYY = date.getFullYear()\r\n  let DD = date.getDate()\r\n  let MM = date.getMonth() + 1\r\n  let hh = date.getHours()\r\n  let mm = date.getMinutes()\r\n  let ss = date.getSeconds()\r\n  return `${YYYY}.${MM > 9 ? MM : '0' + MM}.${DD > 9 ? DD : '0' + DD} ${hh > 9 ? hh : '0' + hh}.${mm > 9 ? mm : '0' + mm}.${ss > 9 ? ss : '0' + ss}`\r\n}\r\n\r\n/**\r\n * 全屏\r\n * @param {*} element\r\n */\r\nexport function fullscreen(element) {\r\n  if (element.requestFullScreen) {\r\n    element.requestFullScreen()\r\n  } else if (element.webkitRequestFullScreen) {\r\n    element.webkitRequestFullScreen()\r\n  } else if (element.mozRequestFullScreen) {\r\n    element.mozRequestFullScreen()\r\n  } else if (element.msRequestFullscreen) {\r\n    element.msRequestFullscreen()\r\n  }\r\n}\r\n\r\n/**\r\n * exitFullscreen 退出全屏\r\n * @param  {Objct} element 选择器\r\n */\r\nexport function exitFullscreen() {\r\n  if (document.exitFullscreen) {\r\n    document.exitFullscreen()\r\n  } else if (document.mozCancelFullScreen) {\r\n    document.mozCancelFullScreen()\r\n  } else if (document.webkitExitFullscreen) {\r\n    document.webkitExitFullscreen()\r\n  } else if (document.msExitFullscreen) {\r\n    document.msExitFullscreen()\r\n  }\r\n}\r\n\r\n/**\r\n * 判读是否支持全屏\r\n */\r\nexport function fullscreenEnabled() {\r\n  return document.fullscreenEnabled || document.mozFullScreenEnabled || document.webkitFullscreenEnabled || document.msFullscreenEnabled\r\n}\r\n\r\n/**\r\n * [isFullscreen 判断浏览器是否全屏]\r\n * @return [全屏则返回当前调用全屏的元素,不全屏返回false]\r\n */\r\nexport function isFullscreen(ele) {\r\n  if (!ele) {\r\n    return false\r\n  }\r\n  return document.fullscreenElement === ele || document.msFullscreenElement === ele || document.mozFullScreenElement === ele || document.webkitFullscreenElement === ele || false\r\n}\r\n// 添加 / 移除 全屏事件监听\r\nexport function fullScreenListener(isAdd, fullscreenchange) {\r\n  const funcName = isAdd ? 'addEventListener' : 'removeEventListener'\r\n  const fullScreenEvents = ['fullscreenchange', 'mozfullscreenchange', 'webkitfullscreenchange', 'msfullscreenchange']\r\n  fullScreenEvents.map((v) => document[funcName](v, fullscreenchange))\r\n}\r\n\r\n/**\r\n * 计算视频拖拽边界\r\n * @param {*} ele\r\n * @param {*} currentPosition\r\n * @param {*} scale\r\n */\r\nexport function computedBound(ele, currentPosition, scale) {\r\n  const data = currentPosition\r\n  const eleRect = ele.getBoundingClientRect()\r\n  const w = eleRect.width\r\n  const h = eleRect.height\r\n  let lx = 0,\r\n    ly = 0\r\n  if (scale === 1) {\r\n    return [0, 0]\r\n  }\r\n  lx = (w * (scale - 1)) / 2 / scale\r\n  ly = (h * (scale - 1)) / 2 / scale\r\n  let x = 0,\r\n    y = 0\r\n  if (data[0] >= 0 && data[0] > lx) {\r\n    x = lx\r\n  }\r\n  if (data[0] >= 0 && data[0] < lx) {\r\n    x = data[0]\r\n  }\r\n\r\n  if (data[0] < 0 && data[0] < -lx) {\r\n    x = -lx\r\n  }\r\n  if (data[0] < 0 && data[0] > -lx) {\r\n    x = data[0]\r\n  }\r\n\r\n  if (data[1] >= 0 && data[1] > ly) {\r\n    y = ly\r\n  }\r\n  if (data[1] >= 0 && data[1] < ly) {\r\n    y = data[1]\r\n  }\r\n\r\n  if (data[1] < 0 && data[1] < -ly) {\r\n    y = -ly\r\n  }\r\n  if (data[1] < 0 && data[1] > -ly) {\r\n    y = data[1]\r\n  }\r\n  if (x !== data[0] || y !== data[1]) {\r\n    return [x, y]\r\n  } else {\r\n    return\r\n  }\r\n}\r\n/**\r\n * \r\n * @returns 获取随机数\r\n */\r\nexport function getRandom() {\r\n  return Math.random().toString(36).substr(2)\r\n}\r\n\r\nexport function getQueryString(url, name) {\r\n  var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\r\n   \r\n  var r = url.split(\"?\")[1].match(reg);\r\n  if (r != null) return unescape(r[2]); return null;\r\n}\r\n\r\nexport function JSONP(url){\r\n  let script = document.createElement('script')//创建script标签\r\n  let functionName = 'fang' + parseInt(Math.random()*10000000,10)//设置调用函数名\r\n  window[functionName] = function(result){\r\n    if(result === 'success'){\r\n      amount.innerText = amount.innerText - 1\r\n    }\r\n  }\r\n  script.src = `${url}&callback=${functionName} `\r\n  document.body.appendChild(script)//将能实现发送跨域请求的script标签插入html\r\n  script.onload = function(e){\r\n    document.body.removeChild(script);\r\n    delete window[functionName]\r\n  }\r\n  script.onerror = function(){\r\n    console.warn('切换分辨率失败！')\r\n    document.body.removeChild(script);\r\n    delete window[functionName]\r\n  }\r\n  //完成传输后删除script标签\r\n}\r\n/**\r\n * 生成UUID\r\n */\r\n export function genuuid() {\r\n  let tid = [];\r\n  let hexDigits = '0123456789abcdef';\r\n  for (let i = 0; i < 36; i++) {\r\n    tid[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\r\n  }\r\n\r\n  tid[14] = '4';\r\n  tid[19] = hexDigits.substr((tid[19] & 0x3) | 0x8, 1);\r\n  tid[8] = tid[13] = tid[18] = tid[23] = '-';\r\n\r\n  return tid.join('');\r\n}\r\n\r\n\r\n/**\r\n * 根据分屏获取对应的分辨率\r\n * 默认 960*544\r\n */\r\n export function getScreenRate(num){\r\n  const videoRatio = VIDEO_RESOLUTION\r\n  // 1、4、6、8、9、10、13、16\r\n  if(num < 4){\r\n    return videoRatio['5'].resolution\r\n  }else if(num < 9 && num >= 4){\r\n    return videoRatio['2'].resolution\r\n  }else if(num < 13 && num >= 9){\r\n    return videoRatio['4'].resolution\r\n  }else if(num <= 16 && num >= 13){\r\n    return videoRatio['3'].resolution\r\n  }else{\r\n    return videoRatio['5'].resolution\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * 获取全局配置\r\n * @param {*} key \r\n */\r\n export function getGlobalCache(key){\r\n  const strS = localStorage.getItem('PY_PLUS')\r\n  let playerOptions = null\r\n\r\n  try {\r\n    playerOptions = JSON.parse(strS);\r\n  } catch (error) {\r\n    console.error(PY_M_CC_NAME)\r\n    return ''\r\n  }\r\n\r\n  return playerOptions ? playerOptions[key] : ''\r\n}\r\n\r\n/**\r\n * 随机获取端口号\r\n * @returns \r\n */\r\nexport function getLocalPort(){\r\n  return LOCAL_PORT[Math.floor(Math.random()*LOCAL_PORT.length)]\r\n}\r\n\r\n/**\r\n * 获取系统版本\r\n * @returns \r\n */\r\nexport function getAppPlayerVersion(){\r\n  return sessionStorage.getItem('_APP_PLAY_VERSION')\r\n}\r\n\r\n/**\r\n * 通过本地存储进行播放类型检测\r\n * @returns \r\n */\r\nexport function detectorPlayeMode(){\r\n  const isPlus = getGlobalCache(GL_CACHE.TP)\r\n  sessionStorage.setItem('_TEMP_PLAY_MODE', isPlus)\r\n  // 是否本地插件播放 0是互联网模式，不走插件\r\n  return isPlus\r\n}\r\n\r\nexport function compare(a, b) {\r\n  if (a === b) {\r\n     return 0;\r\n  }\r\n\r\n  var a_components = a.split(\".\");\r\n  var b_components = b.split(\".\");\r\n\r\n  var len = Math.min(a_components.length, b_components.length);\r\n\r\n  // loop while the components are equal\r\n  for (var i = 0; i < len; i++) {\r\n      // A bigger than B\r\n      if (parseInt(a_components[i]) > parseInt(b_components[i])) {\r\n          return 1;\r\n      }\r\n\r\n      // B bigger than A\r\n      if (parseInt(a_components[i]) < parseInt(b_components[i])) {\r\n          return -1;\r\n      }\r\n  }\r\n\r\n  // If one's a prefix of the other, the longer one is greater.\r\n  if (a_components.length > b_components.length) {\r\n      return 1;\r\n  }\r\n\r\n  if (a_components.length < b_components.length) {\r\n      return -1;\r\n  }\r\n\r\n  // Otherwise they are the same.\r\n  return 0;\r\n}\r\n\r\n/**\r\n * 版本验证处理\r\n * @returns \r\n */\r\n export function checkVerson(sysVersion,currentVersion){\r\n   console.info(sysVersion);\r\n   if(!currentVersion){\r\n     console.warn('检测到应用系统版版本配置未生效，请检查配置！')\r\n    return false\r\n   }\r\n\r\n   if(compare(currentVersion.substr(1), sysVersion.substr(1)) < 0){\r\n     // 安装版本过低，需要升级\r\n     return false\r\n   }\r\n  return true\r\n}\r\n/**\r\n * 解析本地是否安装\r\n */\r\nexport function installState(callback){\r\n  // 进行类型检测 是否插件模式\r\n  if (detectorPlayeMode() == 0 || detectorPlayeMode() == 2) return;\r\n\r\n  if(sessionStorage.getItem('_TEMP_PLAY_CODE') == '10000') return;\r\n  // 进行本地检测\r\n  const port = getLocalPort()\r\n  httpx.get(`${hostUrl}:${port}/video/v1/state`, function(respondData) {\r\n    let res = {}\r\n    try{\r\n      res = JSON.parse(respondData)\r\n      if(res.code == 200){\r\n        sessionStorage.setItem('_TEMP_PLAY_VERSION', res.version)\r\n        if(!checkVerson(getAppPlayerVersion(),res.version)){\r\n          sessionStorage.setItem('_TEMP_PLAY_CODE','10001')\r\n          throw `检测到版本${res.version}与应用系统版本不匹配，请检查配置`\r\n        }else{\r\n          sessionStorage.setItem('_TEMP_PLAY_CODE','10000')\r\n        }\r\n      }else{\r\n        sessionStorage.setItem('_TEMP_PLAY_CODE','10002')\r\n        throw res.message || ''\r\n      }\r\n    }catch(err){\r\n      console.log('插件初始化失败，请联系管理员！'+ err)\r\n    }\r\n    callback && callback()\r\n}, function(method, url) {\r\n  console.log('未安装插件！！！')\r\n  sessionStorage.setItem('_TEMP_PLAY_CODE','20000')\r\n  callback && callback()\r\n});\r\n}\r\n\r\nexport function monitorHlsFragments(hls, resolution){\r\n  console.log('Start Processing HLS TS...')\r\n  const playeMode = detectorPlayeMode()\r\n  if(playeMode == 1){\r\n    hls.on('hlsManifestParsed',(event,data)=>{\r\n      if(data.levels[0] && data.levels[0].details.fragments){\r\n        data.levels[0].details.fragments.forEach(function(item){\r\n          item.relurl = transformFn(item.relurl,sessionStorage.getItem(\"__PLAYER_RESOLUTION_CUR\", resolution))\r\n        })\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport function decodeService(player, onToken){\r\n  const playeMode = detectorPlayeMode()\r\n  const key = genuuid()\r\n  let url = ''\r\n\r\n  switch (playeMode) {\r\n    case 1:\r\n      url = tansDecoding(player)+ '&token=' + key\r\n      // 免责工具使用\r\n      onToken && onToken(key)\r\n      break;\r\n    case 2:\r\n      url = serverDecoding(player)\r\n      break;\r\n    default:\r\n      url = browserDecoding(player)\r\n      break;\r\n  }\r\n  return url\r\n}\r\n\r\nexport function transformFn(file, resolution){\r\n  const playeMode = detectorPlayeMode()\r\n  const key = genuuid()\r\n  let url = ''\r\n\r\n  switch (playeMode) {\r\n    case 1:\r\n      url = videoTansDecoding(file, resolution)\r\n      break;\r\n    default:\r\n      url = file\r\n      break;\r\n  }\r\n  return url\r\n}\r\n\r\n/**\r\n * 浏览器端解码\r\n * @param {*} player \r\n * @returns \r\n */\r\nexport function browserDecoding(player){\r\n  if(getGlobalCache(GL_CACHE.UNIQUE)){\r\n    return player?.file + '&timestamp=' + (new Date().getTime())\r\n  }\r\n  return player?.file \r\n}\r\n\r\n/**\r\n * 服务端解码逻辑\r\n * @param {*} player \r\n * @param {*} onToken \r\n * @returns \r\n */\r\nexport function serverDecoding(player){\r\n  const {file, resolution} = player\r\n  const ip = window.location.origin\r\n  // 从file中提取 Authorization\r\n  const authorization = getQueryString(file, 'Authorization')\r\n  const templateCode = findVideoAttribute(resolution,'templateCode')\r\n  let lastParam = ''\r\n\r\n  // 原始码流\r\n  if(templateCode == 10000){\r\n    const url = file.split('?')[0];\r\n    lastParam =  '&cid=' + url.substring(url.lastIndexOf(\"\\/\") + 1,url.length);\r\n  }\r\n\r\n  const resourceUrl = BASE64.encode(file)?.replaceAll('=','')?.replaceAll('/','_')?.replaceAll('+','-')\r\n  return ip + `/staticResource/v2/video/media/transfer?Authorization=${authorization}&templateCode=${templateCode}&resourceUrl=${resourceUrl}` + lastParam\r\n}\r\n\r\n/**\r\n * 客户端插件访问入口\r\n * @param {*} url \r\n * @param {*} resolution \r\n * @param {*} onToken \r\n * @returns \r\n */\r\nexport function tansDecoding(player){\r\n  \r\n  let param1 = ''\r\n  let param2 = ''\r\n  let param3 = ''\r\n\r\n  let {file, resolution, deviceInfo} = player\r\n\r\n  // 是否加密\r\n  file = file + getGlobalCache(GL_CACHE.DM)\r\n\r\n  const url_info ={\r\n      port: getLocalPort(),\r\n      pull_uri: BASE64.encode(file)?.replaceAll('=','')?.replaceAll('/','_')?.replaceAll('+','-')\r\n  }\r\n  \r\n  // 分辨率，如果为空，为原始分辨率\r\n  if(resolution){\r\n    // 分辨率\r\n    param1 = '&resolution=' + resolution\r\n    // 根据分辨率获取码率\r\n    param2 = '&bitrate=' + findVideoAttribute(resolution, 'bitrate')\r\n  }\r\n  \r\n  // value: \"100602\", label: \"球机\"\r\n  if(deviceInfo && deviceInfo.type == \"100602\"){\r\n    param3 = '&quickplay=0'\r\n  }\r\n  console.log(file+param1+param3)\r\n\r\n  return lcStore.getTranscodingStream.value.replace('<pull_uri>', url_info.pull_uri).replace('<port>', url_info.port) + param1 + param2 + param3\r\n}\r\n\r\n\r\n/**\r\n * 客户端插件访问入口-录像\r\n * @param {*} url \r\n * @returns \r\n */\r\n export function videoTansDecoding(url, resolution){\r\n  let param1 = ''\r\n  let param2 = ''\r\n  let fileUrl = url\r\n  // 是否加密\r\n  fileUrl = fileUrl + getGlobalCache(GL_CACHE.DM)\r\n    // 分辨率，如果为空，为原始分辨率\r\n  if(resolution){\r\n    // 分辨率\r\n    param1 = '&resolution=' + resolution\r\n    // 根据分辨率获取码率\r\n    param2 = '&bitrate=' + findVideoAttribute(resolution, 'bitrate')\r\n  }\r\n\r\n  const url_info ={\r\n      port: getLocalPort(),\r\n      pull_uri: BASE64.encode(fileUrl)?.replaceAll('=','')?.replaceAll('/','_')?.replaceAll('+','-')\r\n  }\r\n  \r\n  return lcStore.getTranscodingStream.value.replace('<pull_uri>', url_info.pull_uri).replace('<port>', url_info.port) + param1 + param2\r\n}\r\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport './style/iconfont.less'\n\nexport default function IconFont({ type, className = '', ...props }) {\n  return <i className={`lm-player-iconfont ${type} ${className}`} {...props} />\n}\n\nIconFont.propTypes = {\n  type: PropTypes.string,\n  className: PropTypes.string\n}\n","import React, { useEffect, useRef } from 'react'\nimport ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\nimport './style/slider.less'\n\nclass Slider extends React.Component {\n  constructor(props) {\n    super(props)\n    this.sliderDomRef = React.createRef()\n    this.layoutDom = null\n    this.lineDom = null\n    this.dragDom = null\n    this.dragFlag = false\n    this.state = {\n      value: this.props.currentPercent || 0,\n      tempValue: 0,\n      showTips: false,\n      tipsX: 0,\n      tipsY: 0\n    }\n  }\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (!this.dragFlag) {\n      this.setState({ value: nextProps.currentPercent || 0 })\n    }\n  }\n  componentDidMount() {\n    this.layoutDom = this.sliderDomRef.current\n    this.dragDom = this.layoutDom.querySelector('.drag-change-icon')\n    this.lineDom = this.layoutDom.querySelector('.slider-content')\n\n    this.layoutDom.addEventListener('mousemove', this.renderSliderTips, false)\n    this.layoutDom.addEventListener('mouseout', this.hideSliderTips, false)\n    this.lineDom.addEventListener('click', this.changeCurrentValue, false)\n    this.dragDom.addEventListener('click', this.cancelPropagation, false)\n    this.dragDom.addEventListener('mousedown', this.startDrag, false)\n  }\n  componentWillUnmount() {\n    clearTimeout(this.timer)\n    this.layoutDom.removeEventListener('mousemove', this.renderSliderTips, false)\n    this.layoutDom.removeEventListener('mouseout', this.hideSliderTips, false)\n    this.lineDom.removeEventListener('click', this.changeCurrentValue, false)\n    this.dragDom.removeEventListener('click', this.cancelPropagation, false)\n    this.dragDom.removeEventListener('mousedown', this.startDrag, false)\n\n    document.body.removeEventListener('mousemove', this.moveChange)\n    document.body.removeEventListener('mouseup', this.stopDrag)\n\n    this.sliderDomRef = null\n    this.layoutDom = null\n    this.lineDom = null\n    this.dragDom = null\n    this.dragFlag = null\n  }\n  renderSliderTips = e => {\n    const { renderTips } = this.props\n    if (!renderTips) {\n      return\n    }\n    clearTimeout(this.timer)\n    this.timer = setTimeout(() => {\n      const { x, width, top } = this.layoutDom.getBoundingClientRect()\n      const tipsX = e.pageX - x\n      let percent = (e.pageX - x) / width\n      percent = percent < 0 ? 0 : percent > 1 ? 1 : percent\n      this.setState({ tipsX, tipsY: top, showTips: true, tempValue: percent })\n    }, 200)\n  }\n  hideSliderTips = () => {\n    clearTimeout(this.timer)\n    this.setState({ showTips: false })\n  }\n  cancelPropagation = e => {\n    e.stopPropagation()\n  }\n  startDrag = e => {\n    e.stopPropagation()\n    this.dragFlag = true\n    document.body.addEventListener('mousemove', this.moveChange)\n    document.body.addEventListener('mouseup', this.stopDrag)\n  }\n  moveChange = e => {\n    e.stopPropagation()\n    const percent = this.computedPositionForEvent(e)\n    this.setState({ value: percent })\n  }\n  stopDrag = e => {\n    e.stopPropagation()\n    document.body.removeEventListener('mousemove', this.moveChange)\n    document.body.removeEventListener('mouseup', this.stopDrag)\n    this.dragFlag = false\n    let percent = this.state.value / 100\n    percent = percent < 0 ? 0 : percent > 1 ? 1 : percent\n    this.props.onChange && this.props.onChange(percent)\n  }\n  computedPositionForEvent(e) {\n    const { x, width } = this.layoutDom.getBoundingClientRect()\n    const { pageX } = e\n    let dx = pageX - x\n    if (dx > width) {\n      dx = width\n    }\n    if (dx < 0) {\n      dx = 0\n    }\n    return (dx / width) * 100\n  }\n  changeCurrentValue = event => {\n    event.stopPropagation()\n    const { width, x } = this.layoutDom.getBoundingClientRect()\n    let percent = (event.pageX - x) / width\n    this.props.onChange && this.props.onChange(percent)\n  }\n  render() {\n    const { value, showTips, tipsX } = this.state\n    const { availablePercent = 0, className = '', tipsY } = this.props\n    return (\n      <div className={`slider-layout ${className}`} ref={this.sliderDomRef}>\n        <div className=\"slider-content\">\n          <div className=\"slider-max-line\" />\n          <div className=\"slider-visibel-line\" style={{ width: `${availablePercent}%` }} />\n          <div className=\"slider-current-line\" style={{ width: `${value}%` }} />\n          {this.props.children}\n        </div>\n        <div className=\"slider-other-content\">\n          <div className=\"drag-change-icon\" draggable={false} style={{ left: `${value}%` }} />\n        </div>\n        <Tips visibel={showTips} className=\"lm-player-slide-tips\" style={{ left: tipsX, top: tipsY }} getContainer={() => this.sliderDomRef.current}>\n          {this.props.renderTips && this.props.renderTips(this.state.tempValue)}\n        </Tips>\n      </div>\n    )\n  }\n}\n\nSlider.propTypes = {\n  currentPercent: PropTypes.number,\n  seekTo: PropTypes.func,\n  video: PropTypes.element,\n  renderTips: PropTypes.func,\n  availablePercent: PropTypes.number,\n  onChange: PropTypes.func,\n  children: PropTypes.any,\n  className: PropTypes.string,\n  tipsY: PropTypes.number\n}\nSlider.defaultProps = {\n  tipsY: -10\n}\n\nfunction Tips({ getContainer, visibel, children, style, className = '' }) {\n  const ele = useRef(document.createElement('div'))\n  useEffect(() => {\n    const box = getContainer ? getContainer() || document.body : document.body\n    box.appendChild(ele.current)\n    return () => box.removeChild(ele.current)\n  }, [getContainer])\n\n  if (!visibel) {\n    return null\n  }\n  return ReactDOM.createPortal(\n    <div className={className} style={style}>\n      {children}\n    </div>,\n    ele.current\n  )\n}\n\nTips.propTypes = {\n  visibel: PropTypes.bool,\n  children: PropTypes.element,\n  style: PropTypes.any,\n  className: PropTypes.string\n}\n\nexport default Slider\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nexport default function Bar({ visibel = true, className = '', children, ...props }) {\n  if (visibel === false) {\n    return null\n  }\n  return (\n    <span className={`contraller-bar-item ${className}`} {...props}>\n      {children}\n    </span>\n  )\n}\n\nBar.propTypes = {\n  visibel: PropTypes.bool,\n  className: PropTypes.string,\n  children: PropTypes.any\n}\n","export default {\n  RELOAD: \"reload\", //手动视频重载\n  RELOAD_FAIL: \"reloadFail\", // 视频出错，重连失败\n  RELOAD_SUCCESS: \"reloadSuccess\", //视频出错，重连成功\n  ERROR: \"error\", //视频出错\n  ERROR_RELOAD: \"errorRload\", //视频出错，自动重连\n  HISTORY_PLAY_END: \"historyPlayEnd\", //历史视频列表播放结束\n  SEEK: \"seek\", //跳跃播放时间\n  TRANSFORM: \"transform\", //视频容器缩放\n  CHANGE_PLAY_INDEX: \"changePlayIndex\", //历史视频列表播放索引改变\n  HIDE_CONTRALLER:\"hideContraller\",\n  SHOW_CONTRALLER:\"showContraller\",\n  CLEAR_ERROR_TIMER:\"clearErrorTimer\"\n};\n","import React, { useState, useEffect, useCallback, useMemo,useRef } from 'react'\nimport IconFont from '../iconfont'\nimport Slider from '../slider'\nimport Bar from './bar'\nimport EventName from '../event/eventName'\nimport PropTypes from 'prop-types'\n\nfunction LeftBar({ api, event, video, isHistory, reloadHistory, isLive, leftExtContents, leftMidExtContents, hideBar, setHideBar }) {\n  const [openSliderVolume, setOpenSliderVolume] = useState(hideBar)\n  const [dep, setDep] = useState(Date.now())\n  const elRef = useRef()\n  useEffect(() => {\n    const updateRender = () => {\n      setDep(Date.now())\n    }\n    event.addEventListener('play', updateRender)\n    event.addEventListener('pause', updateRender)\n    event.addEventListener('volumechange', updateRender)\n\n    return () => {\n      event.removeEventListener('play', updateRender)\n      event.removeEventListener('pause', updateRender)\n      event.removeEventListener('volumechange', updateRender)\n    }\n  }, [event])\n\n  //缓存值\n  const paused = useMemo(() => video.paused, [dep, video])\n  const statusIconClassName = useMemo(() => (paused ? 'lm-player-Play_Main' : 'lm-player-Pause_Main'), [paused])\n  const statusText = useMemo(() => (paused ? '播放' : '暂停'), [paused])\n  const volumeVal = useMemo(() => (video.muted ? 0 : video.volume), [dep, video])\n  const volumeIcon = useMemo(() => (volumeVal === 0 ? 'lm-player-volume-close' : video.volume === 1 ? 'lm-player-volume-max' : 'lm-player-volume-normal-fuben'), [volumeVal])\n  const volumePercent = useMemo(() => (volumeVal === 0 ? 0 : volumeVal * 100), [volumeVal])\n  const sliderClassName = useMemo(() => (openSliderVolume ? 'contraller-bar-hover-volume' : ''), [openSliderVolume])\n\n  //TODO 方法\n  const changePlayStatus = useCallback(() => {\n    // 录像播放，结束后，点击开始停止，重新开始\n    if(isHistory && video.ended){\n      reloadHistory()\n    }else{\n      video.paused ? api.play() : api.pause()\n    }\n  }, [video, api])\n\n  const mutedChantgeStatus = useCallback(() => (video.muted ? api.unmute() : api.mute()), [api, video])\n\n  const onChangeVolume = useCallback(\n    volume => {\n      api.setVolume(parseFloat(volume.toFixed(1)))\n      volume > 0 && video.muted && api.unmute()\n    },\n    [api, video]\n  )\n\n  const reload = useCallback(() => {\n    isHistory ? reloadHistory() : api.reload()\n    event.emit(EventName.CLEAR_ERROR_TIMER)\n  }, [event, isHistory, api])\n\n  useEffect(() => {\n   setOpenSliderVolume(false)\n  }, [hideBar])\n\n  return (\n    <div className=\"contraller-left-bar\" ref={elRef}>\n      {leftExtContents}\n      <Bar visibel={!isLive}>\n        <IconFont onClick={changePlayStatus} type={statusIconClassName} title={statusText} />\n      </Bar>\n      <Bar className={`contraller-bar-volume ${sliderClassName}`} onClick={() => setOpenSliderVolume(true)}>\n        <IconFont onClick={mutedChantgeStatus} type={volumeIcon} title=\"音量\" />\n        <div className=\"volume-slider-layout\">\n          <Slider className=\"volume-slider\" currentPercent={volumePercent} onChange={onChangeVolume} renderTips={precent => <span>{Math.round(precent * 100)}%</span>} tipsY={-2} />\n        </div>\n      </Bar>\n      <Bar>\n        <IconFont onClick={reload} type=\"lm-player-Refresh_Main\" title=\"重载\" />\n      </Bar>\n      {leftMidExtContents}\n    </div>\n  )\n}\n\nLeftBar.propTypes = {\n  api: PropTypes.object,\n  event: PropTypes.object,\n  playerProps: PropTypes.object,\n  video: PropTypes.node,\n  reloadHistory: PropTypes.func,\n  isHistory: PropTypes.bool\n}\n\nexport default LeftBar\n","import React, { useMemo,useState,useRef,useEffect } from 'react'\r\nimport IconFont from '../iconfont'\r\nimport Bar from './bar'\r\nimport { Slider } from 'antd'\r\n\r\nfunction ColorPicker({ colorfilter, hideBar }) {\r\n  const [brightnessValue, setBrightnessValue] = useState(127)\r\n  const [contrastValue, setContrastValue] = useState(127)\r\n  const [saturateValue, setSaturateValue] = useState(127)\r\n  const [hueValue, setHueValue] = useState(0)\r\n\r\n  const elRef = useRef()\r\n  const [isPicker, setIsPicker] = useState(false)\r\n\r\n  const brightness = useMemo(() => {\r\n      const cv = brightnessValue/127\r\n      if(cv == 1) return ''\r\n      return `brightness(${cv})`\r\n  }, [brightnessValue]);\r\n\r\n  \r\n  const contrast = useMemo(() => {\r\n    const cv = contrastValue/127\r\n    if(cv == 1) return ''\r\n    return `contrast(${cv})`\r\n   }, [contrastValue]);\r\n\r\n   const saturate = useMemo(() => {\r\n    const cv = saturateValue/127\r\n    if(cv == 1) return ''\r\n    return `saturate(${cv})`\r\n   }, [saturateValue]);\r\n\r\n   const hue = useMemo(() => {\r\n    const cv = hueValue\r\n    if(cv == 0) return ''\r\n    return `hue-rotate(${cv}deg)`\r\n   }, [hueValue]);\r\n\r\n  const handleAllChange = data => {\r\n    colorfilter && colorfilter({\r\n        '-webkit-filter': `${brightness} ${contrast} ${saturate} ${hue}`,\r\n    })\r\n  }\r\n\r\n  const handleBrightnessChange = data => {\r\n    setBrightnessValue(data)\r\n    handleAllChange()\r\n  }\r\n\r\n  const handleContrastChange = data => {\r\n    setContrastValue(data)\r\n    handleAllChange()\r\n  }\r\n\r\n  const handleSaturateChange = data => {\r\n    setSaturateValue(data)\r\n    handleAllChange()\r\n  }\r\n\r\n  const handleHueChange = data => {\r\n    setHueValue(data)\r\n    handleAllChange()\r\n  }\r\n\r\n  const handleResetChange = data => {\r\n    setBrightnessValue(127)\r\n    setContrastValue(127)\r\n    setSaturateValue(127)\r\n    setHueValue(0)\r\n    colorfilter({})\r\n  }\r\n\r\n  const handleOpenPicker = data => {\r\n    setIsPicker(!isPicker)\r\n  }\r\n\r\n  useEffect(() => {\r\n    setIsPicker(false)\r\n  }, [hideBar])\r\n\r\n  return (\r\n    <Bar className={'colorPicker'}>\r\n      <div ref={elRef}>\r\n        <IconFont title={'画面设置'} type={'lm-player-S_Device_shezhi'} onClick={handleOpenPicker} />\r\n      {\r\n        isPicker && (\r\n        <div class=\"colorPicker-container\">\r\n        <span> 视频画面设置 </span> \r\n        <span className='colorPicker-reset' onClick={handleResetChange}>&nbsp;<IconFont title={'重置'} type={'lm-player-Refresh_Main'} />重置 </span>\r\n        <div className=\"colorPicker-container-control\">\r\n          <span> 亮度 </span> <Slider min={0} max={255} onChange={handleBrightnessChange} value={ brightnessValue }  /><span> {brightnessValue} </span>\r\n        </div>\r\n        <div className=\"colorPicker-container-control\">\r\n          <span> 对比度 </span> <Slider min={0} max={255} onChange={handleContrastChange} value={ contrastValue }  /><span> {contrastValue} </span>\r\n        </div>\r\n        <div className=\"colorPicker-container-control\">\r\n          <span> 饱和度 </span> <Slider min={0} max={255} onChange={handleSaturateChange} value={ saturateValue }  /><span> {saturateValue} </span>\r\n        </div>\r\n        <div className=\"colorPicker-container-control hue-horizontal\">\r\n          <span> 色调 </span> <Slider min={0} max={360} onChange={handleHueChange} value={ hueValue } /><span> {hueValue} </span>\r\n        </div>\r\n      </div>\r\n        )\r\n      }\r\n      </div>\r\n    </Bar>\r\n  )\r\n}\r\n\r\nexport default ColorPicker\r\n","import React, { useMemo,useState,useRef,useEffect,useCallback  } from 'react'\r\nimport Bar from './bar'\r\nimport { findVideoAttribute} from '../util'\r\nimport {VIDEO_RESOLUTION} from '../constant'\r\n\r\nfunction ResolutionPicker({ switchResolution, api, name, hideBar }) {\r\n  const [isResolution, setIsResolution] = useState(false)\r\n  const resolutionRef = useRef()\r\n    \r\n    // 获取视频分辨率\r\n  const ratioValue = VIDEO_RESOLUTION\r\n   // 分辨率-默认显示\r\n  const [viewText, setViewText] = useState(findVideoAttribute(api.getResolution(),'name'));\r\n\r\n  const handleOpenResolution = data => {\r\n    setIsResolution(!isResolution)\r\n  }\r\n  const setRatio = useCallback((...args) => {\r\n        setViewText(ratioValue[args].name)\r\n        switchResolution && switchResolution(ratioValue[args].resolution)\r\n  },[api])\r\n\r\n  useEffect(() => {\r\n        // 点击其他地方隐藏输入框\r\n        setIsResolution(false)\r\n  }, [hideBar])\r\n\r\n  useEffect(() => {\r\n      setViewText(name)\r\n  }, [name])\r\n\r\n  return (\r\n      <Bar className={'fl-menu-hc '} onClick={handleOpenResolution}>\r\n        <div ref={resolutionRef}>\r\n        <span class='fl-menu-hc-main'>{viewText}</span>\r\n        {isResolution && <ul class=\"fl-menu-hc-level\">\r\n          {\r\n            Object.keys(ratioValue).map((item)=>(\r\n              ratioValue[item].show && (<li class=\"fl-menu-hc-level-1\" onClick={() => setRatio(item)}>{ratioValue[item].name}</li>) \r\n            ))\r\n          }\r\n        </ul>\r\n        }\r\n        </div>\r\n    </Bar>\r\n  )\r\n}\r\n\r\nexport default ResolutionPicker","import React, { useState, useMemo, useEffect, useCallback,useRef } from 'react'\r\nimport IconFont from '../iconfont'\r\nimport Bar from './bar'\r\nimport { isFullscreen, fullScreenListener, computedBound, findVideoAttribute, getScreenRate, getGlobalCache} from '../util'\r\nimport { GL_CACHE } from '../constant'\r\nimport PropTypes from 'prop-types'\r\nimport ColorPicker from './colorPicker'\r\nimport ResolutionPicker from './resolutionPicker'\r\n \r\nfunction RightBar({ playContainer, api, scale, snapshot, rightExtContents, rightMidExtContents, isLive, switchResolution, colorPicker, hideBar}) {\r\n  const [dep, setDep] = useState(Date.now())\r\n\r\n  // 分辨率-默认显示\r\n  const [viewText, setViewText] = useState(findVideoAttribute(api.getResolution(),'name'));\r\n\r\n  // 控制调色盘显示\r\n  const isPalette = getGlobalCache(GL_CACHE.PT) || false\r\n  // 控制分辨率显示\r\n  const isSwithRate = getGlobalCache(GL_CACHE.SR) || false\r\n\r\n  useEffect(() => {\r\n    const update = () => setDep(Date.now())\r\n    fullScreenListener(true, update)\r\n    return () => fullScreenListener(false, update)\r\n  }, [])\r\n\r\n  const isfull = useMemo(() => isFullscreen(playContainer), [dep, playContainer])\r\n\r\n  const fullscreen = useCallback(() => {\r\n    const isFullScreen = !isFullscreen(playContainer)\r\n    console.info(playContainer)\r\n    \r\n    if(isFullScreen){\r\n      api.requestFullScreen()\r\n      switchResolution && switchResolution('')\r\n      setViewText(findVideoAttribute('','name'))\r\n    }else{\r\n      api.cancelFullScreen()\r\n      switchResolution && switchResolution(getScreenRate(api.getCurrentScreen()))\r\n      setViewText(findVideoAttribute(getScreenRate(api.getCurrentScreen()),'name'))\r\n    }\r\n\r\n    // 设置对应的分辨率名称\r\n    setDep(Date.now())\r\n  }, [api, playContainer])\r\n\r\n  const setScale = useCallback(\r\n    (...args) => {\r\n      const dragDom = playContainer.querySelector('.player-mask-layout')\r\n      api.setScale(...args)\r\n      let position = computedBound(dragDom, api.getPosition(), api.getScale())\r\n      if (position) {\r\n        api.setPosition(position, true)\r\n      }\r\n    },\r\n    [api, playContainer]\r\n  )\r\n\r\n  return (\r\n    <div className=\"contraller-right-bar\">\r\n      {rightMidExtContents}\r\n      {scale && (\r\n        <>\r\n          <Bar>\r\n            <IconFont title=\"缩小\" onClick={() => setScale(-0.2)} type={'lm-player-ZoomOut_Main'} />\r\n          </Bar>\r\n          <Bar>\r\n            <IconFont title=\"复位\" onClick={() => setScale(1, true)} type={'lm-player-ZoomDefault_Main'} />\r\n          </Bar>\r\n          <Bar>\r\n            <IconFont title=\"放大\" onClick={() => setScale(0.2)} type={'lm-player-ZoomIn_Main'} />\r\n          </Bar>\r\n        </>\r\n      )}\r\n      {isPalette && (<ColorPicker colorfilter={colorPicker} hideBar={hideBar} />)}\r\n      {isLive && isSwithRate && (\r\n        <ResolutionPicker name={viewText} switchResolution={switchResolution} api={api} hideBar={hideBar} />\r\n      )}\r\n      \r\n      {snapshot && (\r\n        <Bar>\r\n          <IconFont title=\"截图\" onClick={() => snapshot(api.snapshot())} type=\"lm-player-SearchBox\" />\r\n        </Bar>\r\n      )}\r\n\r\n      <Bar>\r\n        <IconFont title={isfull ? '窗口' : '全屏'} onClick={fullscreen} type={isfull ? 'lm-player-ExitFull_Main' : 'lm-player-Full_Main'} />\r\n      </Bar>\r\n      {rightExtContents}\r\n    </div>\r\n  )\r\n}\r\n\r\nRightBar.propTypes = {\r\n  api: PropTypes.object,\r\n  event: PropTypes.object,\r\n  playerProps: PropTypes.object,\r\n  playContainer: PropTypes.node,\r\n  reloadHistory: PropTypes.func,\r\n  isHistory: PropTypes.bool,\r\n}\r\nexport default RightBar\r\n","import React, { useCallback } from 'react'\nimport IconFont from '../iconfont'\nimport Bar from './bar'\nimport { computedBound } from '../util'\n\nfunction ScaleBar({ playContainer, api, scale }) {\n  const setScale = useCallback(\n    (...args) => {\n      const dragDom = playContainer.querySelector('.player-mask-layout')\n      api.setScale(...args)\n      let position = computedBound(dragDom, api.getPosition(), api.getScale())\n      if (position) {\n        api.setPosition(position, true)\n      }\n    },\n    [api, playContainer]\n  )\n\n  return (\n    <div className=\"contraller-scale-bar\">\n      {scale && (\n        <>\n          <Bar>\n            <IconFont title=\"缩小\" onClick={() => setScale(-0.2)} type={'lm-player-ZoomOut_Main'} />\n          </Bar>\n          <Bar>\n            <IconFont title=\"复位\" onClick={() => setScale(1, true)} type={'lm-player-ZoomDefault_Main'} />\n          </Bar>\n          <Bar>\n            <IconFont title=\"放大\" onClick={() => setScale(0.2)} type={'lm-player-ZoomIn_Main'} />\n          </Bar>\n        </>\n      )}\n    </div>\n  )\n}\n\nexport default ScaleBar\n","import React from 'react'\nimport LeftBar from './left_bar'\nimport RightBar from './right_bar'\nimport PropTypes from 'prop-types'\nimport ScaleBar from './scale_bar'\nimport '../style/bar.less'\n\nfunction ContrallerBar({\n  playContainer,\n  snapshot,\n  switchResolution,\n  rightExtContents,\n  rightMidExtContents,\n  scale,\n  visibel,\n  api,\n  event,\n  video,\n  isHistory,\n  reloadHistory,\n  isLive,\n  leftExtContents,\n  leftMidExtContents,\n  colorPicker,\n  hideBar,\n}) {\n  return (\n    <>\n      <div className={`contraller-bar-layout ${!visibel ? 'hide-contraller-bar' : ''}`}>\n        <LeftBar\n          api={api}\n          event={event}\n          video={video}\n          isHistory={isHistory}\n          reloadHistory={reloadHistory}\n          isLive={isLive}\n          leftMidExtContents={leftMidExtContents}\n          leftExtContents={leftExtContents}\n          hideBar={hideBar}\n        />\n        <RightBar\n          api={api}\n          event={event}\n          isLive={isLive}\n          playContainer={playContainer}\n          snapshot={snapshot}\n          colorPicker={colorPicker}\n          switchResolution={switchResolution}\n          rightExtContents={rightExtContents}\n          rightMidExtContents={rightMidExtContents}\n          hideBar={hideBar}\n        />\n      </div>\n      <div className={`contraller-scale-layout ${!visibel ? 'hide-contraller-bar' : ''}`}>\n        <ScaleBar api={api} playContainer={playContainer} scale={scale} />\n      </div>\n    </>\n  )\n}\n\nContrallerBar.propTypes = {\n  visibel: PropTypes.bool,\n}\n\nexport default ContrallerBar\n","import React, { useEffect, useState, useRef } from 'react'\nimport EventName from './eventName'\n\nfunction ContrallerEvent({ event, playContainer, children }) {\n  const timer = useRef(null)\n  const [visibel, setVisibel] = useState(true)\n  useEffect(() => {\n    const showContraller = () => {\n      setVisibel(true)\n      hideContraller()\n      event.emit(EventName.SHOW_CONTRALLER)\n    }\n    const hideContraller = () => {\n      clearTimeout(timer.current)\n      timer.current = setTimeout(() => {\n        setVisibel(false)\n        event.emit(EventName.HIDE_CONTRALLER)\n      }, 3 * 1000)\n    }\n    playContainer.addEventListener('mousemove', showContraller, false)\n    playContainer.addEventListener('mouseout', hideContraller, false)\n\n    return () => {\n      playContainer.removeEventListener('mousemove', showContraller, false)\n      playContainer.removeEventListener('mouseout', hideContraller, false)\n    }\n  }, [])\n\n  return React.Children.map(children, child => (React.isValidElement(child) ? React.cloneElement(child, { visibel }) : child))\n}\n\nexport default ContrallerEvent\n","import React, { useEffect, useState, useMemo } from 'react'\nimport IconFont from './iconfont'\nimport EventName from './event/eventName'\nimport './style/message.less'\n\nfunction VideoMessage({ event, api , setStreamState}) {\n  const [state, setState] = useState({ status: null, errorTimer: null, loading: false })\n\n  const message = useMemo(() => {\n    if (!state.status) {\n      return ''\n    }\n    if (state.status === 'fail') {\n      return '视频错误'\n    }\n    if (state.status === 'reload') {\n      if (!state.errorTimer) {\n        return `视频加载错误，正在进行重连...`\n      }\n      return `视频加载错误，正在进行重连第${state.errorTimer}次重连`\n    }\n  }, [state.errorTimer, state.status])\n\n  useEffect(() => {\n    const openStartLoading = () => setState((old) => ({ ...old, loading: true }))\n    const openWaitLoading = () => setState((old) => ({ ...old }))\n    const openSeekLoading = () => setState((old) => ({ ...old, loading: true }))\n    const canplayLoading = () => (setState((old) => ({ ...old, loading: false })), setStreamState && setStreamState(1))\n    const closeLoading = () => setState((old) => ({ ...old, loading: false }))\n    const errorReload = (timer) => setState(() => ({ status: 'reload', errorTimer: timer, loading: true }))\n    const reloadFail = () => setState((old) => ({ ...old, status: 'fail', loading: false }))\n    const reloadSuccess = () => setState((old) => ({ ...old, status: null, loading: false }))\n    const reload = () => setState((old) => ({ ...old, status: 'reload', loading: true }))\n    const playEnd = () => (setState((old) => ({ ...old, status: null, loading: false })), api.pause())\n\n    event.addEventListener('loadstart', openStartLoading)\n    event.addEventListener('waiting', openWaitLoading)\n    event.addEventListener('seeking', openSeekLoading)\n    event.addEventListener('loadeddata', closeLoading)\n    event.addEventListener('canplay', canplayLoading)\n    event.on(EventName.ERROR_RELOAD, errorReload)\n    event.on(EventName.RELOAD_FAIL, reloadFail)\n    event.on(EventName.RELOAD_SUCCESS, reloadSuccess)\n    event.on(EventName.RELOAD, reload)\n    event.on(EventName.HISTORY_PLAY_END, playEnd)\n    event.on(EventName.CLEAR_ERROR_TIMER, reloadSuccess)\n\n    return () => {\n      event.removeEventListener('loadstart', openStartLoading)\n      event.removeEventListener('waiting', openWaitLoading)\n      event.removeEventListener('seeking', openSeekLoading)\n      event.removeEventListener('loadeddata', closeLoading)\n      event.removeEventListener('canplay', canplayLoading)\n      event.off(EventName.ERROR_RELOAD, errorReload)\n      event.off(EventName.RELOAD_FAIL, reloadFail)\n      event.off(EventName.RELOAD_SUCCESS, reloadSuccess)\n      event.off(EventName.RELOAD, reload)\n      event.off(EventName.HISTORY_PLAY_END, playEnd)\n      event.off(EventName.CLEAR_ERROR_TIMER, reloadSuccess)\n    }\n  }, [event])\n\n  const { loading, status } = state\n  return (\n    <div className={`lm-player-message-mask ${loading || status === 'fail' ? 'lm-player-mask-loading-animation' : ''}`}>\n      <IconFont\n        type={status === 'fail' ? 'lm-player-YesorNo_No_Dark' : 'lm-player-Loading'}\n        className={`${loading && status !== 'fail' ? 'lm-player-loading-animation' : status === 'fail' ? 'lm-player-loadfail' : ''} lm-player-loading-icon`}\n      />\n      <span className=\"lm-player-message\">{message}</span>\n    </div>\n  )\n}\n\nexport const ErrorContainer = ({reconnectHandle}) => {\n    return (\n      <>\n        <div className=\"lm-player-message-mask lm-player-mask-loading-animation\">\n          <IconFont style={{ fontSize: 68, color: '#DBE1EA' }} type={'lm-player-YesorNo_No_Dark'}/>\n           <span className=\"lm-player-message\">连接失败<span className=\"refresh-action\" onClick={()=> reconnectHandle()}>刷新重试</span></span>\n         </div>\n      </>\n    )\n}\n\nexport const NoSource = ({ install }) => {\n  const _TEMP_PLAY_CODE = sessionStorage.getItem('_TEMP_PLAY_CODE')\n  const _APP_PLAY_VERSION  = sessionStorage.getItem('_APP_PLAY_VERSION')\n  const _TEMP_PLAY_PATH = window.BSConfig?.playerDownloadUrl || localStorage.getItem('ZVPlayerUrl')\n  return (\n    <div className=\"lm-player-message-mask lm-player-mask-loading-animation\">\n      <IconFont style={{ fontSize: 80 }} type=\"lm-player-PlaySource\" title=\"请选择视频源\"></IconFont>\n      {_TEMP_PLAY_CODE == '20000' && (\n        <span\n          className=\"lm-player-message\"\n        >\n          请\n          <a className=\"install-link\"\n            target=\"_blank\"\n            href={_TEMP_PLAY_PATH}\n            style={{ pointerEvents: 'all', textDecoration: 'none' }}\n            download=\"ZVPlayer.exe\"\n            rel=\"noopener noreferrer\"\n          >下载</a>播放插件\n        </span>\n      )}\n      {_TEMP_PLAY_CODE == '10001' && (\n        <span\n          className=\"lm-player-message\"\n        >\n          当前播放插件版本低，建议您升级最新版本\n          <a target=\"_blank\"\n          href={_TEMP_PLAY_PATH}\n          style={{ pointerEvents: 'all', textDecoration: 'none' }}\n          download=\"ZVPlayer.exe\"\n          rel=\"noopener noreferrer\"className=\"install-link\">{_APP_PLAY_VERSION}</a>\n        </span>\n      )}\n    </div>\n  )\n}\n\nexport default VideoMessage\n","import React, { useEffect, useState, useMemo, useCallback } from 'react'\nimport IconFont from './iconfont'\nimport Slider from './slider'\nimport { timeStamp } from './util'\nimport './style/time-line.less'\n\nfunction TineLine({ event, api, visibel }) {\n  const [state, setState] = useState({ duration: 0, currentTime: 0, buffered: 0 })\n\n  useEffect(() => {\n    const getDuration = () => setState((old) => ({ ...old, duration: api.getDuration() }))\n    const getCurrentTime = () => setState((old) => ({ ...old, currentTime: api.getCurrentTime(), buffered: api.getSecondsLoaded() }))\n    const getBuffered = () => setState((old) => ({ ...old, buffered: api.getSecondsLoaded() }))\n    const seekendPlay = () => api.play()\n\n    event.addEventListener('loadedmetadata', getDuration)\n    event.addEventListener('durationchange', getDuration)\n    event.addEventListener('timeupdate', getCurrentTime)\n    event.addEventListener('progress', getBuffered)\n    event.addEventListener('suspend', getBuffered)\n    event.addEventListener('seeked', seekendPlay)\n\n    return () => {\n      event.removeEventListener('loadedmetadata', getDuration)\n      event.removeEventListener('durationchange', getDuration)\n      event.removeEventListener('timeupdate', getCurrentTime)\n      event.removeEventListener('progress', getBuffered)\n      event.removeEventListener('suspend', getBuffered)\n      event.removeEventListener('seeked', seekendPlay)\n    }\n  }, [event, api])\n\n  const { duration, currentTime, buffered } = state\n  const playPercent = useMemo(() => Math.round((currentTime / duration) * 100), [currentTime, duration])\n  const bufferedPercent = useMemo(() => Math.round((buffered / duration) * 100), [buffered, duration])\n\n  const changePlayTime = useCallback(\n    (percent) => {\n      const currentTime = percent * duration\n      api.pause()\n      api.seekTo(currentTime)\n      setState((old) => ({ ...old, currentTime }))\n    },\n    [duration, api]\n  )\n\n  const renderTimeLineTips = (percent) => {\n    const currentTime = percent * duration\n    const time = timeStamp(currentTime)\n    return <span>{time}</span>\n  }\n\n  return (\n    <div className={`video-time-line-layout ${!visibel ? 'hide-time-line' : ''}`}>\n      <IconFont type=\"lm-player-PrevFast\" onClick={() => api.backWind()} className=\"time-line-action-item\" />\n      <Slider className=\"time-line-box\" currentPercent={playPercent} availablePercent={bufferedPercent} onChange={changePlayTime} renderTips={renderTimeLineTips} />\n      <IconFont type=\"lm-player-NextFast_Light\" onClick={() => api.fastForward()} className=\"time-line-action-item\" />\n    </div>\n  )\n}\n\nexport default TineLine\n","import React, { useState, useEffect, useRef } from 'react'\r\n\r\nfunction ErrorEvent({api, event, flv, hls, errorNoticeHandle }) {\r\n  const errorInfo = useRef(null)\r\n  /**\r\n    * 流播放，出错情况捕获\r\n    * @param  {...any} args \r\n    * @returns \r\n  */\r\n  const errorHandle = (...args) => {\r\n    console.error(...args)\r\n    if (args[2] && args[2].msg && args[2].msg.includes('Unsupported audio')) {\r\n      return\r\n    }\r\n\r\n    if(args[1] && args[1].details && (\r\n      args[1].details.includes(\"bufferStalledError\") || \r\n      args[1].details.includes(\"bufferNudgeOnStall\") || \r\n      args[1].details.includes(\"bufferSeekOverHole\") || \r\n      args[1].details.includes(\"bufferAddCodecError\") \r\n    )){\r\n      return\r\n    }\r\n    errorInfo.current = args\r\n    api.unload()\r\n    errorNoticeHandle && errorNoticeHandle()\r\n  }\r\n\r\n  useEffect(() => {\r\n    try {\r\n      if (flv) {\r\n        flv.on('error', errorHandle)\r\n        flv.on('media_source_buffer_full', errorHandle);\r\n        flv.on('media_source_ended', errorHandle)\r\n      }\r\n      if (hls) {\r\n        hls.on('hlsError', errorHandle)\r\n      }\r\n    } catch (e) {\r\n      console.warn(e)\r\n    }\r\n     \r\n    event.addEventListener('error', errorHandle, false)\r\n    return () => {\r\n      try {\r\n        if (flv) {\r\n          flv.off('error', errorHandle)\r\n          flv.off('media_source_buffer_full', errorHandle)\r\n          flv.off('media_source_ended', errorHandle)\r\n        }\r\n        if (hls) {\r\n          hls.off('hlsError', errorHandle)\r\n        }\r\n      } catch (e) {\r\n        console.warn(e)\r\n      }\r\n      event.removeEventListener('error', errorHandle, false)\r\n    }\r\n  }, [event, flv, hls])\r\n\r\n  return <></>\r\n}\r\n\r\nexport default ErrorEvent\r\n","import React from 'react'\nimport { computedBound } from '../util'\nimport PropTypes from 'prop-types'\n\nclass DragEvent extends React.Component {\n  constructor(props) {\n    super(props)\n    const { playContainer } = props\n\n    this.dragDom = playContainer.querySelector('.player-mask-layout')\n    this.position = {\n      start: [0, 0],\n      end: [0, 0]\n    }\n  }\n  componentDidMount() {\n    this.dragDom.addEventListener('mousedown', this.openDrag)\n    this.props.event.addEventListener('transform', this.transformChange, true)\n  }\n  componentWillUnmount() {\n    this.dragDom.removeEventListener('mousedown', this.openDrag)\n  }\n  openDrag = e => {\n    this.position.start = [e.pageX, e.pageY]\n    this.dragDom.addEventListener('mousemove', this.moveChange)\n    document.body.addEventListener('mouseup', this.stopDrag)\n  }\n  moveChange = e => {\n    const { api } = this.props\n    const currentPosition = api.getPosition()\n    this.position.end = [e.pageX, e.pageY]\n    const x = currentPosition[0] + (this.position.end[0] - this.position.start[0])\n    const y = currentPosition[1] + (this.position.end[1] - this.position.start[1])\n    const position = [x, y]\n    api.setPosition(position)\n    this.position.start = [e.pageX, e.pageY]\n  }\n  stopDrag = () => {\n    this.dragDom.removeEventListener('mousemove', this.moveChange)\n    document.body.removeEventListener('mouseup', this.stopDrag)\n    this.transformChange()\n  }\n  transformChange = () => {\n    const { api } = this.props\n    let position = computedBound(this.dragDom, api.getPosition(), api.getScale())\n    position && api.setPosition(position, true)\n  }\n\n  render() {\n    return null\n  }\n}\n\nDragEvent.propTypes = {\n  api: PropTypes.object,\n  event: PropTypes.object,\n  playContainer: PropTypes.node,\n  playerProps: PropTypes.object\n}\nexport default DragEvent\n","\r\nimport lcStore from \"./url/lcStore\";\r\nimport { JSONP } from '../util';\r\n\r\nclass lcStoreService {\r\n  /**\r\n   * @desc 获取视频流接口\r\n   */\r\n  // uri=<pull_uri>&resolution=<resolution>&bitrate=<bitrate>&key=<key>\r\n   getTranscodingStream(data) {\r\n\r\n  } \r\n\r\n  /**\r\n   * 修改视频流接口\r\n   * @param {*} data \r\n   */\r\n\r\n   setStreamResolution(code){\r\n    // /video/v1/change?&resolution=<resolution>&bitrate=<bitrate>&key=<key>\r\n    let url = lcStore.setStreamResolution.value.replace('<resolution>',code) + '&key=a123'\r\n    JSONP(url);\r\n  }\r\n}\r\nexport default new lcStoreService();\r\n","import { fullscreen, isFullscreen, exitFullscreen } from './util'\r\nimport EventName from './event/eventName'\r\nimport lcStore from \"./service/lcStore\";\r\n\r\nlet index = 0\r\nexport default class Api {\r\n  constructor({ video, playContainer, event, flv, hls, resolution, screenNum }) {\r\n    this.player = video\r\n    this.playContainer = playContainer\r\n    this.flv = flv\r\n    this.hls = hls\r\n    this.event = event\r\n    this.scale = 1\r\n    this.position = [0, 0]\r\n    // 分辨率\r\n    this.resolution = resolution\r\n    // 分屏数 其他模式为空\r\n    this.screenNum = screenNum || 0\r\n  }\r\n  /**\r\n   * 播放器销毁后 动态跟新api下的flv，hls对象\r\n   * @param {*} param0\r\n   */\r\n  updateChunk({ flv, hls }) {\r\n    this.flv = flv\r\n    this.hls = hls\r\n  }\r\n  /**\r\n   * 全屏\r\n   */\r\n  requestFullScreen() {\r\n    if (!isFullscreen(this.playContainer)) {\r\n      fullscreen(this.playContainer)\r\n    }\r\n  }\r\n  /**\r\n   * 退出全屏\r\n   */\r\n  cancelFullScreen() {\r\n    if (isFullscreen(this.playContainer)) {\r\n      exitFullscreen()\r\n    }\r\n  }\r\n  play() {\r\n    if (this.player.paused) {\r\n      this.player.play()\r\n    }\r\n  }\r\n  pause() {\r\n    if (!this.player.paused) {\r\n      this.player.pause()\r\n    }\r\n  }\r\n  destroy() {\r\n    this.player.removeAttribute('src')\r\n    this.flv?.pause()\r\n    this.unload()\r\n    if (this.flv) {\r\n      index++\r\n      this.flv.detachMediaElement && this.flv.detachMediaElement()\r\n      this.flv.destroy()\r\n    }\r\n    if (this.hls) {\r\n      index++\r\n      this.hls.destroy()\r\n    }\r\n\r\n    this.player = null\r\n    this.playContainer = null\r\n    this.flv = null\r\n    this.hls = null\r\n    this.event = null\r\n    this.scale = null\r\n    this.position = null\r\n    // this.playbackRate = 1\r\n    console.warn('destroy', index)\r\n  }\r\n\r\n  /**\r\n   * 设置currentTime实现seek\r\n   * @param {*} seconds\r\n   * @param {*} noEmit\r\n   */\r\n  seekTo(seconds, noEmit) {\r\n    const buffered = this.getBufferedTime()\r\n    if (this.flv && buffered[0] > seconds) {\r\n      this.flv.unload()\r\n      this.flv.load()\r\n    }\r\n    // console.log(this.player)\r\n    if (this.player) {\r\n      // console.log(this.player.currentTime)\r\n      this.player.currentTime = seconds\r\n      if (!noEmit) {\r\n        this.event.emit(EventName.SEEK, seconds)\r\n      }\r\n    }\r\n  }\r\n\r\n    /**\r\n   * 设置currentTime实现seek\r\n   * @param {*} seconds\r\n   * @param {*} noEmit\r\n   */\r\n    seekHsTo(seconds, noEmit) {\r\n      console.log(this.player)\r\n      if (this.player) {\r\n        console.log(this.player.currentTime)\r\n        this.player.currentTime = seconds\r\n        if (!noEmit) {\r\n          this.event.emit(EventName.SEEK, seconds)\r\n        }\r\n      }\r\n    }\r\n  success(notEmit){\r\n    !notEmit && this.event?.emit(EventName.RELOAD)\r\n  }\r\n  /**\r\n   * 视频重载\r\n   */\r\n  reload(notEmit) {\r\n    if (this.getCurrentTime !== 0) {\r\n      this.seekTo(0)\r\n    }\r\n    if (this.hls) {\r\n      this.hls.swapAudioCodec()\r\n      this.hls.recoverMediaError()\r\n    }\r\n    this.unload()\r\n    this.load()\r\n    this.play()\r\n    !notEmit && this.event.emit(EventName.RELOAD)\r\n  }\r\n  unload() {\r\n    this.flv && this.flv.unload()\r\n    this.hls && this.hls.stopLoad()\r\n  }\r\n  load() {\r\n    if (this.flv) {\r\n      this.flv.load()\r\n    }\r\n    if (this.hls) {\r\n      this.hls.startLoad()\r\n      this.hls.loadSource(this.hls.url)\r\n    }\r\n  }\r\n  setVolume(fraction) {\r\n    this.player.volume = fraction\r\n  }\r\n  mute() {\r\n    this.player.muted = true\r\n  }\r\n  unmute() {\r\n    this.player.muted = false\r\n  }\r\n\r\n  /**\r\n   * 开启画中画功能\r\n   */\r\n  requestPictureInPicture() {\r\n    if (this.player.requestPictureInPicture && document.pictureInPictureElement !== this.player) {\r\n      this.player.requestPictureInPicture()\r\n    }\r\n  }\r\n  /**\r\n   * 关闭画中画功能\r\n   */\r\n  exitPictureInPicture() {\r\n    if (document.exitPictureInPicture && document.pictureInPictureElement === this.player) {\r\n      document.exitPictureInPicture()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置播放速率\r\n   * @param {*} rate\r\n   */\r\n  setPlaybackRate(rate) {\r\n    this.player.playbackRate = rate\r\n  }\r\n  /**\r\n   * 获取视频总时长\r\n   */\r\n  getDuration() {\r\n    if (!this.player) return null\r\n    const { duration, seekable } = this.player\r\n    if (duration === Infinity && seekable.length > 0) {\r\n      return seekable.end(seekable.length - 1)\r\n    }\r\n    return duration\r\n  }\r\n  /**\r\n   * 获取当前播放时间\r\n   */\r\n  getCurrentTime() {\r\n    if (!this.player) return null\r\n    return this.player.currentTime\r\n  }\r\n\r\n  /**\r\n   * 获取缓存时间\r\n   */\r\n  getSecondsLoaded() {\r\n    return this.getBufferedTime()[1]\r\n  }\r\n\r\n  /**\r\n   * 获取当前视频缓存的起止时间\r\n   */\r\n  getBufferedTime() {\r\n    if (!this.player) return []\r\n    const { buffered } = this.player\r\n    if (buffered.length === 0) {\r\n      return [0, 0]\r\n    }\r\n    const end = buffered.end(buffered.length - 1)\r\n    const start = buffered.start(buffered.length - 1)\r\n    const duration = this.getDuration()\r\n    if (end > duration) {\r\n      return duration\r\n    }\r\n    return [start, end]\r\n  }\r\n  /**\r\n   * 快进通过seekTo方法实现\r\n   * @param {*} second\r\n   */\r\n  fastForward(second = 5) {\r\n    const duration = this.getDuration()\r\n    const currentTime = this.getCurrentTime()\r\n    const time = currentTime + second\r\n    this.seekTo(time > duration - 1 ? duration - 1 : time)\r\n  }\r\n\r\n  /**\r\n   * 快退通过seekTo方法实现\r\n   * @param {*} second\r\n   */\r\n  backWind(second = 5) {\r\n    const currentTime = this.getCurrentTime()\r\n    const time = currentTime - second\r\n    this.seekTo(time < 1 ? 1 : time)\r\n  }\r\n\r\n  /**\r\n   * 视频截屏方法\r\n   */\r\n  snapshot() {\r\n    let canvas = document.createElement('canvas')\r\n    let ctx = canvas.getContext('2d')\r\n    canvas.width = this.player.videoWidth\r\n    canvas.height = this.player.videoHeight\r\n    ctx.drawImage(this.player, 0, 0, canvas.width, canvas.height)\r\n    setTimeout(() => {\r\n      canvas.remove()\r\n      canvas = null\r\n      ctx = null\r\n    }, 200)\r\n    return canvas.toDataURL()\r\n  }\r\n  setScale(num, isRest = false) {\r\n    let scale = this.scale + num\r\n    if (isRest) {\r\n      scale = num\r\n    } else {\r\n      if (scale < 1) {\r\n        scale = 1\r\n      }\r\n      if (scale > 3) {\r\n        scale = 3\r\n      }\r\n    }\r\n    this.scale = scale\r\n    this.player.style.transition = 'transform 0.3s'\r\n    this.__setTransform()\r\n    this.event.emit(EventName.TRANSFORM)\r\n    setTimeout(() => {\r\n      this.player.style.transition = 'unset'\r\n    }, 1000)\r\n  }\r\n  getScale() {\r\n    return this.scale\r\n  }\r\n  /**\r\n   * 获取当前播放对象分辨率\r\n   * @returns \r\n   */\r\n  getResolution(){\r\n    return this.resolution\r\n  }\r\n  \r\n  /**\r\n   * 获取当前分屏数\r\n   * @returns \r\n   */\r\n  getCurrentScreen(){\r\n    return this.screenNum\r\n  }\r\n  \r\n  setPosition(position, isAnimate) {\r\n    this.position = position\r\n    this.player.style.transition = isAnimate ? 'transform 0.3s' : 'unset'\r\n    this.__setTransform()\r\n  }\r\n  getPosition() {\r\n    return this.position\r\n  }\r\n  __setTransform() {\r\n    this.player.style.transform = `scale(${this.scale}) translate(${this.position[0]}px,${this.position[1]}px)`\r\n  }\r\n  exeRatioCommand(ratio){\r\n    lcStore.setStreamResolution(ratio)\r\n  }\r\n\r\n\r\n    /**\r\n   * 设置播放速率\r\n   * @param {*} rate\r\n   */\r\n  setPlaybackRate(rate) {\r\n    this.playbackRate = rate\r\n    this.player && (this.player.playbackRate = rate)\r\n  }\r\n\r\n  restPlayRate(){\r\n    console.info(this.playbackRate)\r\n    this.player.playbackRate = this.playbackRate\r\n  }\r\n\r\n  getPlayerIng(){\r\n    return this.player.playbackRate\r\n  }\r\n\r\n  getApi() {\r\n    return {\r\n      play: this.play.bind(this),\r\n      reload: this.reload.bind(this),\r\n      success: this.success.bind(this),\r\n      pause: this.pause.bind(this),\r\n      seekTo: this.seekTo.bind(this),\r\n      seekHsTo: this.seekHsTo.bind(this),\r\n      setVolume: this.setVolume.bind(this),\r\n      mute: this.mute.bind(this),\r\n      unmute: this.unmute.bind(this),\r\n      requestPictureInPicture: this.requestPictureInPicture.bind(this),\r\n      exitPictureInPicture: this.exitPictureInPicture.bind(this),\r\n      setPlaybackRate: this.setPlaybackRate.bind(this),\r\n      destroy: this.destroy.bind(this),\r\n      getDuration: this.getDuration.bind(this),\r\n      getCurrentTime: this.getCurrentTime.bind(this),\r\n      getSecondsLoaded: this.getSecondsLoaded.bind(this),\r\n      getBufferedTime: this.getBufferedTime.bind(this),\r\n      fastForward: this.fastForward.bind(this),\r\n      backWind: this.backWind.bind(this),\r\n      snapshot: this.snapshot.bind(this),\r\n      requestFullScreen: this.requestFullScreen.bind(this),\r\n      cancelFullScreen: this.cancelFullScreen.bind(this),\r\n      __player: this.player,\r\n      flv: this.flv,\r\n      hls: this.hls,\r\n      restPlayRate: this.restPlayRate.bind(this),\r\n      getPlayerIng: this.getPlayerIng.bind(this),\r\n    }\r\n  }\r\n}\r\n","function getHiddenProp() {\n  const prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\n  // 如果hidden 属性是原生支持的，我们就直接返回\n  if (\"hidden\" in document) {\n    return \"hidden\";\n  }\n\n  // 其他的情况就循环现有的浏览器前缀，拼接我们所需要的属性\n  for (let i = 0; i < prefixes.length; i++) {\n    // 如果当前的拼接的前缀在 document对象中存在 返回即可\n    if (prefixes[i] + \"Hidden\" in document) {\n      return prefixes[i] + \"Hidden\";\n    }\n  }\n\n  // 其他的情况 直接返回null\n  return null;\n}\n\nfunction getVisibilityState() {\n  const prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\n\n  if (\"visibilityState\" in document) {\n    return \"visibilityState\";\n  }\n\n  for (let i = 0; i < prefixes.length; i++) {\n    if (prefixes[i] + \"VisibilityState\" in document) {\n      return prefixes[i] + \"VisibilityState\";\n    }\n  }\n  // 找不到返回 null\n  return null;\n}\n\nfunction visibilityState() {\n  return document[getVisibilityState()];\n}\n\nfunction addEventListener(listener) {\n  const visProp = getHiddenProp();\n  const evtname = visProp.replace(/[H|h]idden/, \"\") + \"visibilitychange\";\n  document.addEventListener(evtname, listener, false);\n}\n\nfunction removeEventListener(listener) {\n  const visProp = getHiddenProp();\n  const evtname = visProp.replace(/[H|h]idden/, \"\") + \"visibilitychange\";\n  document.removeEventListener(evtname, listener, false);\n}\n\nexport default {\n  addEventListener,\n  removeEventListener,\n  visibilityState\n};\n","import React, { useEffect } from 'react'\nimport BrowserTab from './event/browserTabEvent'\n\nfunction LiveHeart({ api }) {\n  useEffect(() => {\n    const browserTabChange = function() {\n      if (BrowserTab.visibilityState() === 'visible') {\n        const current = api.getCurrentTime()\n        const buffered = api.getSecondsLoaded()\n        if (buffered - current > 5) {\n          console.warn(`当前延时过大current->${current} buffered->${buffered}, 基于视频当前缓存时间更新当前播放时间 updateTime -> ${buffered - 2}`)\n          api.seekTo(buffered - 2 > 0 ? buffered - 2 : 0)\n        }\n      }\n    }\n    BrowserTab.addEventListener(browserTabChange)\n    return () => {\n      BrowserTab.removeEventListener(browserTabChange)\n    }\n  }, [api])\n  return <></>\n}\n\nexport default LiveHeart\n","import React, { useRef, useEffect, useState, useMemo, useCallback, useContext, createContext } from 'react';\r\nimport VideoEvent from './event';\r\nimport { getVideoType, createFlvPlayer, createHlsPlayer,detectorPlayeMode, decodeService, getScreenRate, installState,getGlobalCache, monitorHlsFragments } from './util';\r\nimport ContrallerBar from './contraller_bar';\r\nimport ContrallerEvent from './event/contrallerEvent';\r\nimport VideoMessage, { NoSource, ErrorContainer} from './message';\r\nimport TimeLine from './time_line';\r\nimport ErrorEvent from './event/errorEvent';\r\nimport DragEvent from './event/dragEvent';\r\nimport Api from './api';\r\nimport LiveHeart from './live_heart';\r\nimport PropTypes from 'prop-types';\r\nimport IconFont from './iconfont'\r\nimport {GL_CACHE} from './constant'\r\nimport './style/index.less';\r\nimport './style/message.less'\r\n\r\nconst CountContext = createContext(12)\r\n\r\nconst ReConnection = ({connectHandle}) => {\r\n  const {connectCount, connectStatus, children} = useContext(CountContext)\r\n\r\n  return (\r\n    <>\r\n       <div className={'lm-player-container lm-c-player-component ocean-error'}>\r\n          <div className=\"player-mask-layout\"><video/></div>\r\n          {children}\r\n          <div className=\"lm-player-message-mask lm-player-mask-loading-animation\">\r\n            {\r\n              connectStatus == 0 && <span  className=\"lm-player-message\" style={{ fontSize: 18 }}>第{ connectCount }次连接中，请稍候...</span>\r\n            }\r\n          </div>\r\n        </div>\r\n    </>\r\n  )\r\n}\r\n\r\n/**\r\n * 播放控件容器\r\n * @param {*} param0 \r\n * @returns \r\n */\r\nfunction SinglePlayer({...props}){\r\n  const [connectStatus, setConnectStatus] = useState(1);\r\n  const connectCount = useRef(0)\r\n\r\n  const timer = useRef(null)\r\n  const playerStatus = useRef(0)\r\n\r\n  useEffect(() => {\r\n    if(!getGlobalCache(GL_CACHE.FR_CON)){\r\n      updateStatus(1)\r\n    }\r\n    return () => {\r\n      timer && clearTimeout(timer)\r\n    }\r\n  }, [])\r\n\r\n  const setConnectCount = (count)=>{\r\n    connectCount.current = count;\r\n  }\r\n\r\n  const reconnectHandle = ()=>{\r\n    setConnectStatus(0)\r\n    setConnectCount(0)\r\n    timer.current = setTimeout(()=>{\r\n      // 连接\r\n      setConnectStatus(1)\r\n   })\r\n  }\r\n\r\n  const updateStatus = (status)=>{\r\n    playerStatus.current = status;\r\n  }\r\n\r\n  return (<>\r\n    {connectStatus !== 0 ? \r\n    <ZPlayer\r\n    errorNoticeHandle={()=>{\r\n      if(playerStatus.current == 0){\r\n        console.warn('首次开流失败！');\r\n        setConnectStatus(2)\r\n        return\r\n      }\r\n\r\n      if(playerStatus.current == 1){\r\n        setConnectCount(0)\r\n        updateStatus(2)\r\n      }\r\n        \r\n      console.warn('开流连接次数....'+connectCount.current)\r\n\r\n      const currentStatus = props.errorReloadTimer > connectCount.current\r\n      if(currentStatus){\r\n        setConnectCount(connectCount.current + 1)\r\n        setConnectStatus(0)\r\n        // 开启定时器-更新连接状态\r\n        timer.current = setTimeout(()=>{\r\n          // 连接状态重置为可连接状态\r\n          setConnectStatus(1)\r\n        }, 1000*1)\r\n      }else{\r\n        setConnectStatus(0)\r\n        // 开启定时器-更新连接状态\r\n        timer.current = setTimeout(()=>{\r\n            // 结束连接\r\n            setConnectStatus(2)\r\n         })\r\n      }\r\n   }}\r\n   {...props}\r\n   onStreamMounted={(data)=>{\r\n    if(data.streamState == 1){\r\n      // 开流成功\r\n      updateStatus(1)\r\n    }\r\n    props.onStreamMounted && props.onStreamMounted(data)\r\n   }}\r\n    connectStatus={connectStatus}\r\n    reconnectHandle={reconnectHandle}\r\n   >\r\n   </ZPlayer> :     \r\n   <CountContext.Provider value={{\r\n     connectStatus,\r\n     connectCount: connectCount.current,\r\n     children: props.errorExtContents\r\n   }}>\r\n      <ReConnection connectHandle={()=>reconnectHandle()}/>\r\n   </CountContext.Provider>}\r\n   </> )\r\n}\r\n\r\nfunction ZPlayer({ type, file, className, autoPlay, muted, poster, playsinline, loop, preload, children, onInitPlayer, screenNum,deviceInfo, ...props }) {\r\n  const playContainerRef = useRef(null);\r\n  const [playerObj, setPlayerObj] = useState(null);\r\n  const playerRef = useRef(null);\r\n  // 分屏数 分辨率\r\n  const rate = useMemo(() => getScreenRate(screenNum), [screenNum]);\r\n  const [resolution, setResolution] = useState(rate);\r\n\r\n  const [colorPicker, setColorPicker] = useState(null);\r\n\r\n  const [install, setInstall] = useState(false);\r\n\r\n  const [hideBar, setHideBar] = useState(false);\r\n\r\n  // 开流状态 0 失败/未开流  1 开流成功\r\n  const [streamState, setStreamState] = useState(0);\r\n\r\n  function onToken(token){\r\n    props.onVideoFn && props.onVideoFn({\r\n      uuid: token\r\n    })\r\n  }\r\n\r\n  useEffect(\r\n    () => () => {\r\n      if (playerRef.current && playerRef.current.event) {\r\n        playerRef.current.event.destroy();\r\n      }\r\n      if (playerRef.current && playerRef.current.api) {\r\n        playerRef.current.api.destroy();\r\n      } \r\n      playerRef.current = null;\r\n    },\r\n    [file,resolution]\r\n  );\r\n\r\n  /**\r\n   * 销毁播放器事件对象\r\n   * @param {*} player \r\n   */\r\n  const destroyEvent=(player)=>{\r\n    if (player.event) {\r\n      player.event.destroy();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 创建播放器事件器\r\n   * @param {*} player \r\n   * @returns \r\n   */\r\n  const createEvent=(player = {})=>{\r\n    return new VideoEvent(player.video)\r\n  }\r\n\r\n  /**\r\n   * 销毁播放器API对象\r\n   * @param {}} player \r\n   */\r\n  const destroyApi=(player)=>{\r\n    if (player.api) {\r\n      player.api.destroy();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 创建播放器API对象\r\n   * @param {*} player \r\n   * @returns \r\n   */\r\n  const createApi=(player = {})=>{\r\n    return new Api(player)\r\n  }\r\n\r\n  const createPlayServer = (player = {} , file , playStatus = 1)=>{\r\n    const { resolution, deviceInfo } = player\r\n    let isInit = false;\r\n\r\n    // playStatus=2 播放出错情况\r\n    if(playStatus == 2) return\r\n\r\n    const formartType = getVideoType(file);\r\n    if (formartType === 'flv' || type === 'flv') {\r\n      isInit = true;\r\n      try{\r\n        player.flv = createFlvPlayer(player.video, { ...props, file: decodeService({file, resolution, deviceInfo}, onToken) });\r\n      }catch(e) {\r\n        console.error(e)\r\n      }\r\n    }\r\n    if (formartType === 'm3u8' || type === 'hls') {\r\n      isInit = true;\r\n      try{\r\n        player.hls = createHlsPlayer(player.video, file);\r\n        monitorHlsFragments(player.hls, resolution)\r\n      }catch(e) {\r\n        console.error(e)\r\n      }\r\n    }\r\n    if (!isInit && (!['flv', 'm3u8'].includes(formartType) || type === 'native')) {\r\n      player.video.src = file;\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!file) {\r\n      return;\r\n    }\r\n\r\n    const playerObject = {\r\n      playContainer: playContainerRef.current,\r\n      video: playContainerRef.current.querySelector('video'),\r\n      resolution: resolution,\r\n      screenNum: screenNum,\r\n      playeMode : detectorPlayeMode(),\r\n      deviceInfo: deviceInfo,\r\n    };\r\n    const playStatus = props.connectStatus\r\n\r\n\r\n    createPlayServer(playerObject, file, playStatus)\r\n    destroyEvent(playerObject)\r\n    destroyApi(playerObject)\r\n\r\n    playerObject.event = createEvent(playerObject)\r\n    playerObject.api = createApi(playerObject);\r\n\r\n    playerRef.current = playerObject;\r\n    setPlayerObj(() => playerObject);\r\n\r\n    if (onInitPlayer) {\r\n      onInitPlayer(Object.assign({}, playerObject.api.getApi(), playerObject.event.getApi()));\r\n    }\r\n  }, [file,resolution]);\r\n\r\n  useEffect(() => {\r\n    installState(function(){\r\n      setInstall(true)\r\n    })\r\n    // 开流状态 0 失败/未开流  1 开流成功\r\n    props.onStreamMounted && props.onStreamMounted({streamState})\r\n  }, [streamState]);\r\n\r\n  /**\r\n   * 创建播放器事件器\r\n   * @param {*} player \r\n   * @returns \r\n   */\r\n  const mosLeaveHandler=(e = {})=>{\r\n      setHideBar(Math.round(Math.random()*100))\r\n  }\r\n\r\n  return (\r\n    <div className={`lm-player-container ${className}`} ref={playContainerRef} onMouseLeave={mosLeaveHandler}>\r\n      <div className=\"player-mask-layout\">\r\n        <video autoPlay={autoPlay} preload={preload} muted={muted} poster={poster} controls={false} crossorigin={\"Anonymous\"} usecors={true} playsInline={playsinline} loop={loop} style={colorPicker} />\r\n      </div>\r\n      <VideoTools\r\n        playerObj={playerObj}\r\n        isLive={props.isLive}\r\n        key={file}\r\n        install={install}\r\n        hideContrallerBar={props.hideContrallerBar}\r\n        scale={props.scale}\r\n        switchResolution={(resolution) => {\r\n          setResolution(resolution)\r\n        }}\r\n        colorPicker={(value) => {\r\n          setColorPicker(value)\r\n        }}\r\n        hideBar={hideBar}\r\n        setStreamState={setStreamState}\r\n        snapshot={props.snapshot}\r\n        leftExtContents={props.leftExtContents}\r\n        leftMidExtContents={props.leftMidExtContents}\r\n        rightExtContents={props.rightExtContents}\r\n        rightMidExtContents={props.rightMidExtContents}\r\n        draggable={props.draggable}\r\n        errorNoticeHandle={props.errorNoticeHandle}\r\n        connectStatus={props.connectStatus}\r\n        reconnectHandle={props.reconnectHandle}\r\n      />\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction VideoTools({\r\n  playerObj,\r\n  draggable,\r\n  isLive,\r\n  hideContrallerBar,\r\n  scale,\r\n  snapshot,\r\n  switchResolution,\r\n  leftExtContents,\r\n  leftMidExtContents,\r\n  rightExtContents,\r\n  rightMidExtContents,\r\n  install,\r\n  colorPicker,\r\n  setStreamState,\r\n  errorNoticeHandle,\r\n  connectStatus,\r\n  reconnectHandle,\r\n  hideBar,\r\n}) {\r\n  if (!playerObj) {\r\n    return <NoSource install={install}/>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {connectStatus == 2 ? <ErrorContainer reconnectHandle={reconnectHandle} /> : <VideoMessage api={playerObj?.api} event={playerObj?.event} setStreamState={setStreamState}/>}\r\n      {draggable && <DragEvent playContainer={playerObj?.playContainer} api={playerObj?.api} event={playerObj?.event} />}\r\n      {!hideContrallerBar && (\r\n        <ContrallerEvent event={playerObj?.event} playContainer={playerObj?.playContainer}>\r\n          <ContrallerBar\r\n            api={playerObj.api}\r\n            event={playerObj.event}\r\n            playContainer={playerObj.playContainer}\r\n            video={playerObj.video}\r\n            snapshot={snapshot}\r\n            colorPicker={colorPicker}\r\n            switchResolution={switchResolution}\r\n            rightExtContents={rightExtContents}\r\n            rightMidExtContents={rightMidExtContents}\r\n            scale={scale}\r\n            isHistory={false}\r\n            isLive={isLive}\r\n            leftExtContents={leftExtContents}\r\n            leftMidExtContents={leftMidExtContents}\r\n            hideBar={hideBar}\r\n          />\r\n          {!isLive && <TimeLine api={playerObj.api} event={playerObj.event} />}\r\n        </ContrallerEvent>\r\n      )}\r\n      <ErrorEvent flv={playerObj.flv} hls={playerObj.hls} api={playerObj.api} event={playerObj.event} errorNoticeHandle={errorNoticeHandle}/>\r\n      {isLive && <LiveHeart api={playerObj.api} />}\r\n    </>\r\n  );\r\n}\r\n\r\nSinglePlayer.propTypes = {\r\n  file: PropTypes.string.isRequired, //播放地址 必填\r\n  isLive: PropTypes.bool, //是否实时视频\r\n  errorReloadTimer: PropTypes.number, //视频错误重连次数\r\n  type: PropTypes.oneOf(['flv', 'hls', 'native']), //强制视频流类型\r\n  onInitPlayer: PropTypes.func,\r\n  draggable: PropTypes.bool,\r\n  hideContrallerBar: PropTypes.bool,\r\n  scale: PropTypes.bool,\r\n  muted: PropTypes.string,\r\n  autoPlay: PropTypes.bool,\r\n  playsInline: PropTypes.bool,\r\n  preload: PropTypes.string,\r\n  poster: PropTypes.string,\r\n  loop: PropTypes.bool,\r\n  snapshot: PropTypes.func,\r\n  className: PropTypes.string,\r\n  rightExtContents: PropTypes.element,\r\n  rightMidExtContents: PropTypes.element,\r\n  leftExtContents: PropTypes.element,\r\n  leftMidExtContents: PropTypes.element,\r\n  flvOptions: PropTypes.object,\r\n  flvConfig: PropTypes.object,\r\n  children: PropTypes.element,\r\n};\r\nSinglePlayer.defaultProps = {\r\n  isLive: true,\r\n  draggable: true,\r\n  scale: true,\r\n  errorReloadTimer: 2,\r\n  muted: 'muted',\r\n  autoPlay: true,\r\n  playsInline: false,\r\n  preload: 'auto',\r\n  loop: false,\r\n  hideContrallerBar: false,\r\n};\r\n\r\nexport default SinglePlayer;\r\n","import React, { useEffect, useState, useMemo } from 'react'\nimport IconFont from '../iconfont'\nimport EventName from '../event/eventName'\nimport '../style/message.less'\n\nfunction VideoMessage({ event, api , setStreamState}) {\n  const [state, setState] = useState({ status: null, errorTimer: null, loading: false })\n\n  const message = useMemo(() => {\n    if (!state.status) {\n      return ''\n    }\n    if (state.status === 'fail') {\n      return '视频错误'\n    }\n    if (state.status === 'reload') {\n      if (!state.errorTimer) {\n        return `视频加载错误，正在进行重连...`\n      }\n      return `视频加载错误，正在进行重连第${state.errorTimer}次重连`\n    }\n  }, [state.errorTimer, state.status])\n\n  useEffect(() => {\n    const openStartLoading = () => setState((old) => ({ ...old, loading: true }))\n    const openWaitLoading = () => setState((old) => ({ ...old }))\n    const openSeekLoading = () => setState((old) => ({ ...old, loading: true }))\n    const canplayLoading = () => (setState((old) => ({ ...old, loading: false })), setStreamState && setStreamState(1))\n    const closeLoading = () => setState((old) => ({ ...old, loading: false }))\n    const errorReload = (timer) => setState(() => ({ status: 'reload', errorTimer: timer, loading: true }))\n    const reloadFail = () => setState((old) => ({ ...old, status: 'fail', loading: false }))\n    const reloadSuccess = () => setState((old) => ({ ...old, status: null, loading: false }))\n    const reload = () => setState((old) => ({ ...old, status: 'reload', loading: true }))\n    const playEnd = () => (setState((old) => ({ ...old, status: null, loading: false })), api.pause())\n\n    event.addEventListener('loadstart', openStartLoading)\n    event.addEventListener('waiting', openWaitLoading)\n    event.addEventListener('seeking', openSeekLoading)\n    event.addEventListener('loadeddata', closeLoading)\n    event.addEventListener('canplay', canplayLoading)\n    event.on(EventName.ERROR_RELOAD, errorReload)\n    event.on(EventName.RELOAD_FAIL, reloadFail)\n    event.on(EventName.RELOAD_SUCCESS, reloadSuccess)\n    event.on(EventName.RELOAD, reload)\n    event.on(EventName.HISTORY_PLAY_END, playEnd)\n    event.on(EventName.CLEAR_ERROR_TIMER, reloadSuccess)\n\n    return () => {\n      event.removeEventListener('loadstart', openStartLoading)\n      event.removeEventListener('waiting', openWaitLoading)\n      event.removeEventListener('seeking', openSeekLoading)\n      event.removeEventListener('loadeddata', closeLoading)\n      event.removeEventListener('canplay', canplayLoading)\n      event.off(EventName.ERROR_RELOAD, errorReload)\n      event.off(EventName.RELOAD_FAIL, reloadFail)\n      event.off(EventName.RELOAD_SUCCESS, reloadSuccess)\n      event.off(EventName.RELOAD, reload)\n      event.off(EventName.HISTORY_PLAY_END, playEnd)\n      event.off(EventName.CLEAR_ERROR_TIMER, reloadSuccess)\n    }\n  }, [event])\n\n  const { loading, status } = state\n  return (\n    <div className={`lm-player-message-mask ${loading || status === 'fail' ? 'lm-player-mask-loading-animation' : ''}`}>\n      <IconFont\n        type={status === 'fail' ? 'lm-player-YesorNo_No_Dark' : 'lm-player-Loading'}\n        className={`${loading && status !== 'fail' ? 'lm-player-loading-animation' : status === 'fail' ? 'lm-player-loadfail' : ''} lm-player-loading-icon`}\n      />\n      <span className=\"lm-player-message\">{message}</span>\n    </div>\n  )\n}\n\nexport const NoSource = ({ install }) => {\n  const _TEMP_PLAY_CODE = sessionStorage.getItem('_TEMP_PLAY_CODE')\n  // const _TEMP_PLAY_PATH = sessionStorage.getItem('_TEMP_PLAY_PATH')\n  const _APP_PLAY_VERSION  = sessionStorage.getItem('_APP_PLAY_VERSION')\n  const _TEMP_PLAY_PATH = window.BSConfig?.playerDownloadUrl || localStorage.getItem('ZVPlayerUrl')\n  return (\n    <div className=\"lm-player-message-mask lm-player-mask-loading-animation\">\n      <IconFont style={{ fontSize: 80 }} type=\"lm-player-PlaySource\" title=\"请选择视频源\"></IconFont>\n      {_TEMP_PLAY_CODE == '20000' && (\n        <span\n          className=\"lm-player-message\"\n        >\n          请\n          <a className=\"install-link\"\n            target=\"_blank\"\n            href={_TEMP_PLAY_PATH}\n            style={{ pointerEvents: 'all', textDecoration: 'none' }}\n            download=\"ZVPlayer.exe\"\n            rel=\"noopener noreferrer\"\n          >下载</a>播放插件\n        </span>\n      )}\n      {_TEMP_PLAY_CODE == '10001' && (\n        <span\n          className=\"lm-player-message\"\n        >\n          当前播放插件版本低，建议您升级最新版本\n          <a target=\"_blank\"\n          href={_TEMP_PLAY_PATH}\n          style={{ pointerEvents: 'all', textDecoration: 'none' }}\n          download=\"ZVPlayer.exe\"\n          rel=\"noopener noreferrer\"className=\"install-link\">{_APP_PLAY_VERSION}</a>\n        </span>\n      )}\n    </div>\n  )\n}\n\nexport default VideoMessage\n","export const computedIndexFormTime = (historyList, time) => {\n  let index = 0\n  try {\n    index = historyList.fragments.findIndex((v) => v.end > time)\n  } catch (e) {\n    console.error('historyList data error', historyList)\n  }\n  return index\n}\nexport const computedTimeAndIndex = (historyList, currentTime) => {\n  const index = computedIndexFormTime(historyList, currentTime)\n  let seekTime = 0\n  try {\n    const fragment = historyList.fragments[index]\n    if (!fragment) {\n      return [0, 0]\n    }\n    seekTime = currentTime - fragment.begin - 1\n  } catch (e) {\n    console.error('historyList data error', historyList)\n  }\n  return [index, seekTime < 0 ? 0 : seekTime]\n}\n","import React, { useState, useEffect, useMemo, useCallback } from 'react'\r\nimport IconFont from '../iconfont'\r\nimport Slider from '../slider'\r\nimport { dateFormat } from '../util'\r\nimport EventName from '../event/eventName'\r\nimport PropTypes from 'prop-types'\r\nimport { computedTimeAndIndex } from './utils'\r\nimport '../style/time-line.less'\r\n\r\nconst computedLineList = (historyList) => {\r\n  const duration = historyList.duration\r\n  return historyList.fragments.map((v) => {\r\n    return {\r\n      disabled: !v.file,\r\n      size: ((v.end - v.begin) / duration) * 100,\r\n    }\r\n  })\r\n}\r\n\r\nfunction TineLine({ event, api, visibel, historyList, playIndex, seekTo, defaultTime }) {\r\n  const [state, setState] = useState({ duration: 1, currentTime: defaultTime, buffered: 0, isEnd: false })\r\n\r\n  useEffect(() => setState((old) => ({ ...old, currentTime: defaultTime })), [defaultTime])\r\n\r\n  useEffect(() => {\r\n    const getDuration = () => setState((old) => ({ ...old, duration: api.getDuration() }))\r\n    const getCurrentTime = () => setState((old) => ({ ...old, currentTime: api.getCurrentTime(), buffered: api.getSecondsLoaded() }))\r\n    const getBuffered = () => setState((old) => ({ ...old, buffered: api.getSecondsLoaded() }))\r\n    const historyPlayEnd = () => setState((old) => ({ ...old, isEnd: true }))\r\n    const reload = () => setState((old) => ({ ...old, isEnd: false, currentTime: api.getCurrentTime() }))\r\n    const seekendPlay = () => api.play()\r\n\r\n    event.addEventListener('loadedmetadata', getDuration)\r\n    event.addEventListener('durationchange', getDuration)\r\n    event.addEventListener('timeupdate', getCurrentTime)\r\n    event.addEventListener('progress', getBuffered)\r\n    event.addEventListener('suspend', getBuffered)\r\n    event.addEventListener('seeked', seekendPlay)\r\n    event.on(EventName.HISTORY_PLAY_END, historyPlayEnd)\r\n    event.on(EventName.RELOAD, reload)\r\n\r\n    return () => {\r\n      event.removeEventListener('loadedmetadata', getDuration)\r\n      event.removeEventListener('durationchange', getDuration)\r\n      event.removeEventListener('timeupdate', getCurrentTime)\r\n      event.removeEventListener('progress', getBuffered)\r\n      event.removeEventListener('suspend', getBuffered)\r\n      event.removeEventListener('seeked', seekendPlay)\r\n      event.off(EventName.HISTORY_PLAY_END, historyPlayEnd)\r\n      event.off(EventName.RELOAD, reload)\r\n    }\r\n  }, [event, api])\r\n\r\n  const changePlayTime = useCallback(\r\n    (percent) => {\r\n      const currentTime = percent * historyList.duration //修正一下误差\r\n      const [index, time] = computedTimeAndIndex(historyList, currentTime)\r\n      seekTo(currentTime, index)\r\n      setState((old) => ({ ...old, currentTime: time, isEnd: false }))\r\n    },\r\n    [historyList]\r\n  )\r\n\r\n  const renderTimeLineTips = (percent) => {\r\n    const currentTime = percent * historyList.duration * 1000\r\n    const date = dateFormat(historyList.beginDate + currentTime)\r\n    return <span>{date}</span>\r\n  }\r\n\r\n  const { currentTime, buffered, isEnd } = state\r\n  const lineList = useMemo(() => computedLineList(historyList), [historyList])\r\n  const currentLine = useMemo(() => lineList.filter((_, i) => i < playIndex).map((v) => v.size), [playIndex, lineList])\r\n  const currentIndexTime = useMemo(() => (currentLine.length === 0 ? 0 : currentLine.length > 1 ? currentLine.reduce((p, c) => p + c) : currentLine[0]), [currentLine])\r\n  const playPercent = useMemo(() => (currentTime / historyList.duration) * 100 + currentIndexTime, [currentIndexTime, historyList, currentTime])\r\n  const bufferedPercent = useMemo(() => (buffered / historyList.duration) * 100 + currentIndexTime, [historyList, currentIndexTime, buffered])\r\n\r\n  return (\r\n    <div className={`video-time-line-layout ${!visibel ? 'hide-time-line' : ''}`}>\r\n      <IconFont type=\"lm-player-PrevFast\" onClick={() => api.backWind()} className=\"time-line-action-item\" />\r\n      <Slider className=\"time-line-box\" currentPercent={isEnd ? '100' : playPercent} availablePercent={bufferedPercent} onChange={changePlayTime} renderTips={renderTimeLineTips}>\r\n        <>\r\n          {lineList.map((v, i) => {\r\n            const currentSizeLine = lineList.filter((v, i2) => i2 < i).map((v) => v.size)\r\n            const currentIndexSize = currentSizeLine.length === 0 ? 0 : currentSizeLine.length > 1 ? currentSizeLine.reduce((p, c) => p + c) : currentSizeLine[0]\r\n            const currentSize = v.size || 0\r\n            return (\r\n              <div className={`history-time-line-item ${v.disabled ? 'history-time-line-disabled' : ''}`} key={i} style={{ width: `${currentSize}%`, left: `${currentIndexSize}%` }} />\r\n            )\r\n          })}\r\n        </>\r\n      </Slider>\r\n      <IconFont type=\"lm-player-NextFast_Light\" onClick={() => api.fastForward()} className=\"time-line-action-item\" />\r\n    </div>\r\n  )\r\n}\r\n\r\nTineLine.propTypes = {\r\n  event: PropTypes.object,\r\n  api: PropTypes.object,\r\n  changePlayIndex: PropTypes.func,\r\n  playIndex: PropTypes.number,\r\n  historyList: PropTypes.array,\r\n  seekTo: PropTypes.func,\r\n  visibel: PropTypes.bool,\r\n}\r\n\r\nexport default TineLine\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport EventName from '../event/eventName'\r\n\r\nfunction ErrorEvent({ event, api, errorReloadTimer, flv, hls, changePlayIndex, isHistory, playIndex }) {\r\n  const [errorTimer, setErrorTime] = useState(0)\r\n  const errorInfo = useRef(null)\r\n  const reloadTimer = useRef(null)\r\n\r\n  useEffect(() => {\r\n    const errorHandle = (...args) => {\r\n      if (args[2] && args[2].msg && args[2].msg.includes('Unsupported audio')) {\r\n        return\r\n      }\r\n\r\n      if(args[1] && args[1].details && (\r\n        args[1].details.includes(\"bufferStalledError\") || \r\n        args[1].details.includes(\"bufferNudgeOnStall\") || \r\n        args[1].details.includes(\"bufferSeekOverHole\") || \r\n        args[1].details.includes(\"bufferAddCodecError\") \r\n      )){\r\n        return\r\n      }\r\n      \r\n      console.error(...args)\r\n      errorInfo.current = args\r\n      setErrorTime(errorTimer + 1)\r\n    }\r\n\r\n    const reloadSuccess = () => {\r\n      if (errorTimer > 0) {\r\n        console.warn('视频重连成功！')\r\n        event.emit(EventName.RELOAD_SUCCESS)\r\n        api.success()\r\n        clearErrorTimer()\r\n      }\r\n    }\r\n    const clearErrorTimer = () => setErrorTime(0)\r\n    try {\r\n      if (flv) {\r\n        flv.on('error', errorHandle)\r\n      }\r\n      if (hls) {\r\n        hls.on('hlsError', errorHandle)\r\n      }\r\n    } catch (e) {\r\n      //\r\n    }\r\n\r\n    if (isHistory) {\r\n      //历史视频切换播放索引时清除错误次数\r\n      event.on(EventName.CHANGE_PLAY_INDEX, clearErrorTimer)\r\n      //历史视频主动清除错误次数\r\n      event.on(EventName.CLEAR_ERROR_TIMER, clearErrorTimer)\r\n    }\r\n    event.addEventListener('error', errorHandle, false)\r\n    //获取video状态清除错误状态\r\n    event.addEventListener('canplay', reloadSuccess, false)\r\n\r\n    return () => {\r\n      try {\r\n        if (flv) {\r\n          flv.off('error', errorHandle)\r\n        }\r\n        if (hls) {\r\n          hls.off('hlsError', errorHandle)\r\n        }\r\n      } catch (e) {\r\n        console.warn(e)\r\n      }\r\n      if (isHistory) {\r\n        event.off(EventName.CHANGE_PLAY_INDEX, clearErrorTimer)\r\n        event.off(EventName.CLEAR_ERROR_TIMER, clearErrorTimer)\r\n      }\r\n      event.removeEventListener('error', errorHandle, false)\r\n      event.removeEventListener('canplay', reloadSuccess, false)\r\n    }\r\n  }, [event, flv, hls, errorTimer])\r\n\r\n  useEffect(() => {\r\n    if (errorTimer === 0) {\r\n      return\r\n    }\r\n    if (errorTimer > errorReloadTimer) {\r\n      isHistory ? changePlayIndex(playIndex + 1) : event.emit(EventName.RELOAD_FAIL)\r\n      api.unload()\r\n      return\r\n    }\r\n\r\n    console.warn(`视频播放出错，正在进行重连${errorTimer}`)\r\n    reloadTimer.current = setTimeout(() => {\r\n      event.emit(EventName.ERROR_RELOAD, errorTimer, ...errorInfo.current)\r\n      api.reload(true)\r\n    }, 2 * 1000)\r\n\r\n    return () => {\r\n      clearTimeout(reloadTimer.current)\r\n    }\r\n  }, [errorTimer, api, event, flv, hls])\r\n\r\n  return <></>\r\n}\r\n\r\nexport default ErrorEvent\r\n","/**\n * history下使用 用户切换下个播放地址\n */\n\nimport React, { useEffect } from 'react'\nimport PropTypes from 'prop-types'\n\nfunction PlayEnd({ event, changePlayIndex, playIndex }) {\n  useEffect(() => {\n    const endedHandle = () => changePlayIndex(playIndex + 1)\n    event.addEventListener('ended', endedHandle, false)\n    return () => {\n      event.removeEventListener('ended', endedHandle, false)\n    }\n  }, [event, playIndex, changePlayIndex])\n  return <></>\n}\n\nPlayEnd.propTypes = {\n  event: PropTypes.object,\n  changePlayIndex: PropTypes.func,\n  playIndex: PropTypes.number,\n}\nexport default PlayEnd\n","import React, { useRef, useState, useCallback, useEffect, useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ContrallerBar from '../contraller_bar';\r\nimport VideoMessage, { NoSource } from './message';\r\nimport HistoryTimeLine from './time_line_history';\r\nimport ErrorEvent from './errorEvent';\r\nimport DragEvent from '../event/dragEvent';\r\nimport Api from '../api';\r\nimport VideoEvent from '../event';\r\nimport PlayEnd from './play_end';\r\nimport EventName from '../event/eventName';\r\nimport ContrallerEvent from '../event/contrallerEvent';\r\nimport { getVideoType, createHlsPlayer, decodeService, getScreenRate, monitorHlsFragments } from '../util';\r\nimport { computedTimeAndIndex } from './utils';\r\n\r\n\r\n/**\r\n * 云录像播放 hls\r\n * @param {*} param0 \r\n * @returns \r\n */\r\nfunction HPlayer({ type, historyList, defaultTime, className, autoPlay, muted, poster, playsinline, loop, preload, children, onInitPlayer, screenNum, speed, ...props }) {\r\n  const playContainerRef = useRef(null);\r\n  const [playerObj, setPlayerObj] = useState(null);\r\n  const playerRef = useRef(null);\r\n  const [playStatus, setPlayStatus] = useState(() => computedTimeAndIndex(historyList, defaultTime));\r\n  const playIndex = useMemo(() => playStatus[0], [playStatus]);\r\n  const defaultSeekTime = useMemo(() => playStatus[1], [playStatus]);\r\n\r\n  const rate = useMemo(() => getScreenRate(screenNum), [screenNum]);\r\n  const [resolution, setResolution] = useState(rate);\r\n  const [colorPicker, setColorPicker] = useState(null);\r\n\r\n  const file = useMemo(() => {\r\n    let url;\r\n    try {\r\n      url = historyList.fragments[playIndex].file;\r\n    } catch (e) {\r\n      console.warn('未找到播放地址！', historyList);\r\n    }\r\n    return url;\r\n  }, [historyList, playIndex]);\r\n\r\n  /**\r\n   * 重写api下的seekTo方法\r\n   */\r\n  const seekTo = useCallback(\r\n    (currentTime) => {\r\n      const [index, seekTime] = computedTimeAndIndex(historyList, currentTime);\r\n      if (playerRef.current.event && playerRef.current.api) {\r\n        //判断是否需要更新索引\r\n        setPlayStatus((old) => {\r\n          if (old[0] !== index) {\r\n            return [index, seekTime];\r\n          } else {\r\n            playerRef.current.api.seekTo(seekTime, true);\r\n            return old;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    [playIndex, historyList]\r\n  );\r\n\r\n  const changePlayIndex = useCallback(\r\n    (index) => {\r\n      try {\r\n        if (index > historyList.fragments.length - 1) {\r\n          return playerRef.current && playerRef.current.event && playerRef.current.event.emit(EventName.HISTORY_PLAY_END);\r\n        }\r\n  \r\n        if (!historyList.fragments[index].file) {\r\n          return changePlayIndex(index + 1);\r\n        }\r\n  \r\n        if (playerRef.current && playerRef.current.event) {\r\n          playerRef.current.event.emit(EventName.CHANGE_PLAY_INDEX, index);\r\n        }\r\n        setPlayStatus([index, 0]);\r\n      } catch (error) {\r\n        // console.error('historyList data error', historyList)\r\n      }\r\n    },\r\n    [historyList]\r\n  );\r\n\r\n  const reloadHistory = useCallback(() => {\r\n    if (playStatus[0] === 0) {\r\n      playerRef.current.api.seekTo(defaultSeekTime);\r\n    }\r\n    setPlayStatus([0, 0]);\r\n\r\n    playerRef.current.event.emit(EventName.RELOAD);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!file) {\r\n      changePlayIndex(playIndex + 1);\r\n    }\r\n\r\n    file && playerObj && playerObj.api.setPlaybackRate(speed)\r\n\r\n  }, [file, playIndex, historyList, speed]);\r\n\r\n  useEffect(\r\n    () => () => {\r\n      if (playerRef.current && playerRef.current.event) {\r\n        playerRef.current.event.destroy();\r\n      }\r\n      if (playerRef.current && playerRef.current.api) {\r\n        playerRef.current.api.destroy();\r\n      }\r\n      playerRef.current = null;\r\n    },\r\n    [file]\r\n  );\r\n  useEffect(() => {\r\n    sessionStorage.setItem(\"__PLAYER_RESOLUTION_CUR\", resolution)\r\n  }, [resolution]);\r\n  \r\n  useEffect(() => {\r\n    console.info('云录像播放...')\r\n    if (!file) {\r\n      return;\r\n    }\r\n    const playerObject = {\r\n      playContainer: playContainerRef.current,\r\n      video: playContainerRef.current.querySelector('video'),\r\n      resolution: resolution,\r\n      screenNum: screenNum,\r\n    };\r\n    let isInit = false;\r\n    const formartType = getVideoType(file);\r\n    if (formartType === 'flv' || type === 'flv') {\r\n      isInit = true;\r\n      playerObject.flv = createFlvPlayer(playerObject.video, { ...props,  file: decodeService({file, resolution}) });\r\n    }\r\n    if (formartType === 'm3u8' || type === 'hls') {\r\n      isInit = true;\r\n      playerObject.hls = createHlsPlayer(playerObject.video, file);\r\n      monitorHlsFragments(playerObject.hls, resolution)\r\n    }\r\n    if (!isInit && (!['flv', 'm3u8'].includes(formartType) || type === 'native')) {\r\n      playerObject.video.src = file;\r\n    }\r\n    if (playerObject.event) {\r\n      playerObject.event.destroy();\r\n    }\r\n    playerObject.event = new VideoEvent(playerObject.video);\r\n    if (playerObject.api) {\r\n      playerObject.api.destroy();\r\n    }\r\n    playerObject.api = new Api(playerObject);\r\n    playerRef.current = playerObject;\r\n    setPlayerObj(playerObject);\r\n\r\n    if (defaultSeekTime) {\r\n      playerObject.api.seekTo(defaultSeekTime);\r\n    }\r\n    if (onInitPlayer) {\r\n      onInitPlayer(Object.assign({}, playerObject.api.getApi(), playerObject.event.getApi(), { seekTo, changePlayIndex, reload: reloadHistory }));\r\n    }\r\n    // 倍数\r\n    playerObject.api.setPlaybackRate(speed)\r\n  }, [historyList, file]);\r\n\r\n  return (\r\n    <div className={`lm-player-container ${className}`} ref={playContainerRef}>\r\n      <div className=\"player-mask-layout\">\r\n        <video autoPlay={autoPlay} preload={preload} muted={muted} poster={poster} controls={false} crossorigin={\"Anonymous\"} usecors={true} playsInline={playsinline} loop={loop} style={colorPicker} />\r\n      </div>\r\n      <VideoTools\r\n        defaultTime={defaultSeekTime}\r\n        playerObj={playerObj}\r\n        isLive={props.isLive}\r\n        hideContrallerBar={props.hideContrallerBar}\r\n        errorReloadTimer={props.errorReloadTimer}\r\n        scale={props.scale}\r\n        switchResolution={(resolution) => {\r\n          setResolution(resolution)\r\n        }}\r\n        snapshot={props.snapshot}\r\n        colorPicker={(value)=>{setColorPicker(value)}}\r\n        leftExtContents={props.leftExtContents}\r\n        leftMidExtContents={props.leftMidExtContents}\r\n        rightExtContents={props.rightExtContents}\r\n        rightMidExtContents={props.rightMidExtContents}\r\n        draggable={props.draggable}\r\n        changePlayIndex={changePlayIndex}\r\n        reloadHistory={reloadHistory}\r\n        historyList={historyList}\r\n        playIndex={playIndex}\r\n        seekTo={seekTo}\r\n        key={file}\r\n      />\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction VideoTools({\r\n  playerObj,\r\n  draggable,\r\n  isLive,\r\n  hideContrallerBar,\r\n  scale,\r\n  snapshot,\r\n  switchResolution,\r\n  leftExtContents,\r\n  leftMidExtContents,\r\n  rightExtContents,\r\n  rightMidExtContents,\r\n  errorReloadTimer,\r\n  changePlayIndex,\r\n  reloadHistory,\r\n  historyList,\r\n  seekTo,\r\n  playIndex,\r\n  defaultTime,\r\n  colorPicker\r\n}) {\r\n  if (!playerObj) {\r\n    return <NoSource />;\r\n  }\r\n  return (\r\n    <>\r\n      <VideoMessage api={playerObj.api} event={playerObj.event} />\r\n      {draggable && <DragEvent playContainer={playerObj.playContainer} api={playerObj.api} event={playerObj.event} />}\r\n      {!hideContrallerBar && (\r\n        <ContrallerEvent event={playerObj.event} playContainer={playerObj.playContainer}>\r\n          <ContrallerBar\r\n            api={playerObj.api}\r\n            event={playerObj.event}\r\n            playContainer={playerObj.playContainer}\r\n            video={playerObj.video}\r\n            colorPicker={colorPicker}\r\n            snapshot={snapshot}\r\n            rightExtContents={rightExtContents}\r\n            rightMidExtContents={rightMidExtContents}\r\n            switchResolution={switchResolution}\r\n            scale={scale}\r\n            isHistory={true}\r\n            isLive={isLive}\r\n            leftExtContents={leftExtContents}\r\n            leftMidExtContents={leftMidExtContents}\r\n            reloadHistory={reloadHistory}\r\n          />\r\n          <HistoryTimeLine\r\n            defaultTime={defaultTime}\r\n            changePlayIndex={changePlayIndex}\r\n            historyList={historyList}\r\n            playIndex={playIndex}\r\n            seekTo={seekTo}\r\n            api={playerObj.api}\r\n            event={playerObj.event}\r\n          />\r\n        </ContrallerEvent>\r\n      )}\r\n      <ErrorEvent\r\n        changePlayIndex={changePlayIndex}\r\n        playIndex={playIndex}\r\n        isHistory={true}\r\n        flv={playerObj.flv}\r\n        hls={playerObj.hls}\r\n        api={playerObj.api}\r\n        event={playerObj.event}\r\n        errorReloadTimer={errorReloadTimer}\r\n      />\r\n      <PlayEnd event={playerObj.event} changePlayIndex={changePlayIndex} playIndex={playIndex} />\r\n    </>\r\n  );\r\n}\r\n\r\nHPlayer.propTypes = {\r\n  historyList: PropTypes.object.isRequired, //播放地址 必填\r\n  errorReloadTimer: PropTypes.number, //视频错误重连次数\r\n  type: PropTypes.oneOf(['flv', 'hls', 'native']), //强制视频流类型\r\n  onInitPlayer: PropTypes.func,\r\n  isDraggable: PropTypes.bool,\r\n  isScale: PropTypes.bool,\r\n  muted: PropTypes.string,\r\n  autoPlay: PropTypes.bool,\r\n  playsInline: PropTypes.bool,\r\n  preload: PropTypes.string,\r\n  poster: PropTypes.string,\r\n  loop: PropTypes.bool,\r\n  defaultTime: PropTypes.number,\r\n  className: PropTypes.string,\r\n  playsinline: PropTypes.bool,\r\n  children: PropTypes.any,\r\n  rightExtContents: PropTypes.element,\r\n  rightMidExtContents: PropTypes.element,\r\n  leftExtContents: PropTypes.element,\r\n  leftMidExtContents: PropTypes.element,\r\n  flvOptions: PropTypes.object,\r\n  flvConfig: PropTypes.object,\r\n};\r\nHPlayer.defaultProps = {\r\n  draggable: true,\r\n  scale: true,\r\n  errorReloadTimer: 5,\r\n  muted: 'muted',\r\n  autoPlay: true,\r\n  playsInline: false,\r\n  preload: 'auto',\r\n  loop: false,\r\n  defaultTime: 0,\r\n  historyList: { beginDate: 0, duration: 0, fragments: [] },\r\n};\r\n\r\nexport default HPlayer;\r\n","import React, { useState, useEffect, useMemo, useCallback } from 'react'\r\nimport IconFont from '../iconfont'\r\nimport Slider from '../slider'\r\nimport { dateFormat } from '../util'\r\nimport EventName from '../event/eventName'\r\nimport PropTypes from 'prop-types'\r\nimport { computedTimeAndIndex } from './utils'\r\nimport '../style/time-line.less'\r\n\r\nconst computedLineList = (historyList) => {\r\n  const duration = historyList.duration\r\n  return historyList.fragments.map((v) => {\r\n    return {\r\n      disabled: !v.file,\r\n      size: ((v.end - v.begin) / duration) * 100,\r\n    }\r\n  })\r\n}\r\n\r\nfunction TineLine({ event, api, visibel, historyList, playIndex, seekTo, defaultTime }) {\r\n  const [state, setState] = useState({ duration: 1, currentTime: defaultTime, buffered: 0, isEnd: false })\r\n  useEffect(() => setState((old) => ({ ...old, currentTime: defaultTime })), [defaultTime])\r\n\r\n  useEffect(() => {\r\n    const getDuration = () => setState((old) => ({ ...old, duration: api.getDuration() }))\r\n    const getCurrentTime = () => setState((old) => ({ ...old, currentTime: api.getCurrentTime(), buffered: api.getSecondsLoaded() }))\r\n    const getBuffered = () => setState((old) => ({ ...old, buffered: api.getSecondsLoaded() }))\r\n    const historyPlayEnd = () => setState((old) => ({ ...old, isEnd: true }))\r\n    const reload = () => setState((old) => ({ ...old, isEnd: false, currentTime: api.getCurrentTime() }))\r\n    const seekendPlay = () => api.play()\r\n\r\n    event.addEventListener('loadedmetadata', getDuration)\r\n    event.addEventListener('durationchange', getDuration)\r\n    event.addEventListener('timeupdate', getCurrentTime)\r\n    event.addEventListener('progress', getBuffered)\r\n    event.addEventListener('suspend', getBuffered)\r\n    event.addEventListener('seeked', seekendPlay)\r\n    event.on(EventName.HISTORY_PLAY_END, historyPlayEnd)\r\n    event.on(EventName.RELOAD, reload)\r\n\r\n    return () => {\r\n      event.removeEventListener('loadedmetadata', getDuration)\r\n      event.removeEventListener('durationchange', getDuration)\r\n      event.removeEventListener('timeupdate', getCurrentTime)\r\n      event.removeEventListener('progress', getBuffered)\r\n      event.removeEventListener('suspend', getBuffered)\r\n      event.removeEventListener('seeked', seekendPlay)\r\n      event.off(EventName.HISTORY_PLAY_END, historyPlayEnd)\r\n      event.off(EventName.RELOAD, reload)\r\n    }\r\n  }, [event, api])\r\n\r\n  const changePlayTime = useCallback(\r\n    (percent) => {\r\n      const currentTime = percent * historyList.duration //修正一下误差\r\n      const [index, time] = computedTimeAndIndex(historyList, currentTime)\r\n      seekTo(currentTime, index, historyList.beginDate + currentTime*1000)\r\n      setState((old) => ({ ...old, isEnd: false }))\r\n    },\r\n    [historyList]\r\n  )\r\n\r\n  const renderTimeLineTips = (percent) => {\r\n    const currentTime = percent * historyList.duration * 1000\r\n    const date = dateFormat(historyList.beginDate + currentTime)\r\n    return <span>{date}</span>\r\n  }\r\n\r\n  const { currentTime, buffered, isEnd } = state\r\n  const lineList = useMemo(() => computedLineList(historyList), [historyList])\r\n  const currentLine = useMemo(() => lineList.filter((_, i) => i < playIndex).map((v) => v.size), [playIndex, lineList])\r\n  const currentIndexTime = useMemo(() => (currentLine.length === 0 ? 0 : currentLine.length > 1 ? currentLine.reduce((p, c) => p + c) : currentLine[0]), [currentLine])\r\n  const playPercent = useMemo(() => (currentTime / historyList.duration) * 100 + currentIndexTime, [currentIndexTime, historyList, currentTime])\r\n  const bufferedPercent = useMemo(() => (buffered / historyList.duration) * 100 + currentIndexTime, [historyList, currentIndexTime, buffered])\r\n  return (\r\n    <div className={`video-time-line-layout ${!visibel ? 'hide-time-line' : ''}`}>\r\n      <IconFont type=\"lm-player-PrevFast\" onClick={() => api.backWind()} className=\"time-line-action-item\" />\r\n      <Slider className=\"time-line-box\" currentPercent={isEnd ? '100' : playPercent} availablePercent={bufferedPercent} onChange={changePlayTime} renderTips={renderTimeLineTips}>\r\n        <>\r\n          {lineList.map((v, i) => {\r\n            const currentSizeLine = lineList.filter((v, i2) => i2 < i).map((v) => v.size)\r\n            const currentIndexSize = currentSizeLine.length === 0 ? 0 : currentSizeLine.length > 1 ? currentSizeLine.reduce((p, c) => p + c) : currentSizeLine[0]\r\n            const currentSize = v.size || 0\r\n            return (\r\n              <div className={`history-time-line-item ${v.disabled ? 'history-time-line-disabled' : ''}`} key={i} style={{ width: `${currentSize}%`, left: `${currentIndexSize}%` }} />\r\n            )\r\n          })}\r\n        </>\r\n      </Slider>\r\n      <IconFont type=\"lm-player-NextFast_Light\" onClick={() => api.fastForward()} className=\"time-line-action-item\" />\r\n    </div>\r\n  )\r\n}\r\n\r\nTineLine.propTypes = {\r\n  event: PropTypes.object,\r\n  api: PropTypes.object,\r\n  changePlayIndex: PropTypes.func,\r\n  playIndex: PropTypes.number,\r\n  historyList: PropTypes.array,\r\n  seekTo: PropTypes.func,\r\n  visibel: PropTypes.bool,\r\n}\r\n\r\nexport default TineLine\r\n","import React, { useRef, useState, useCallback, useEffect, useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ContrallerBar from '../contraller_bar';\r\nimport VideoMessage, { NoSource } from './message';\r\nimport HistoryFsLine from './time_fs_history';\r\nimport ErrorEvent from './errorEvent';\r\nimport DragEvent from '../event/dragEvent';\r\nimport Api from '../api';\r\nimport VideoEvent from '../event';\r\nimport PlayEnd from './play_end';\r\nimport EventName from '../event/eventName';\r\nimport ContrallerEvent from '../event/contrallerEvent';\r\nimport { getVideoType, createFlvPlayer, decodeService, getScreenRate } from '../util';\r\nimport { computedTimeAndIndex } from './utils';\r\n\r\n/**\r\n * 前端录像播放 http-flv\r\n * @param {*} param0 \r\n * @returns \r\n */\r\nfunction FPlayer({ type, historyList, defaultTime, className, autoPlay, muted, poster, playsinline, loop, preload, children, onInitPlayer, screenNum, speed, seekFrontRangeData, ...props }) {\r\n  const playContainerRef = useRef(null);\r\n  const [playerObj, setPlayerObj] = useState(null);\r\n  const [seekTime, setSeekTime] = useState(0);\r\n  const [playIndex, setPlayIndex] = useState(0);\r\n  const playerRef = useRef(null);\r\n  const [playStatus, setPlayStatus] = useState(() => computedTimeAndIndex(historyList, defaultTime));\r\n\r\n  useEffect(() => {\r\n    setPlayIndex(computedTimeAndIndex(historyList, seekTime)[0])\r\n  }, [seekTime]);\r\n\r\n  const defaultSeekTime = useMemo(() => playStatus[1], [playStatus]);\r\n  const rate = useMemo(() => getScreenRate(screenNum), [screenNum]);\r\n  const [resolution, setResolution] = useState(rate);\r\n  const [colorPicker, setColorPicker] = useState(null);\r\n\r\n  const file = useMemo(() => {\r\n    let url;\r\n    try {\r\n      url = historyList.fragments[playIndex].file;\r\n    } catch (e) {\r\n      console.warn('未找到播放地址！', historyList);\r\n    }\r\n    return url;\r\n  }, [historyList, playIndex]);\r\n\r\n  /**\r\n   * 重写api下的seekTo方法\r\n   */\r\n  const seekTo = useCallback(\r\n    (currentTime,pIndex,dateTime) => {\r\n      if (playerRef.current.event && playerRef.current.api) {\r\n        seekFrontRangeData && seekFrontRangeData(`${dateTime}`.substr(0,10),function(msg){\r\n          if(msg == 'error'){\r\n            //seek异常时， 根据当前seektime获取当前对应的索引\r\n            changePlayIndex(pIndex);\r\n          }else{\r\n            setSeekTime(currentTime)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    [playIndex, historyList]\r\n  );\r\n\r\n  /**\r\n   * 录像播放片段-索引发生变化\r\n   * 自动播放\r\n   */\r\n  const changePlayIndex = useCallback(\r\n    (index) => {\r\n      try {\r\n        if (index > historyList.fragments.length - 1) {\r\n          return playerRef.current && playerRef.current.event && playerRef.current.event.emit(EventName.HISTORY_PLAY_END);\r\n        }\r\n        if (!historyList.fragments[index].file) {\r\n          return changePlayIndex(index + 1);\r\n        }\r\n        if (playerRef.current && playerRef.current.event) {\r\n          playerRef.current.event.emit(EventName.CHANGE_PLAY_INDEX, index);\r\n        }\r\n        setPlayIndex(index)\r\n      } catch (error) {\r\n        // console.error('historyList data error', historyList)\r\n      }\r\n    },\r\n    [historyList]\r\n  );\r\n\r\n  // 重装\r\n  const reloadHistory = useCallback(() => {\r\n    if (playStatus[0] === 0) {\r\n      playerRef.current.api.seekTo(defaultSeekTime);\r\n    }\r\n    setPlayIndex(0)\r\n\r\n    playerRef.current.event.emit(EventName.RELOAD);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!file) {\r\n      changePlayIndex(playIndex + 1);\r\n    }\r\n\r\n    file && playerObj && playerObj.api.setPlaybackRate(speed)\r\n\r\n  }, [file, playIndex, historyList, speed]);\r\n\r\n  useEffect(\r\n    () => () => {\r\n      if (playerRef.current && playerRef.current.event) {\r\n        playerRef.current.event.destroy();\r\n      }\r\n      if (playerRef.current && playerRef.current.api) {\r\n        playerRef.current.api.destroy();\r\n      }\r\n      playerRef.current = null;\r\n    },\r\n    [file]\r\n  );\r\n  \r\n  useEffect(() => {\r\n    sessionStorage.setItem(\"__PLAYER_RESOLUTION_CUR\", resolution)\r\n  }, [resolution]);\r\n\r\n  useEffect(() => {\r\n    console.info('前端录像播放...')\r\n    if (!file) {\r\n      return;\r\n    }\r\n    const playerObject = {\r\n      playContainer: playContainerRef.current,\r\n      video: playContainerRef.current.querySelector('video'),\r\n      resolution: resolution,\r\n      screenNum: screenNum,\r\n    };\r\n    let isInit = false;\r\n    const formartType = getVideoType(file);\r\n    if (formartType === 'flv' || type === 'flv') {\r\n      isInit = true;\r\n      playerObject.flv = createFlvPlayer(playerObject.video, { ...props,  file: decodeService({file, resolution}) });\r\n    }else{\r\n      playerObject.video.src = file;\r\n    }\r\n    if (playerObject.event) {\r\n      playerObject.event.destroy();\r\n    }\r\n    playerObject.event = new VideoEvent(playerObject.video);\r\n    if (playerObject.api) {\r\n      playerObject.api.destroy();\r\n    }\r\n    playerObject.api = new Api(playerObject);\r\n    playerRef.current = playerObject;\r\n    setPlayerObj(playerObject);\r\n\r\n    if (defaultSeekTime) {\r\n      playerObject.api.seekHsTo(defaultSeekTime);\r\n    }\r\n    if (onInitPlayer) {\r\n      onInitPlayer(Object.assign({}, playerObject.api.getApi(), playerObject.event.getApi(), { seekTo, changePlayIndex, reload: reloadHistory }));\r\n    }\r\n    // 倍数\r\n    playerObject.api.setPlaybackRate(speed)\r\n  }, [historyList, file]);\r\n\r\n  return (\r\n    <div className={`lm-player-container ${className}`} ref={playContainerRef}>\r\n      <div className=\"player-mask-layout\">\r\n        <video autoPlay={autoPlay} preload={preload} muted={muted} poster={poster} controls={false} crossorigin={\"Anonymous\"} usecors={true} playsInline={playsinline} loop={loop} style={colorPicker} />\r\n      </div>\r\n      <VideoFTools\r\n        defaultTime={defaultSeekTime}\r\n        playerObj={playerObj}\r\n        isLive={props.isLive}\r\n        hideContrallerBar={props.hideContrallerBar}\r\n        errorReloadTimer={props.errorReloadTimer}\r\n        scale={props.scale}\r\n        switchResolution={(resolution) => {\r\n          setResolution(resolution)\r\n        }}\r\n        snapshot={props.snapshot}\r\n        colorPicker={(value)=>{setColorPicker(value)}}\r\n        leftExtContents={props.leftExtContents}\r\n        leftMidExtContents={props.leftMidExtContents}\r\n        rightExtContents={props.rightExtContents}\r\n        rightMidExtContents={props.rightMidExtContents}\r\n        draggable={props.draggable}\r\n        changePlayIndex={changePlayIndex}\r\n        reloadHistory={reloadHistory}\r\n        historyList={historyList}\r\n        playIndex={playIndex}\r\n        seekTo={seekTo}\r\n        key={file}\r\n      />\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction VideoFTools({\r\n  playerObj,\r\n  draggable,\r\n  isLive,\r\n  hideContrallerBar,\r\n  switchResolution,\r\n  scale,\r\n  snapshot,\r\n  leftExtContents,\r\n  leftMidExtContents,\r\n  rightExtContents,\r\n  rightMidExtContents,\r\n  errorReloadTimer,\r\n  changePlayIndex,\r\n  reloadHistory,\r\n  historyList,\r\n  seekTo,\r\n  playIndex,\r\n  defaultTime,\r\n  colorPicker\r\n}) {\r\n  if (!playerObj) {\r\n    return <NoSource />;\r\n  }\r\n  return (\r\n    <>\r\n      <VideoMessage api={playerObj.api} event={playerObj.event} />\r\n      {draggable && <DragEvent playContainer={playerObj.playContainer} api={playerObj.api} event={playerObj.event} />}\r\n      {!hideContrallerBar && (\r\n        <ContrallerEvent event={playerObj.event} playContainer={playerObj.playContainer}>\r\n          <ContrallerBar\r\n            api={playerObj.api}\r\n            event={playerObj.event}\r\n            playContainer={playerObj.playContainer}\r\n            video={playerObj.video}\r\n            colorPicker={colorPicker}\r\n            snapshot={snapshot}\r\n            rightExtContents={rightExtContents}\r\n            rightMidExtContents={rightMidExtContents}\r\n            switchResolution={switchResolution}\r\n            scale={scale}\r\n            isHistory={true}\r\n            isLive={isLive}\r\n            leftExtContents={leftExtContents}\r\n            leftMidExtContents={leftMidExtContents}\r\n            reloadHistory={reloadHistory}\r\n          />\r\n          <HistoryFsLine\r\n            defaultTime={defaultTime}\r\n            changePlayIndex={changePlayIndex}\r\n            historyList={historyList}\r\n            playIndex={playIndex}\r\n            seekTo={seekTo}\r\n            api={playerObj.api}\r\n            event={playerObj.event}\r\n          />\r\n        </ContrallerEvent>\r\n      )}\r\n      <ErrorEvent\r\n        changePlayIndex={changePlayIndex}\r\n        playIndex={playIndex}\r\n        isHistory={true}\r\n        flv={playerObj.flv}\r\n        hls={playerObj.hls}\r\n        api={playerObj.api}\r\n        event={playerObj.event}\r\n        errorReloadTimer={errorReloadTimer}\r\n      />\r\n      <PlayEnd event={playerObj.event} changePlayIndex={changePlayIndex} playIndex={playIndex} />\r\n    </>\r\n  );\r\n}\r\n\r\nFPlayer.propTypes = {\r\n  historyList: PropTypes.object.isRequired, //播放地址 必填\r\n  errorReloadTimer: PropTypes.number, //视频错误重连次数\r\n  type: PropTypes.oneOf(['flv', 'hls', 'native']), //强制视频流类型\r\n  onInitPlayer: PropTypes.func,\r\n  isDraggable: PropTypes.bool,\r\n  isScale: PropTypes.bool,\r\n  muted: PropTypes.string,\r\n  autoPlay: PropTypes.bool,\r\n  playsInline: PropTypes.bool,\r\n  preload: PropTypes.string,\r\n  poster: PropTypes.string,\r\n  loop: PropTypes.bool,\r\n  defaultTime: PropTypes.number,\r\n  className: PropTypes.string,\r\n  playsinline: PropTypes.bool,\r\n  children: PropTypes.any,\r\n  rightExtContents: PropTypes.element,\r\n  rightMidExtContents: PropTypes.element,\r\n  leftExtContents: PropTypes.element,\r\n  leftMidExtContents: PropTypes.element,\r\n  flvOptions: PropTypes.object,\r\n  flvConfig: PropTypes.object,\r\n};\r\nFPlayer.defaultProps = {\r\n  draggable: true,\r\n  scale: true,\r\n  errorReloadTimer: 5,\r\n  muted: 'muted',\r\n  autoPlay: true,\r\n  playsInline: false,\r\n  preload: 'auto',\r\n  loop: false,\r\n  defaultTime: 0,\r\n  historyList: { beginDate: 0, duration: 0, fragments: [] },\r\n};\r\n\r\nexport default FPlayer;\r\n","import React, { useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport HPlayer from './hPlayer';\r\nimport FPlayer from './fPlayer';\r\nimport { getVideoType} from '../util';\r\n\r\nfunction HistoryPlayer({ type, historyList, defaultTime, className, autoPlay, muted, poster, playsinline, loop, preload, children, onInitPlayer, screenNum, speed, seekFrontRangeData, ...props }) {\r\n  const formartType = useMemo(() => {\r\n    try {\r\n      const fragment = historyList.fragments.find((item)=> {\r\n        if(item.file) return item\r\n      })\r\n      return getVideoType(fragment.file);\r\n    } catch (error) {\r\n      return ''\r\n    }\r\n  }, [historyList]);\r\n\r\n  const Player = formartType === 'flv'? FPlayer: HPlayer\r\n\r\n  return <Player type={type} historyList={historyList} defaultTime={defaultTime} className={className} \r\n  autoPlay= {autoPlay}\r\n  muted ={muted}\r\n  poster ={poster}\r\n  playsinline ={playsinline}\r\n  loop ={loop}\r\n  preload ={preload}\r\n  children ={children}\r\n  onInitPlayer ={onInitPlayer}\r\n  screenNum ={screenNum}\r\n  seekFrontRangeData={seekFrontRangeData}\r\n  speed  ={speed}\r\n  {...props }></Player>\r\n}\r\n\r\nHistoryPlayer.propTypes = {\r\n  historyList: PropTypes.object.isRequired, //播放地址 必填\r\n  errorReloadTimer: PropTypes.number, //视频错误重连次数\r\n  type: PropTypes.oneOf(['flv', 'hls', 'native']), //强制视频流类型\r\n  onInitPlayer: PropTypes.func,\r\n  isDraggable: PropTypes.bool,\r\n  isScale: PropTypes.bool,\r\n  muted: PropTypes.string,\r\n  autoPlay: PropTypes.bool,\r\n  playsInline: PropTypes.bool,\r\n  preload: PropTypes.string,\r\n  poster: PropTypes.string,\r\n  loop: PropTypes.bool,\r\n  defaultTime: PropTypes.number,\r\n  className: PropTypes.string,\r\n  playsinline: PropTypes.bool,\r\n  children: PropTypes.any,\r\n  rightExtContents: PropTypes.element,\r\n  rightMidExtContents: PropTypes.element,\r\n  leftExtContents: PropTypes.element,\r\n  leftMidExtContents: PropTypes.element,\r\n  flvOptions: PropTypes.object,\r\n  flvConfig: PropTypes.object,\r\n};\r\nHistoryPlayer.defaultProps = {\r\n  draggable: true,\r\n  scale: true,\r\n  errorReloadTimer: 5,\r\n  muted: 'muted',\r\n  autoPlay: true,\r\n  playsInline: false,\r\n  preload: 'auto',\r\n  loop: false,\r\n  defaultTime: 0,\r\n  historyList: { beginDate: 0, duration: 0, fragments: [] },\r\n};\r\n\r\nexport default HistoryPlayer;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Player from \"./player\";\nimport HistoryPlayer from \"./history\";\n\nexport function createPlayer({ container, children, onInitPlayer, ...props }) {\n  ReactDOM.render(\n    <Player\n      {...props}\n      onInitPlayer={player => {\n        player.destroy = function() {\n          ReactDOM.unmountComponentAtNode(container);\n        };\n        onInitPlayer && onInitPlayer(player);\n      }}\n    >\n      {children}\n    </Player>,\n    container\n  );\n}\nexport function createHistoryPlayer({ container, children, onInitPlayer, ...props }) {\n  ReactDOM.render(\n    <HistoryPlayer\n      {...props}\n      onInitPlayer={player => {\n        player.destroy = function() {\n          ReactDOM.unmountComponentAtNode(container);\n        };\n        onInitPlayer && onInitPlayer(player);\n      }}\n    >\n      {children}\n    </HistoryPlayer>,\n    container\n  );\n}\n"],"names":["VideoEventInstance","constructor","video","events","playerEvents","on","eventName","handle","listener","push","type","addEventListener","removeEventListener","index","findIndex","v","splice","emit","data","forEach","off","getApi","bind","destroy","Object","keys","key","fn","extend","dist","source","hasOwnProperty","urlBuild","url","temp","i","encodeURIComponent","join","indexOf","httpx","version","useXDR","logPrefix","xhr","xdomain","XDomainRequest","XMLHttpRequest","e","console","error","defaults","name","$defaults","debug","async","timeout","method","dataType","headers","contentType","jsonp","xhrFields","withCredentials","sendBefore","success","status","statusText","ontimeout","needUseXDomainRequest","test","location","hostname","window","request","options","settings","toUpperCase","urlData","log","warn","navigator","userAgent","result","JSON","parse","responseText","responseXML","readyStateChange","readyState","onload","onerror","open","setRequestHeader","key2","$request","$url","$method","$dataType","_xhr","send","exec","callback","get","post","put","patch","json","getJSON","callbackName","Date","getTime","Math","floor","random","evalJsonp","document","body","removeChild","getElementById","script","createElement","src","id","appendChild","getScript","head","getElementsByTagName","loaded","querySelectorAll","length","onreadystatechange","undefined","hostUrl","getTranscodingStream","value","label","actionName","setStreamResolution","BASE64_MAPPING","URLSAFE_BASE64_MAPPING","_toBinary","ascii","binary","b","reverse","_toDecimal","dec","p","pow","_toUTF8Binary","c","binaryArray","mustLen","fatLen","diff","unshift","_c","len","j","sum","_toBinaryArray","str","unicode","charCodeAt","_tmpBinary","_tmpdiff","concat","_toUnicodeStr","unicodeBinary","slice","String","fromCharCode","_encode","url_safe","base64_Index","dictionary","extra_Zero_Count","_tmpExtra_Zero_Count","base64","_decode","_base64Str","_len","charAt","substring","size","_tmp","_tmpLen","k","__BASE64","encode","decode","base64Str","urlsafe_encode","urlsafe_decode","GL_CACHE","TP","DM","SR","PT","FR_CON","UNIQUE","LOCAL_PORT","VIDEO_RESOLUTION","resolution","bitrate","templateCode","show","PY_M_CC_NAME","zvpalyer","findVideoAttribute","val","kv","ens","createHlsPlayer","file","Hls","player","liveDurationInfinity","levelLoadingTimeOut","fragLoadingTimeOut","enableWorker","loadSource","attachMedia","createFlvPlayer","flvOptions","flvConfig","flvjs","isSupported","createPlayer","assign","enableStashBuffer","stashInitialSize","cors","seekType","isLive","attachMediaElement","load","LoggingControl","enableError","logError","enableWarn","logWarn","enableVerbose","logDebug","enableDebug","enableInfo","forceGlobalTag","globalTag","getVideoType","timeStamp","second_time","time","ceil","second","min","hour","dateFormat","timetemp","date","YYYY","getFullYear","DD","getDate","MM","getMonth","hh","getHours","mm","getMinutes","ss","getSeconds","fullscreen","element","requestFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","isFullscreen","ele","fullscreenElement","msFullscreenElement","mozFullScreenElement","webkitFullscreenElement","fullScreenListener","isAdd","fullscreenchange","funcName","fullScreenEvents","map","computedBound","currentPosition","scale","eleRect","getBoundingClientRect","w","width","h","height","lx","ly","x","y","getQueryString","reg","RegExp","r","split","match","unescape","JSONP","functionName","parseInt","amount","innerText","genuuid","tid","hexDigits","substr","getScreenRate","num","videoRatio","getGlobalCache","strS","localStorage","getItem","playerOptions","getLocalPort","getAppPlayerVersion","sessionStorage","detectorPlayeMode","isPlus","setItem","compare","a","a_components","b_components","checkVerson","sysVersion","currentVersion","info","installState","port","respondData","res","code","message","err","monitorHlsFragments","hls","playeMode","event","levels","details","fragments","item","relurl","transformFn","decodeService","onToken","tansDecoding","serverDecoding","browserDecoding","videoTansDecoding","ip","origin","authorization","lastParam","lastIndexOf","resourceUrl","BASE64","replaceAll","param1","param2","param3","deviceInfo","url_info","pull_uri","lcStore","replace","fileUrl","IconFont","className","props","React","propTypes","PropTypes","string","Slider","Component","renderSliderTips","renderTips","clearTimeout","timer","setTimeout","top","layoutDom","tipsX","pageX","percent","setState","tipsY","showTips","tempValue","hideSliderTips","cancelPropagation","stopPropagation","startDrag","dragFlag","moveChange","stopDrag","computedPositionForEvent","state","onChange","changeCurrentValue","sliderDomRef","createRef","lineDom","dragDom","currentPercent","UNSAFE_componentWillReceiveProps","nextProps","componentDidMount","current","querySelector","componentWillUnmount","dx","render","availablePercent","children","left","number","seekTo","func","any","defaultProps","Tips","getContainer","visibel","style","useRef","useEffect","box","ReactDOM","createPortal","bool","Bar","RELOAD","RELOAD_FAIL","RELOAD_SUCCESS","ERROR","ERROR_RELOAD","HISTORY_PLAY_END","SEEK","TRANSFORM","CHANGE_PLAY_INDEX","HIDE_CONTRALLER","SHOW_CONTRALLER","CLEAR_ERROR_TIMER","LeftBar","api","isHistory","reloadHistory","leftExtContents","leftMidExtContents","hideBar","setHideBar","openSliderVolume","setOpenSliderVolume","useState","dep","setDep","now","elRef","updateRender","paused","useMemo","statusIconClassName","volumeVal","muted","volume","volumeIcon","volumePercent","sliderClassName","changePlayStatus","useCallback","ended","play","pause","mutedChantgeStatus","unmute","mute","onChangeVolume","setVolume","parseFloat","toFixed","reload","EventName","precent","round","object","playerProps","node","ColorPicker","colorfilter","brightnessValue","setBrightnessValue","contrastValue","setContrastValue","saturateValue","setSaturateValue","hueValue","setHueValue","isPicker","setIsPicker","brightness","cv","contrast","saturate","hue","handleAllChange","handleBrightnessChange","handleContrastChange","handleSaturateChange","handleHueChange","handleResetChange","handleOpenPicker","ResolutionPicker","switchResolution","isResolution","setIsResolution","resolutionRef","ratioValue","viewText","setViewText","getResolution","handleOpenResolution","setRatio","args","RightBar","playContainer","snapshot","rightExtContents","rightMidExtContents","colorPicker","isPalette","isSwithRate","update","isfull","isFullScreen","cancelFullScreen","getCurrentScreen","setScale","position","getPosition","getScale","setPosition","ScaleBar","ContrallerBar","ContrallerEvent","setVisibel","showContraller","hideContraller","Children","child","isValidElement","cloneElement","VideoMessage","setStreamState","errorTimer","loading","openStartLoading","old","openWaitLoading","openSeekLoading","canplayLoading","closeLoading","errorReload","reloadFail","reloadSuccess","playEnd","ErrorContainer","reconnectHandle","fontSize","color","NoSource","install","_TEMP_PLAY_CODE","_APP_PLAY_VERSION","_TEMP_PLAY_PATH","BSConfig","playerDownloadUrl","pointerEvents","textDecoration","TineLine","duration","currentTime","buffered","getDuration","getCurrentTime","getSecondsLoaded","getBuffered","seekendPlay","playPercent","bufferedPercent","changePlayTime","renderTimeLineTips","backWind","fastForward","ErrorEvent","flv","errorNoticeHandle","errorInfo","errorHandle","msg","includes","unload","DragEvent","openDrag","start","pageY","end","transformChange","lcStoreService","Api","screenNum","updateChunk","removeAttribute","detachMediaElement","seconds","noEmit","getBufferedTime","seekHsTo","notEmit","swapAudioCodec","recoverMediaError","stopLoad","startLoad","fraction","requestPictureInPicture","pictureInPictureElement","exitPictureInPicture","setPlaybackRate","rate","playbackRate","seekable","Infinity","canvas","ctx","getContext","videoWidth","videoHeight","drawImage","remove","toDataURL","isRest","transition","__setTransform","isAnimate","transform","exeRatioCommand","ratio","restPlayRate","getPlayerIng","__player","getHiddenProp","prefixes","getVisibilityState","visibilityState","visProp","evtname","LiveHeart","browserTabChange","BrowserTab","CountContext","createContext","ReConnection","connectHandle","connectCount","connectStatus","useContext","SinglePlayer","setConnectStatus","playerStatus","updateStatus","setConnectCount","count","currentStatus","errorReloadTimer","streamState","onStreamMounted","errorExtContents","ZPlayer","autoPlay","poster","playsinline","loop","preload","onInitPlayer","playContainerRef","playerObj","setPlayerObj","playerRef","setResolution","setColorPicker","setInstall","token","onVideoFn","uuid","destroyEvent","createEvent","VideoEvent","destroyApi","createApi","createPlayServer","playStatus","isInit","formartType","playerObject","mosLeaveHandler","VideoTools","hideContrallerBar","draggable","TimeLine","isRequired","oneOf","playsInline","computedIndexFormTime","historyList","computedTimeAndIndex","seekTime","fragment","begin","computedLineList","disabled","playIndex","defaultTime","isEnd","historyPlayEnd","beginDate","lineList","currentLine","filter","_","currentIndexTime","reduce","currentSizeLine","i2","currentIndexSize","currentSize","changePlayIndex","array","setErrorTime","reloadTimer","clearErrorTimer","PlayEnd","endedHandle","HPlayer","speed","setPlayStatus","defaultSeekTime","HistoryTimeLine","isDraggable","isScale","FPlayer","seekFrontRangeData","setSeekTime","setPlayIndex","pIndex","dateTime","VideoFTools","HistoryFsLine","HistoryPlayer","find","Player","container","unmountComponentAtNode","createHistoryPlayer"],"mappings":"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"}